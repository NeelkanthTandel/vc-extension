/*! For license information please see content.js.LICENSE.txt */
!function(){var e={107:function(e){var t;self,t=()=>(()=>{var e={7757:(e,t,r)=>{e.exports=r(5666)},4180:e=>{self,e.exports=(()=>{var e={43:function(e,t,r){var n,a;!function(i,o){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function a(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?i:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}function s(t,r){for(var a=0;a<n.length;a++){var i=n[a];this[i]=a<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function c(e,r,n){return function(){typeof console!==t&&(s.call(this,r,n),this[e].apply(this,arguments))}}function l(e,t,r){return o(e)||c.apply(this,arguments)}function u(e,r,a){var i,o=this,c="loglevel";function u(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=a||l,o.getLevel=function(){return i},o.setLevel=function(r,a){if("string"==typeof r&&void 0!==o.levels[r.toUpperCase()]&&(r=o.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==a&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+r+";"}catch(e){}}}(r),s.call(o,r,e),typeof console===t&&r<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){u()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var d=u();null==d&&(d=null==r?"WARN":r),o.setLevel(d,!1)}var d=new u,p={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new u(e,d.getLevel(),d.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=f),d},d.getLoggers=function(){return p},d.default=d,d},void 0===(a=n.call(t,r,t,e))||(e.exports=a)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{VideoSDKMetrics:()=>N});const e="inbound",t="outbound",a={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:e},i={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:t},o={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:e},s={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:t},c="inbound-rtp",l="packetsLost",u="pliCount",d="nackCount",p="audio",f="video",h={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},m="audio",y="video",v="network",g="data";var _=r(43);const b=()=>`${(new Date).toISOString()} | metrics`,w=(e,t,r)=>`${e} | ${t} | ${r}`;_.setDefaultLevel(_.levels.TRACE);const S=(e,t,r)=>{r?_.debug(w(b(),e,t),r):_.debug(w(b(),e,t))},E=(e,t)=>{_.warn(w(b(),e,t))},P=(e,t)=>{_.error(w(b(),e,t))},k="extractor   ",T=(t,r,n)=>{if(!r)return null;const c={};let l=r.audio[t];l||(l=n===e?{...a}:{...i}),c.audio=l;let u=r.video[t];return u||(u=n===e?{...o}:{...s}),c.video=u,c},R=(e,t,r,n)=>{let a=!1;const i=n[t].total_rtt_ms_out,o=n[t].total_rtt_measure_out,s=r?r[t].total_rtt_ms_out:0,c=r?r[t].total_rtt_measure_out:0,l={rtt:null,totalRTT:i,totalRTTMeasurements:o};if(e.timestamp===n[t].timestamp_out)return l;if(!Object.prototype.hasOwnProperty.call(e,"roundTripTime"))return l;if(Object.prototype.hasOwnProperty.call(e,"roundTripTimeMeasurements")&&(a=!0,0===Number(e.roundTripTimeMeasurements)||Number(e.roundTripTimeMeasurements)-c===o))return l;const u=Number(1e3)*Number(e.roundTripTime);let d=i+u,p=o+1;return a&&(d=Number(1e3)*Number(e.totalRoundTripTime)-s,p=Number(e.roundTripTimeMeasurements)-c),{rtt:u,totalRTT:d,totalRTTMeasurements:p}},C=(e,t,r)=>e.timestamp===r[t].timestamp_out?null:Object.prototype.hasOwnProperty.call(e,"jitter")?Number(1e3)*(Number(e.jitter)||0):null,O=(e,t,r,n)=>{if(!Object.prototype.hasOwnProperty.call(e,"packetsSent")||!Object.prototype.hasOwnProperty.call(e,"bytesSent"))return{packetsSent:r[t].total_packets_out,packetsLost:r[t].total_packets_lost_out,bytesSent:r[t].total_KBytes_out};const a=Number(e.packetsSent)||0-(n?n[t].total_packets_out:0),i=a-r[t].total_packets_out,o=Number(e.bytesSent)/1024-(n?n[t].total_KBytes_out:0),s=o-r[t].total_KBytes_out,c=e.timestamp||Date.now(),l=n?n.timestamp:null;let u=r.timestamp;!u&&l&&(u=l);const d=u?c-u:0;return{packetsSent:a,deltaPacketsSent:i,KBytesSent:o,deltaKBytesSent:s,kbsSent:d>0?.008*s*1024/d*1e3:0}},x=(e,t,r,n)=>{let a=r[t].total_packets_lost_out,i=0,o=0;return Object.prototype.hasOwnProperty.call(e,l)&&(a=Number(e.packetsLost)||0-(n?n[t].total_packets_lost_out:0),i=a-r[t].total_packets_lost_out),Object.prototype.hasOwnProperty.call(e,"fractionLost")&&(o=Number(100*e.fractionLost)),{packetsLost:a,deltaPacketsLost:i,fractionLost:o}},D=(e,t,r,n)=>{if(!Object.prototype.hasOwnProperty.call(e,"packetsReceived")||!Object.prototype.hasOwnProperty.call(e,l)||!Object.prototype.hasOwnProperty.call(e,"bytesReceived"))return{percent_packets_lost:r[t].percent_packets_lost_in,packetsReceived:r[t].total_packets_in,packetsLost:r[t].total_packets_lost_in,bytesReceived:r[t].total_KBytes_in};const a=(Number(e.packetsReceived)||0)-(n?n[t].total_packets_in:0),i=(Number(e.packetsLost)||0)-(n?n[t].total_packets_lost_in:0),o=i-r[t].total_packets_lost_in,s=a-r[t].total_packets_in,c=a!==r[t].total_packets_in?100*o/(o+s):0,u=Number(e.bytesReceived)/1024-(n?n[t].total_KBytes_in:0),d=u-r[t].total_KBytes_in,p=e.timestamp||Date.now(),f=n?n.timestamp:null;let h=r.timestamp;!h&&f&&(h=f);const m=h?p-h:0;return{percentPacketsLost:c,packetsReceived:a,deltaPacketsReceived:s,packetsLost:i,deltaPacketsLost:o,KBytesReceived:u,deltaKBytesReceived:d,kbsReceived:m>0?.008*d*1024/m*1e3:0}},I=e=>"relay"!==e.candidateType?"":e.relayProtocol||"",L=e=>Object.prototype.hasOwnProperty.call(e,"frameHeight")&&Object.prototype.hasOwnProperty.call(e,"frameWidth")?{width:e.frameWidth||null,height:e.frameHeight||null,framerate:e.framesPerSecond}:{width:null,height:null,framerate:null};class M{constructor(e,t){this._callbacks={onStatsCollected:null},this._id=`collector-${t}`,this._moduleName=this._id,this._probeId=t,this._config=e,this._state="idle",this._statsReports=[]}registerCallback(e,t,r){e in this._callbacks?(this._callbacks[e]={callback:t,context:r},S(this._moduleName,`registered callback '${e}'`)):P(this._moduleName,`can't register callback for '${e}' - not found`)}unregisterCallback(e){e in this._callbacks?(this._callbacks[e]=null,delete this._callbacks[e],S(this._moduleName,`unregistered callback '${e}'`)):P(this._moduleName,`can't unregister callback for '${e}' - not found`)}analyze(r,n){const l=(e=>{const t={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(e){const t={...e,audio:{},video:{},data:{...e.data},network:{...e.network}};return Object.keys(e.audio).forEach((r=>{t.audio[r]={...e.audio[r]}})),Object.keys(e.video).forEach((r=>{t.video[r]={...e.video[r]}})),t}return{...t,audio:{},video:{},data:{...t.data},network:{...t.network}}})(n);l.name=this._config.name,l.meetingId=this._config.meetingId,l.peerId=this._config.peerId,l.count=n?n.count+1:1;let h=null;return r.forEach((r=>{!h&&r.timestamp&&(h=r.timestamp),((r,n,a,i)=>{if(!r)return[];switch(r.type){case"candidate-pair":let o=!1;if(r.nominated&&"succeeded"===r.state&&(o=!0,S(k,`analyze() - got stats ${r.type} for ${a}`,r),"selected"in r&&!r.selected&&(o=!1)),o){r.localCandidateId,r.remoteCandidateId;const e=((e,t,r)=>{const n=(e.bytesReceived||0)/1024-0,a=(e.bytesSent||0)/1024-0,i=e.timestamp||Date.now(),o=n-t.data.total_KBytes_in,s=a-t.data.total_KBytes_out;let c=t.timestamp;const l=c?i-c:0;return{total_KBytes_received:n,total_KBytes_sent:a,delta_KBytes_received:o,delta_KBytes_sent:s,kbs_speed_received:l>0?.008*o*1024/l*1e3:0,kbs_speed_sent:l>0?.008*s*1024/l*1e3:0}})(r,n),t=((e=>{e.availableIncomingBitrate,e.availableOutgoingBitrate})(r),((e,t,r,n)=>{if(!Object.prototype.hasOwnProperty.call(e,"currentRoundTripTime"))return{rtt:null,totalRTT:n.data.total_rtt_connectivity_ms,totalRTTMeasurements:n.data.total_rtt_connectivity_measure};const a=Number(1e3)*Number(e.currentRoundTripTime);let i=n.data.total_rtt_connectivity_ms+a,o=n.data.total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(e,"totalRoundTripTime")&&(i=Number(1e3)*Number(e.totalRoundTripTime)-0),Object.prototype.hasOwnProperty.call(e,"responsesReceived")&&(o=Number(e.responsesReceived)-0),{rtt:a,totalRTT:i,totalRTTMeasurements:o}})(r,0,0,n));return[{type:g,value:{total_KBytes_in:e.total_KBytes_received}},{type:g,value:{total_KBytes_out:e.total_KBytes_sent}},{type:g,value:{delta_KBytes_in:e.delta_KBytes_received}},{type:g,value:{delta_KBytes_out:e.delta_KBytes_sent}},{type:g,value:{delta_kbs_in:e.kbs_speed_received}},{type:g,value:{delta_kbs_out:e.kbs_speed_sent}},{type:g,value:{delta_rtt_connectivity_ms:t.rtt}}]}break;case"local-candidate":if(r.id===n.network.local_candidate_id)return[{type:v,value:{infrastructure:r.networkType}},{type:v,value:{local_candidate_protocol:r.protocol||""}},{type:v,value:{local_candidate_relay_protocol:I(r)}}];break;case c:{S(k,`analyze() - got stats ${r.type} for ${a}`,r);const t=r.ssrc,o=T(t,n,e);o&&(o.timestamp=n.timestamp);const s=T(t,i,e);if(s&&(s.timestamp=i.timestamp),r.mediaType===p){const e=D(r,p,o,s),n=C(r,p,o),a=r.codecId||"",i=((e,t,r,n)=>{const a=Number(e.concealmentEvents)||0,i=a-(r.audio.total_concealment_events||0),o=Number(e.insertedSamplesForDeceleration)||0,s=o-(r.audio.total_inserted_samples_for_decelaration||0),c=Number(e.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:a,deltaConcealmentEvents:i,totalInsertedSamplesForDecelaration:o,deltaInsertedSamplesForDecelaration:s,totalRemovedSamplesForAccelaration:c,deltaRemovedSampleForAccelaration:c-(r.audio.total_removed_samples_for_accelaration||0)}})(r,0,o);return[{ssrc:t,type:m,value:{codec_id_in:a}},{ssrc:t,type:m,value:{total_packets_in:e.packetsReceived}},{ssrc:t,type:m,value:{delta_packets_in:e.deltaPacketsReceived}},{ssrc:t,type:m,value:{total_packets_lost_in:e.packetsLost}},{ssrc:t,type:m,value:{delta_packets_lost_in:e.deltaPacketsLost}},{ssrc:t,type:m,value:{percent_packets_lost_in:e.percentPacketsLost}},{ssrc:t,type:m,value:{total_KBytes_in:e.KBytesReceived}},{ssrc:t,type:m,value:{delta_KBytes_in:e.deltaKBytesReceived}},{ssrc:t,type:m,value:{delta_kbs_in:e.kbsReceived}},{ssrc:t,type:m,value:{delta_jitter_ms_in:n}},{ssrc:t,type:m,value:{total_concealment_events:i.totalConcealmentEvents}},{ssrc:t,type:m,value:{delta_concealment_events:i.deltaConcealmentEvents}},{ssrc:t,type:m,value:{total_inserted_samples_for_decelaration:i.totalInsertedSamplesForDecelaration}},{ssrc:t,type:m,value:{delta_inserted_samples_for_decelaration:i.deltaInsertedSamplesForDecelaration}},{ssrc:t,type:m,value:{total_removed_samples_for_accelaration:i.totalRemovedSamplesForAccelaration}},{ssrc:t,type:m,value:{delta_removed_samples_for_accelaration:i.deltaRemovedSampleForAccelaration}},{ssrc:t,type:m,value:{track_in:r.trackId}},{ssrc:t,type:m,value:{track_id_in:r.trackIdentifier}},{ssrc:t,type:m,value:{media_source_id:r.mediaSourceId}}]}if(r.mediaType===f){((e,t)=>{if(!Object.prototype.hasOwnProperty.call(e,"framesDecoded")||!Object.prototype.hasOwnProperty.call(e,"totalDecodeTime"))return{delta_ms_decode_frame:t.video.delta_ms_decode_frame_in,frames_decoded:t.video.total_frames_decoded_in,total_decode_time:t.video.total_time_decoded_in};e.framesDecoded,e.totalDecodeTime,t.video.total_time_decoded_in,t.video.total_frames_decoded_in})(r,o);const e=D(r,f,o,s),n=C(r,f,o),a=(r.decoderImplementation,r.codecId||null),i=L(r);return((e,t,r)=>{if(!Object.prototype.hasOwnProperty.call(e,u)||!Object.prototype.hasOwnProperty.call(e,d))return{pliCount:t.total_pli_sent_in,nackCount:t.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};e.pliCount,r&&r.video.total_pli_sent_in,e.nackCount,r&&r.video.total_nack_sent_in,t.video.total_pli_sent_in,t.video.total_nack_sent_in})(r,o,s),[{ssrc:t,type:y,value:{codec_id_in:a}},{ssrc:t,type:y,value:{total_packets_in:e.packetsReceived}},{ssrc:t,type:y,value:{delta_packets_in:e.deltaPacketsReceived}},{ssrc:t,type:y,value:{total_packets_lost_in:e.packetsLost}},{ssrc:t,type:y,value:{delta_packets_lost_in:e.deltaPacketsLost}},{ssrc:t,type:y,value:{percent_packets_lost_in:e.percentPacketsLost}},{ssrc:t,type:y,value:{total_KBytes_in:e.KBytesReceived}},{ssrc:t,type:y,value:{delta_KBytes_in:e.deltaKBytesReceived}},{ssrc:t,type:y,value:{delta_kbs_in:e.kbsReceived}},{ssrc:t,type:y,value:{delta_jitter_ms_in:n}},{ssrc:t,type:y,value:{size_in:i}},{ssrc:t,type:y,value:{track_in:r.trackId}},{ssrc:t,type:y,value:{track_id_in:r.trackIdentifier}},{ssrc:t,type:y,value:{media_source_id:r.mediaSourceId}}]}break}case"outbound-rtp":{S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=r.ssrc,o=T(e,n,t);o&&(o.timestamp=n.timestamp);const s=T(e,i,t);if(s&&(s.timestamp=i.timestamp),r.mediaType===p){const t=r.codecId||null,n=O(r,p,o,s);return[{ssrc:e,type:m,value:{codec_id_out:t}},{ssrc:e,type:m,value:{total_packets_out:n.packetsSent}},{ssrc:e,type:m,value:{delta_packets_out:n.deltaPacketsSent}},{ssrc:e,type:m,value:{total_KBytes_out:n.KBytesSent}},{ssrc:e,type:m,value:{delta_KBytes_out:n.deltaKBytesSent}},{ssrc:e,type:m,value:{delta_kbs_out:n.kbsSent}},{ssrc:e,type:m,value:{track_out:r.trackId}},{ssrc:e,type:m,value:{track_id_out:r.trackIdentifier}},{ssrc:e,type:m,value:{media_source_id:r.mediaSourceId}}]}if(r.mediaType===f){r.encoderImplementation;const t=r.codecId||null,n=(((e,t)=>{if(!Object.prototype.hasOwnProperty.call(e,"framesEncoded")||!Object.prototype.hasOwnProperty.call(e,"totalEncodeTime"))return{delta_ms_encode_frame:t.video.delta_ms_encode_frame_out,frames_encoded:t.video.total_frames_encoded_out,total_encode_time:t.video.total_time_encoded_out};e.framesEncoded,e.totalEncodeTime,t.video.total_time_encoded_out,t.video.total_frames_encoded_out})(r,o),L(r)),a=(e=>{const t=Object.prototype.hasOwnProperty.call(e,"qualityLimitationReason")?e.qualityLimitationReason:null,r=Object.prototype.hasOwnProperty.call(e,"qualityLimitationResolutionChanges")?e.qualityLimitationResolutionChanges:null,n=Object.prototype.hasOwnProperty.call(e,"qualityLimitationDurations")?e.qualityLimitationDurations:null;return n&&Object.keys(n).forEach((e=>{n[e]>1e3&&(n[e]=Number(n[e]/1e3))})),{reason:t,durations:n,resolutionChanges:r}})(r),i=(((e,t,r)=>{if(!Object.prototype.hasOwnProperty.call(e,u)||!Object.prototype.hasOwnProperty.call(e,d))return{pliCount:t.total_pli_received_out,nackCount:t.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};e.pliCount,r&&r.video.total_pli_received_out,e.nackCount,r&&r.video.total_nack_received_out,t.video.total_pli_received_out,t.video.total_nack_received_out})(r,o,s),O(r,f,o,s));return[{ssrc:e,type:y,value:{codec_id_out:t}},{ssrc:e,type:y,value:{total_packets_out:i.packetsSent}},{ssrc:e,type:y,value:{delta_packets_out:i.deltaPacketsSent}},{ssrc:e,type:y,value:{total_KBytes_out:i.KBytesSent}},{ssrc:e,type:y,value:{delta_KBytes_out:i.deltaKBytesSent}},{ssrc:e,type:y,value:{delta_kbs_out:i.kbsSent}},{ssrc:e,type:y,value:{size_out:n}},{ssrc:e,type:y,value:{limitation_out:a}},{ssrc:e,type:y,value:{track_out:r.trackId}},{ssrc:e,type:y,value:{track_id_out:r.trackIdentifier}},{ssrc:e,type:y,value:{media_source_id:r.mediaSourceId}}]}break}case"media-source":{S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=[];return Object.keys(n.audio).forEach((t=>{const i=n.audio[t];if(i.media_source_id===r.id){S(k,`analyze() - got stats ${r.type} for ${a}`,r);var o=r.trackIdentifier;e.push({ssrc:i.ssrc,type:m,value:{track_id_out:o}})}})),Object.keys(n.video).forEach((t=>{const i=n.video[t];if(i.media_source_id===r.id){S(k,`analyze() - got stats ${r.type} for ${a}`,r);var o=r.trackIdentifier;e.push({ssrc:i.ssrc,type:y,value:{track_id_out:o}})}})),e}case"track":{S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=[];return Object.keys(n.audio).forEach((t=>{const i=n.audio[t];if(i.track_in===r.id||i.track_out===r.id){S(k,`analyze() - got stats ${r.type} for ${a}`,r);var o=r.trackIdentifier;r.id===i.track_in?e.push({ssrc:i.ssrc,type:m,value:{track_id_in:o}}):e.push({ssrc:i.ssrc,type:m,value:{track_id_out:o}})}})),Object.keys(n.video).forEach((t=>{const i=n.video[t];if(i.track_in===r.id||i.track_out===r.id){S(k,`analyze() - got stats ${r.type} for ${a}`,r);var o=r.trackIdentifier;r.id===i.track_in?e.push({ssrc:i.ssrc,type:y,value:{track_id_in:o}}):e.push({ssrc:i.ssrc,type:y,value:{track_id_out:o}})}})),e}case"codec":const s=[];return Object.keys(n.audio).forEach((e=>{const t=n.audio[e];if(t.codec_id_in===r.id||t.codec_id_out===r.id){S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=(e=>({channels:e.channels||null,clock_rate:e.clockRate||null,mime_type:e.mimeType||null,sdp_fmtp_line:e.sdpFmtpLine||null}))(r);r.id===t.codec_id_in?s.push({ssrc:t.ssrc,type:m,value:{codec_in:e}}):s.push({ssrc:t.ssrc,type:m,value:{codec_out:e}})}})),Object.keys(n.video).forEach((e=>{const t=n.video[e];if(t.codec_id_in===r.id||t.codec_id_out===r.id){S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=(e=>({clock_rate:e.clockRate||null,mime_type:e.mimeType||null}))(r);r.id===t.codec_id_in?s.push({ssrc:t.ssrc,type:y,value:{codec_in:e}}):s.push({ssrc:t.ssrc,type:y,value:{codec_out:e}})}})),s;case"remote-inbound-rtp":{S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=r.ssrc,o=T(e,n,t),s=T(e,i,t);if(r.kind===p){const t=R(r,p,s,o),n=C(r,p,o),a=x(r,p,o,s);return[{ssrc:e,type:m,value:{delta_rtt_ms_out:t.rtt}},{ssrc:e,type:m,value:{delta_jitter_ms_out:n}},{ssrc:e,type:m,value:{timestamp_out:r.timestamp}},{ssrc:e,type:m,value:{total_packets_lost_out:a.packetsLost}},{ssrc:e,type:m,value:{delta_packets_lost_out:a.deltaPacketsLost}},{ssrc:e,type:m,value:{percent_packets_lost_out:a.fractionLost}}]}if(r.kind===f){const t=R(r,f,s,o),n=C(r,f,o),a=x(r,f,o,s);return[{ssrc:e,type:y,value:{delta_rtt_ms_out:t.rtt}},{ssrc:e,type:y,value:{delta_jitter_ms_out:n}},{ssrc:e,type:y,value:{timestamp_out:r.timestamp}},{ssrc:e,type:y,value:{total_packets_lost_out:a.packetsLost}},{ssrc:e,type:y,value:{delta_packets_lost_out:a.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{S(k,`analyze() - got stats ${r.type} for ${a}`,r);const e=r.ssrc,o=T(e,n,t),s=T(e,i,t);if(r.kind===p){const t=R(r,p,s,o);return[{ssrc:e,type:m,value:{delta_rtt_ms_in:t.rtt}},{ssrc:e,type:m,value:{timestamp_in:r.timestamp}}]}break}}return[]})(r,l,l.name,null).forEach((e=>{if(e.value&&e.type)if(e.ssrc){let u=l[e.type][e.ssrc];u||(t=e.type,n=r.type,u=t===p?n===c?{...a}:{...i}:n===c?{...o}:{...s},u.ssrc=e.ssrc,l[e.type][e.ssrc]=u),Object.keys(e.value).forEach((t=>{void 0!==e.value[t]&&(u[t]=e.value[t])}))}else Object.keys(e.value).forEach((t=>{void 0!==e.value[t]&&(l[e.type][t]=e.value[t])}));var t,n}))})),l.timestamp=h,l}async collectStats(){try{const e=await this._config.monitoringObject.getStats(),t=this.analyze(e,this._statsReports.slice().pop()||null);return this._statsReports.push(t),this.fireOnStatsCollected(t),e}catch(e){return P(this._moduleName,`got error ${e}`),null}}fireOnStatsCollected(r){if(this._callbacks.onStatsCollected){const n={};n.meetingId=r.meetingId,n.peerId=r.peerId,n.name=r.name,n.audio=[],n.video=[],Object.values(r.audio).forEach((a=>{const i={};i.network=h[r.network.infrastructure],i.timestamp=r.timestamp,a.direction==e?(i.codec=a.codec_in.mime_type,i.jitter=a.delta_jitter_ms_in,i.bitrate=a.delta_kbs_in,i.packetsLost=a.delta_packets_lost_in,i.rtt=r.data.delta_rtt_connectivity_ms||0,i.totalPackets=a.delta_packets_in,i.concealmentEvents=a.delta_concealment_events,i.removedSampleForAccelaration=a.delta_removed_samples_for_accelaration,i.insertedSamplesForDecelaration=a.delta_inserted_samples_for_decelaration,i.trackId=a.track_id_in):a.direction==t&&(i.codec=a.codec_out.mime_type,i.jitter=a.delta_jitter_ms_out,i.bitrate=a.delta_kbs_out,i.packetsLost=a.delta_packets_lost_out,i.rtt=r.data.delta_rtt_connectivity_ms||0,i.totalPackets=a.delta_packets_out,i.trackId=a.track_id_out),n.audio.push(i)})),Object.values(r.video).forEach((a=>{const i={};i.network=h[r.network.infrastructure],i.timestamp=r.timestamp,a.direction==e?(i.codec=a.codec_in.mime_type,i.jitter=a.delta_jitter_ms_in,i.bitrate=a.delta_kbs_in,i.packetsLost=a.delta_packets_lost_in,i.rtt=r.data.delta_rtt_connectivity_ms||0,i.totalPackets=a.delta_packets_in,i.size=a.size_in,i.trackId=a.track_id_in):a.direction==t&&(i.codec=a.codec_out.mime_type,i.jitter=a.delta_jitter_ms_out,i.bitrate=a.delta_kbs_out,i.packetsLost=a.delta_packets_lost_out,i.rtt=r.data.delta_rtt_connectivity_ms||0,i.totalPackets=a.delta_packets_out,i.limitation=a.limitation_out,i.size=a.size_out,i.trackId=a.track_id_out),n.video.push(i)})),this._callbacks.onStatsCollected.callback(n)}}}class A{constructor(e){this._id=e.name&&e.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=e,this._collector=new M(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?E("Probe already started."):(S(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval((()=>{S(this._moduleName,"Collector collecting stats"),this._collector.collectStats()}),this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),S(this._moduleName,"Probe Stopped")):E("Probe not running, Please start first.")}set onStatsCollected(e){e?this._collector.registerCallback("onStatsCollected",e):this._collector.unregisterCallback("onStatsCollected")}}const j={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class N{constructor(e){var t;this._config={defaultConfig:j,...e},this._probes=[],t=this._config.verbose||!1,_.setLevel(t?_.levels.TRACE:_.levels.INFO),S("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(e,t){if(!e)throw new Error("undefined monitoring object");const r={monitoringObject:e,...t,...this._config},n=new A(r);return this._probes.push(n),n}removeExistingProbe(e){if(!e)throw new Error("undefined probe");e.stop(),this._probes=this._probes.filter((t=>e.id!==t.id))}startAllProbes(){this._probes.forEach(((e,t)=>{e.start()}))}stopAllProbes(){this._probes.forEach((e=>e.stop()))}}})(),n})()},7329:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const a=n(r(2035));t.Logger=class{constructor(e){e?(this._debug=(0,a.default)(`awaitqueue:${e}`),this._warn=(0,a.default)(`awaitqueue:WARN:${e}`),this._error=(0,a.default)(`awaitqueue:ERROR:${e}`)):(this._debug=(0,a.default)("awaitqueue"),this._warn=(0,a.default)("awaitqueue:WARN"),this._error=(0,a.default)("awaitqueue:ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},2186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwaitQueue=t.AwaitQueueRemovedTaskError=t.AwaitQueueStoppedError=void 0;const n=new(r(7329).Logger);class a extends Error{constructor(e){super(null!=e?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}}t.AwaitQueueStoppedError=a;class i extends Error{constructor(e){super(null!=e?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i)}}t.AwaitQueueRemovedTaskError=i,t.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,t){if(t=null!=t?t:e.name,n.debug(`push() [name:${t}]`),"function"!=typeof e)throw new TypeError("given task is not a function");if(t)try{Object.defineProperty(e,"name",{value:t})}catch(e){}return new Promise(((r,a)=>{const i={id:this.nextTaskId++,task:e,name:t,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:e=>{if(i.completed)return;i.completed=!0,this.pendingTasks.delete(i.id),n.debug(`resolving task [name:${i.name}]`),r(e);const[t]=this.pendingTasks.values();t&&!t.executedAt&&this.execute(t)},reject:e=>{if(!i.completed&&(i.completed=!0,this.pendingTasks.delete(i.id),n.debug(`rejecting task [name:${i.name}]: %s`,String(e)),a(e),!this.stopping)){const[e]=this.pendingTasks.values();e&&!e.executedAt&&this.execute(e)}}};this.pendingTasks.set(i.id,i),1===this.pendingTasks.size&&this.execute(i)}))}stop(){n.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())n.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new a);this.stopping=!1}remove(e){n.debug(`remove() [taskIdx:${e}]`);const t=Array.from(this.pendingTasks.values())[e];t?t.reject(new i):n.debug(`stop() | no task with given idx [taskIdx:${e}]`)}dump(){const e=Date.now();let t=0;return Array.from(this.pendingTasks.values()).map((r=>({idx:t++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0})))}async execute(e){if(n.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const t=await e.task();e.resolve(t)}catch(t){e.reject(t)}}}},2035:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(1811)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1811:(e,t,r)=>{e.exports=function(e){function t(e){let r,a,i,o=null;function s(...e){if(!s.enabled)return;const n=s,a=Number(new Date),i=a-(r||a);n.diff=i,n.prev=r,n.curr=a,r=a,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,a)=>{if("%%"===r)return"%";o++;const i=t.formatters[a];if("function"==typeof i){const t=e[o];r=i.call(n,t),e.splice(o,1),o--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(a!==t.namespaces&&(a=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(a),...t.skips.map(a).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8962:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});var n={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{width:640,height:360,bitRate:2e5,frameRate:3},h720p_5fps:{width:1280,height:720,bitRate:4e5,frameRate:5},h720p_15fps:{width:1280,height:720,bitRate:1e6,frameRate:15},h1080p_15fps:{width:1920,height:1080,bitRate:15e5,frameRate:15},h1080p_30fps:{width:1920,height:1080,bitRate:1e6,frameRate:15}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},6900:(e,t,r)=>{"use strict";r.d(t,{H:()=>a,R:()=>n});var n={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016},a={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."}}},6380:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},3430:(e,t,r)=>{"use strict";r.d(t,{S:()=>n});var n={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER"}},710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{VideoSDK:()=>gt,ZujoSDK:()=>_t});var n=r(5861),a=r(5671),i=r(3144),o=r(4942),s=r(7757),c=r.n(s),l=r(1206),u=r.n(l);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var h="function"==typeof Symbol&&Symbol.observable||"@@observable",m=function(){return Math.random().toString(36).substring(7).split("").join(".")},y={INIT:"@@redux/INIT"+m(),REPLACE:"@@redux/REPLACE"+m(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+m()}};function v(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function g(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(f(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(f(1));return r(g)(e,t)}if("function"!=typeof e)throw new Error(f(2));var a=e,i=t,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw new Error(f(3));return i}function d(e){if("function"!=typeof e)throw new Error(f(4));if(c)throw new Error(f(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(f(6));t=!1,l();var r=s.indexOf(e);s.splice(r,1),o=null}}}function p(e){if(!v(e))throw new Error(f(7));if(void 0===e.type)throw new Error(f(8));if(c)throw new Error(f(9));try{c=!0,i=a(i,e)}finally{c=!1}for(var t=o=s,r=0;r<t.length;r++)(0,t[r])();return e}function m(e){if("function"!=typeof e)throw new Error(f(10));a=e,p({type:y.REPLACE})}function _(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(f(11));function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[h]=function(){return this},e}return p({type:y.INIT}),(n={dispatch:p,subscribe:d,getState:u,replaceReducer:m})[h]=_,n}function _(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function b(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(f(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(a)}));return n=_.apply(void 0,i)(r.dispatch),p(p({},r),{},{dispatch:n})}}}function w(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var S=w();S.withExtraArgument=w;const E=S;var P=r(3196),k=r.n(P);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N={},F=r(907),B=r(181);function U(e){return function(e){if(Array.isArray(e))return(0,F.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,B.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H={};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K={},Q=[];const X=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}var i,o=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:y.INIT}))throw new Error(f(12));if(void 0===r(void 0,{type:y.PROBE_UNKNOWN_ACTION()}))throw new Error(f(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,a={},s=0;s<o.length;s++){var c=o[s],l=r[c],u=e[c],d=l(u,t);if(void 0===d)throw t&&t.type,new Error(f(14));a[c]=d,n=n||d!==u}return(n=n||o.length!==Object.keys(e).length)?a:e}}({room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_URL":var r=t.payload.url;return R(R({},e),{},{url:r});case"SET_ROOM_STATE":var n=t.payload.state;return R(R({},e),{},"connected"===n?{state:n}:{state:n,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var a=t.payload.peerId;return R(R({},e),{},{activeSpeakerId:a});case"SET_ROOM_STATS_PEER_ID":var i=t.payload.peerId;return e.statsPeerId===i?R(R({},e),{},{statsPeerId:null}):R(R({},e),{},{statsPeerId:i});case"SET_FACE_DETECTION":var o=t.payload;return R(R({},e),{},{faceDetection:o});case"REMOVE_PEER":var s=t.payload.peerId,c=R({},e);return s&&s===e.activeSpeakerId&&(c.activeSpeakerId=null),s&&s===e.statsPeerId&&(c.statsPeerId=null),c;default:return e}},me:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var r=t.payload.state;return"closed"===r?x(x({},e),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):e;case"SET_ME":var n=t.payload,a=n.peerId,i=n.displayName,o=n.displayNameSet,s=n.device;return x(x({},e),{},{id:a,displayName:i,displayNameSet:o,device:s});case"SET_MEDIA_CAPABILITIES":var c=t.payload,l=c.canSendMic,u=c.canSendWebcam;return x(x({},e),{},{canSendMic:l,canSendWebcam:u});case"SET_CAN_CHANGE_WEBCAM":var d=t.payload;return x(x({},e),{},{canChangeWebcam:d});case"SET_WEBCAM_IN_PROGRESS":var p=t.payload.flag;return x(x({},e),{},{webcamInProgress:p});case"SET_SHARE_IN_PROGRESS":var f=t.payload.flag;return x(x({},e),{},{shareInProgress:f});case"SET_DISPLAY_NAME":var h=t.payload.displayName;return h||(h=e.displayName),x(x({},e),{},{displayName:h,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var m=t.payload.enabled;return x(x({},e),{},{audioOnly:m});case"SET_AUDIO_ONLY_IN_PROGRESS":var y=t.payload.flag;return x(x({},e),{},{audioOnlyInProgress:y});case"SET_AUDIO_MUTED_STATE":var v=t.payload.enabled;return x(x({},e),{},{audioMuted:v});case"SET_RESTART_ICE_IN_PROGRESS":var g=t.payload.flag;return x(x({},e),{},{restartIceInProgress:g});default:return e}},producers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var r=t.payload.state;return"closed"===r?{}:e;case"ADD_PRODUCER":var n=t.payload.producer;return L(L({},e),{},(0,o.Z)({},n.id,n));case"REMOVE_PRODUCER":var a=t.payload.producerId,i=L({},e);return delete i[a],i;case"SET_PRODUCER_PAUSED":var s=t.payload.producerId,c=e[s],l=L(L({},c),{},{paused:!0});return L(L({},e),{},(0,o.Z)({},s,l));case"SET_PRODUCER_RESUMED":var u=t.payload.producerId,d=e[u],p=L(L({},d),{},{paused:!1});return L(L({},e),{},(0,o.Z)({},u,p));case"SET_PRODUCER_TRACK":var f=t.payload,h=f.producerId,m=f.track,y=e[h],v=L(L({},y),{},{track:m});return L(L({},e),{},(0,o.Z)({},h,v));case"SET_PRODUCER_SCORE":var g=t.payload,_=g.producerId,b=g.score,w=e[_];if(!w)return e;var S=L(L({},w),{},{score:b});return L(L({},e),{},(0,o.Z)({},_,S));default:return e}},dataProducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var r=t.payload.state;return"closed"===r?{}:e;case"ADD_DATA_PRODUCER":var n=t.payload.dataProducer;return j(j({},e),{},(0,o.Z)({},n.id,n));case"REMOVE_DATA_PRODUCER":var a=t.payload.dataProducerId,i=j({},e);return delete i[a],i;default:return e}},peers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var r=t.payload.state;return"closed"===r?{}:e;case"ADD_PEER":var n=t.payload.peer;return V(V({},e),{},(0,o.Z)({},n.id,n));case"REMOVE_PEER":var a=t.payload.peerId,i=V({},e);return delete i[a],i;case"SET_PEER_DISPLAY_NAME":var s=t.payload,c=s.displayName,l=s.peerId,u=e[l];if(!u)throw new Error("no Peer found");var d=V(V({},u),{},{displayName:c});return V(V({},e),{},(0,o.Z)({},d.id,d));case"ADD_CONSUMER":var p=t.payload,f=p.consumer,h=p.peerId,m=e[h];if(!m)throw new Error("no Peer found for new Consumer");var y=[].concat(U(m.consumers),[f.id]),v=V(V({},m),{},{consumers:y});return V(V({},e),{},(0,o.Z)({},v.id,v));case"REMOVE_CONSUMER":var g=t.payload,_=g.consumerId,b=g.peerId,w=e[b];if(!w)return e;var S=w.consumers.indexOf(_);if(-1===S)throw new Error("Consumer not found");var E=w.consumers.slice();E.splice(S,1);var P=V(V({},w),{},{consumers:E});return V(V({},e),{},(0,o.Z)({},P.id,P));case"ADD_DATA_CONSUMER":var k=t.payload,T=k.dataConsumer,R=k.peerId;if(!R)return e;var C=e[R];if(!C)throw new Error("no Peer found for new DataConsumer");var O=[].concat(U(C.dataConsumers),[T.id]),x=V(V({},C),{},{dataConsumers:O});return V(V({},e),{},(0,o.Z)({},x.id,x));case"REMOVE_DATA_CONSUMER":var D=t.payload,I=D.dataConsumerId,L=D.peerId;if(!L)return e;var M=e[L];if(!M)return e;var A=M.dataConsumers.indexOf(I);if(-1===A)throw new Error("DataConsumer not found");var j=M.dataConsumers.slice();j.splice(A,1);var N=V(V({},M),{},{dataConsumers:j});return V(V({},e),{},(0,o.Z)({},N.id,N));default:return e}},consumers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var r=t.payload.state;return"closed"===r?{}:e;case"ADD_CONSUMER":var n=t.payload.consumer;return Z(Z({},e),{},(0,o.Z)({},n.id,n));case"REMOVE_CONSUMER":var a=t.payload.consumerId,i=Z({},e);return delete i[a],i;case"SET_CONSUMER_PAUSED":var s,c=t.payload,l=c.consumerId,u=c.originator,d=e[l];return s=Z(Z({},d),{},"local"===u?{locallyPaused:!0}:{remotelyPaused:!0}),Z(Z({},e),{},(0,o.Z)({},l,s));case"SET_CONSUMER_RESUMED":var p,f=t.payload,h=f.consumerId,m=f.originator,y=e[h];return p=Z(Z({},y),{},"local"===m?{locallyPaused:!1}:{remotelyPaused:!1}),Z(Z({},e),{},(0,o.Z)({},h,p));case"SET_CONSUMER_CURRENT_LAYERS":var v=t.payload,g=v.consumerId,_=v.spatialLayer,b=v.temporalLayer,w=e[g],S=Z(Z({},w),{},{currentSpatialLayer:_,currentTemporalLayer:b});return Z(Z({},e),{},(0,o.Z)({},g,S));case"SET_CONSUMER_PREFERRED_LAYERS":var E=t.payload,P=E.consumerId,k=E.spatialLayer,T=E.temporalLayer,R=e[P],C=Z(Z({},R),{},{preferredSpatialLayer:k,preferredTemporalLayer:T});return Z(Z({},e),{},(0,o.Z)({},P,C));case"SET_CONSUMER_PRIORITY":var O=t.payload,x=O.consumerId,D=O.priority,I=e[x],L=Z(Z({},I),{},{priority:D});return Z(Z({},e),{},(0,o.Z)({},x,L));case"SET_CONSUMER_TRACK":var M=t.payload,A=M.consumerId,j=M.track,N=e[A],F=Z(Z({},N),{},{track:j});return Z(Z({},e),{},(0,o.Z)({},A,F));case"SET_CONSUMER_SCORE":var B=t.payload,U=B.consumerId,z=B.score,V=e[U];if(!V)return e;var H=Z(Z({},V),{},{score:z});return Z(Z({},e),{},(0,o.Z)({},U,H));default:return e}},dataConsumers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_STATE":var r=t.payload.state;return"closed"===r?{}:e;case"ADD_DATA_CONSUMER":var n=t.payload.dataConsumer;return $($({},e),{},(0,o.Z)({},n.id,n));case"REMOVE_DATA_CONSUMER":var a=t.payload.dataConsumerId,i=$({},e);return delete i[a],i;default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTIFICATION":var r=t.payload.notification;return[].concat(U(e),[r]);case"REMOVE_NOTIFICATION":var n=t.payload.notificationId;return e.filter((function(e){return e.id!==n}));case"REMOVE_ALL_NOTIFICATIONS":return[];default:return e}}});var J=r(8922);function Y(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function ee(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Y(e,t,"get"))}function te(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Y(e,t,"set"),r),r}var re=r(7187),ne=r(885),ae=(r(8922).default,(0,i.Z)((function e(){(0,a.Z)(this,e),this.roomClient=null}))),ie=new(function(){function e(){(0,a.Z)(this,e),e.instance||(e.instance=new ae)}return(0,i.Z)(e,[{key:"getInstance",value:function(){return e.instance}}]),e}());Object.freeze(ie);var oe=ie.getInstance(),se=function(){function e(t){(0,a.Z)(this,e),this.id=t.id,this.kind=t.track.kind,this.codec=t.codec,this.track=t.track,this.producerOrConsumer=t.instance,t.appData&&!0===t.appData.share&&"video"===t.track.kind&&(this.kind="share"),t.appData&&!0===t.appData.share&&"audio"===t.track.kind&&(this.kind="shareAudio")}return(0,i.Z)(e,[{key:"pause",value:function(){oe.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){oe.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}]),e}();function ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue="stream-enabled",de="stream-disabled",pe="media-status-changed",fe="video-quality-changed",he=function(){function e(t){(0,a.Z)(this,e),this.id=t.id,this.displayName=t.displayName,this.streams=new Map,this.quality="low",this.local=t.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=t.mode,this.eventEmitter=new re.EventEmitter}var t,r,o,s;return(0,i.Z)(e,[{key:"_setPinState",value:function(e){null!=e.cam&&(this.pinState.cam=e.cam),null!=e.share&&(this.pinState.share=e.share)}},{key:"remove",value:function(){oe.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){oe.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){oe.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){oe.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){oe.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(e){this.streams.set(e.id,e),"video"!==e.kind||this.local||oe.roomClient.setConsumerQuality(e.id,this.quality),this.eventEmitter.emit(ue,e)}},{key:"updateStream",value:function(e){this.streams.set(e.id,e),this.eventEmitter.emit(ue,e)}},{key:"deleteStream",value:function(e){var t=this.streams.get(e);if(null!=t)return this.streams.delete(e),this.eventEmitter.emit(de,t),t}},{key:"updateParticipantMediaState",value:function(e,t){"audio"==e?this.micOn=t:"video"==e&&(this.webcamOn=t),this.eventEmitter.emit(pe,{peerId:this.id,kind:e,newStatus:t})}},{key:"videoQualityChanged",value:function(e,t){this.eventEmitter.emit(fe,{peerId:this.id,prevQuality:e,currentQuality:t})}},{key:"setQuality",value:function(e){this.quality===e||this.local||(this.quality=e,U(this.streams.entries()).forEach((function(t){var r=t[1];"video"===r.kind&&oe.roomClient.setConsumerQuality(r.id,e)})))}},{key:"setViewPort",value:function(e,t){U(this.streams.entries()).forEach((function(r){var n=r[1];"video"===n.kind&&oe.roomClient.setViewPort(n.producerOrConsumer,e,t)}))}},{key:"pin",value:function(e){switch(e){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}oe.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(e){switch(e){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}oe.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(s=(0,n.Z)(c().mark((function e(t){var r,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.meetingId,n=t.payload,a=t.token,e.next=3,oe.roomClient.switchPeerRoom({peerId:this.id,roomId:r,payload:n,token:a});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getVideoStats",value:(o=(0,n.Z)(c().mark((function e(){var t,r,n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.local){e.next=6;break}return e.next=3,oe.roomClient.getVideoRemoteStats();case 3:return e.abrupt("return",e.sent);case 6:t=U(this.streams.entries()),r=ce(t),e.prev=8,r.s();case 10:if((n=r.n()).done){e.next=18;break}if(a=(0,ne.Z)(n.value,2),i=a[0],"video"!=a[1].kind){e.next=16;break}return e.next=15,oe.roomClient.getConsumerRemoteStats(i);case 15:return e.abrupt("return",e.sent);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[8,20,23,26]])}))),function(){return o.apply(this,arguments)})},{key:"getShareStats",value:(r=(0,n.Z)(c().mark((function e(){var t,r,n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.local){e.next=6;break}return e.next=3,oe.roomClient.getShareRemoteStats();case 3:return e.abrupt("return",e.sent);case 6:t=U(this.streams.entries()),r=ce(t),e.prev=8,r.s();case 10:if((n=r.n()).done){e.next=18;break}if(a=(0,ne.Z)(n.value,2),i=a[0],"share"!=a[1].kind){e.next=16;break}return e.next=15,oe.roomClient.getConsumerRemoteStats(i);case 15:return e.abrupt("return",e.sent);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[8,20,23,26]])}))),function(){return r.apply(this,arguments)})},{key:"getAudioStats",value:(t=(0,n.Z)(c().mark((function e(){var t,r,n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.micOn){e.next=2;break}return e.abrupt("return",[]);case 2:if(!this.local){e.next=8;break}return e.next=5,oe.roomClient.getAudioRemoteStats();case 5:return e.abrupt("return",e.sent);case 8:t=U(this.streams.entries()),r=ce(t),e.prev=10,r.s();case 12:if((n=r.n()).done){e.next=20;break}if(a=(0,ne.Z)(n.value,2),i=a[0],"audio"!=a[1].kind){e.next=18;break}return e.next=17,oe.roomClient.getConsumerRemoteStats(i);case 17:return e.abrupt("return",e.sent);case 18:e.next=12;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[10,22,25,28]])}))),function(){return t.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){oe.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){oe.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){oe.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){oe.roomClient.stopConsumingMicStreams(this.id)}},{key:"on",value:function(e,t){switch(e){case ue:case de:case pe:case fe:this.eventEmitter.on(e,t);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(e,t){switch(e){case ue:case de:case pe:case fe:this.eventEmitter.off(e,t);break;default:throw new Error("Invalid event type")}}}]),e}(),me=new WeakMap,ye=function(){function e(t,r){var n=t.id,i=t.displayName;(0,a.Z)(this,e),function(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,{writable:!0,value:void 0})}(this,me),this.id=n,this.displayName=i,te(this,me,r)}var t;return(0,i.Z)(e,[{key:"switchTo",value:(t=(0,n.Z)(c().mark((function e(t){var r,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.meetingId,n=t.payload,a=t.token,e.next=3,oe.roomClient.connectionSwitchPeerRoom({roomId:r,connectionRoomId:ee(this,me),payload:n,peerId:this.id,token:a});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),ve="participant-joined",ge="participant-left",_e="chat-message",be=function(){function e(t,r){var n=this;(0,a.Z)(this,e),this.eventEmitter=new re.EventEmitter,this.id=t,this.participants=new Map,r.forEach((function(e){n.participants.set(e.id,new ye(e,n.id))}))}var t;return(0,i.Z)(e,[{key:"participantJoin",value:function(e){var t=new ye(e,this.id);this.participants.set(e.id,t),this.eventEmitter.emit(ve,t)}},{key:"participantLeft",value:function(e){this.participants.delete(e),this.eventEmitter.emit(ge,e)}},{key:"sendChatMessage",value:function(e){oe.roomClient.connectionSendChatMessage({roomId:this.id,message:e})}},{key:"sendChatMessageEvent",value:function(e){var t=e.participantId,r=e.message;this.eventEmitter.emit(_e,{participantId:t,message:r})}},{key:"end",value:(t=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t){switch(e){case ve:case ge:case _e:this.eventEmitter.on(e,t);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(e,t){switch(e){case ve:case ge:case _e:this.eventEmitter.off(e,t);break;default:throw new Error("Invalid event type")}}}]),e}(),we=function(){function e(t){var r=t.roomId,n=t.peers,i=t.payload;(0,a.Z)(this,e),this.id=r,this.payload=i,this.meeting=new be(r,n)}return(0,i.Z)(e,[{key:"close",value:function(){oe.roomClient.closeConnection(this.id)}}]),e}();function Se(e,t){Ee(e,t),t.add(e)}function Ee(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pe(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var ke="error",Te="meeting-joined",Re="meeting-left",Ce="participant-mode-changed",Oe="participant-joined",xe="participant-left",De="speaker-changed",Ie="presenter-changed",Le="main-participant-changed",Me="chat-message",Ae="entry-requested",je="entry-responded",Ne="recording-state-changed",Fe="recording-started",Be="recording-stopped",Ue="livestream-state-changed",ze="livestream-started",Ve="livestream-stopped",He="hls-state-changed",We="hls-started",Ze="hls-stopped",Ge="whiteboard-started",qe="whiteboard-stopped",$e="video-state-changed",Ke="video-seeked",Qe="mic-requested",Xe="webcam-requested",Je="stream-enabled",Ye="stream-disabled",et="pin-state-changed",tt="connection-open",rt="connection-close",nt="switch-meeting",at="meeting-state-changed",it=new WeakMap,ot=new WeakSet,st=new WeakSet,ct=function(){function e(t,r,i){var s,l,u,d,p,f=this;(0,a.Z)(this,e),Se(this,st),Se(this,ot),l={writable:!0,value:void 0},Ee(this,s=it),s.set(this,l),(0,o.Z)(this,"pubSub",{publish:(p=(0,n.Z)(c().mark((function e(t,r,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.roomClient.pubsubPublish(t,r,n);case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return p.apply(this,arguments)}),subscribe:(d=(0,n.Z)(c().mark((function e(t,r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee(f,it).listeners(t).includes(r)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.roomClient.pubsubSubscribe(t);case 4:return n=e.sent,ee(f,it).on(t,r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)}),unsubscribe:(u=(0,n.Z)(c().mark((function e(t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(f,it).off(t,r),0!=ee(f,it).listeners(t).length){e.next=4;break}return e.next=4,f.roomClient.pubsubUnsubscribe(t);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})}),this.id=t,this.roomClient=i,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=r,this.participants=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new re.EventEmitter,te(this,it,new re.EventEmitter),this.eventEmitter.setMaxListeners(9999),ee(this,it).setMaxListeners(9999),this.roomClient.on("ERROR",(function(e){return f.handleError(e)})),this.roomClient.on("ADD_PEER",(function(e){return f.handlePeerAdd(e)})),this.roomClient.on("REMOVE_PEER",(function(e){return f.handlePeerRemove(e)})),this.roomClient.on("ADD_PRODUCER",(function(e){return f.handleProducerAdd(e)})),this.roomClient.on("UPDATE_PRODUCER",(function(e){return f.handleUpdateProducer(e)})),this.roomClient.on("REMOVE_PRODUCER",(function(e){return f.handleProducerRemove(e)})),this.roomClient.on("ADD_CONSUMER",(function(e){return f.handleConsumerAdd(e)})),this.roomClient.on("REMOVE_CONSUMER",(function(e){return f.handleConsumerRemove(e)})),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",(function(e){return f.handleParticipantMediaStateChanged(e)})),this.roomClient.on("CHAT_MESSAGE",(function(e){return f.handleNewChatMessage(e)})),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",(function(e){return f.handleSpeakerChange(e)})),this.roomClient.on("ENTRY_REQUESTED",(function(e){return f.handleEntryRequested(e)})),this.roomClient.on("ENTRY_RESPONDED",(function(e){return f.handleEntryResponded(e)})),this.roomClient.on("MEETING_JOINED",(function(e){return f.handleMeetingJoined(e)})),this.roomClient.on("MEETING_LEFT",(function(e){return f.handleMeetingLeft(e)})),this.roomClient.on("RECORDING_STATE_CHANGED",(function(e){f.handleRecordingStateChanged(e)})),this.roomClient.on("RECORDING_STARTED",(function(e){return f.handleRecordingStarted(e)})),this.roomClient.on("RECORDING_STOPPED",(function(e){return f.handleRecordingStopped(e)})),this.roomClient.on("LIVESTREAM_STATE_CHANGED",(function(e){f.handleLivestreamStateChanged(e)})),this.roomClient.on("LIVESTREAM_STARTED",(function(e){return f.handleLivestreamStarted(e)})),this.roomClient.on("LIVESTREAM_STOPPED",(function(e){return f.handleLivestreamStopped(e)})),this.roomClient.on("HLS_STATE_CHANGED",(function(e){f.handleHlsStateChanged(e)})),this.roomClient.on("HLS_STARTED",(function(e){f.handleHlsStarted(e)})),this.roomClient.on("HLS_STOPPED",(function(e){f.handleHlsStopped(e)})),this.roomClient.on("WHITEBOARD_STARTED",(function(e){return f.handleWhiteboardStarted(e)})),this.roomClient.on("WHITEBOARD_STOPPED",(function(e){return f.handleWhiteboardStopped(e)})),this.roomClient.on("VIDEO_STATE_CHANGED",(function(e){return f.handleVideoStateChanged(e)})),this.roomClient.on("VIDEO_SEEKED",(function(e){return f.handleVideoSeeked(e)})),this.roomClient.on("PIN_STATE_CHANGED",(function(e){f.handlePinStateChanged(e)})),this.roomClient.on("MIC_REQUESTED",(function(e){return f.handleMicRequested(e)})),this.roomClient.on("WEBCAM_REQUESTED",(function(e){return f.handleWebcamRequested(e)})),this.roomClient.on("CONNECTION_OPEN",(function(e){return f.handleConnectionOpen(e)})),this.roomClient.on("CONNECTION_CLOSE",(function(e){return f.handleConnectionClose(e)})),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",(function(e){return f.handleConnectionParticipantJoin(e)})),this.roomClient.on("SWITCH_ROOM",(function(e){return f.handleSwitchMeeting(e)})),this.roomClient.on("CONNECTION_CHAT_MESSAGE",(function(e){return f.handleConnectionChatMessage(e)})),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",(function(e){f.handleConnectionParticipantLeft(e)})),this.roomClient.on("PUBSUB_MESSAGE",(function(e){return Pe(f,ot,lt).call(f,e)})),this.roomClient.on("PEER_MODE_CHANGED",(function(e){return Pe(f,st,ut).call(f,e)})),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",(function(e){return f.handleMeetingStateChanged(e)})),this.roomClient.on("VIDEO_QUALITY_CHANGED",(function(e){return f.handleVideoQualityChanged(e)}))}var t,r,s,l,u,d,p,f;return(0,i.Z)(e,[{key:"handleError",value:function(e){this.eventEmitter.emit(ke,e)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(e){this.roomClient.changeMode(e)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(e,t){this.roomClient.respondEntry(e,t)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.roomClient.enableMic(e)}},{key:"publishAudio",value:(f=(0,n.Z)(c().mark((function e(){var t,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:void 0,e.next=3,this.roomClient.enableMic(t);case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"unpublishAudio",value:(p=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.roomClient.disableMic();case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.roomClient.enableWebcam(e)}},{key:"publishVideo",value:(d=(0,n.Z)(c().mark((function e(){var t,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:void 0,this.roomClient.enableWebcam(t),e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"unpublishVideo",value:(u=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.roomClient.disableWebcam(),e.abrupt("return");case 2:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.roomClient.enableShare(e)}},{key:"pubblishScreenShare",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.roomClient.enableShare(e)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(e){this.roomClient.sendChatMessage(e);var t={text:e,timestamp:(new Date).getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(t)}},{key:"startRecording",value:function(e,t,r){this.roomClient.startRecording(e,t,r)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startLivestream",value:function(e,t){this.roomClient.startLivestream(e,t)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(l=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.roomClient.startHls(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"getMics",value:(s=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.roomClient.getMics();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getWebcams",value:(r=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.roomClient.getWebcams();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"changeMic",value:function(e){this.roomClient.changeMic(e)}},{key:"changeWebcam",value:function(e){this.roomClient.changeWebcam(e)}},{key:"replaceWebcamStream",value:function(e){this.roomClient.replaceWebcamStream(e)}},{key:"setWebcamQuality",value:function(e){this.roomClient.setWebcamQuality(e)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(e){var t=e.link;this.roomClient.startVideo({link:t})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(e){var t=e.currentTime;this.roomClient.pauseVideo(t)}},{key:"seekVideo",value:function(e){var t=e.currentTime;this.roomClient.seekVideo(t)}},{key:"handlePeerAdd",value:function(e){var t=e.peer,r=new he(t);this.participants.set(r.id,r),this.eventEmitter.emit(Oe,r),1===this.participants.size&&this.updateMainParticipant(r.id)}},{key:"handlePeerRemove",value:function(e){var t=e.peerId,r=this.participants.get(t);null!=r&&(this.participants.delete(t),this.eventEmitter.emit(xe,r),this.activePresenterId===r.id&&(this.activePresenterId=null,this.eventEmitter.emit(Ie,this.activePresenterId)),this.mainParticipantId===r.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(e){var t=e.producer,r=new se(t);this.localParticipant.addStream(r),"share"===r.kind&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(Ie,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(e){var t=e.producer,r=new se(t);this.localParticipant.updateStream(r)}},{key:"handleProducerRemove",value:function(e){var t=e.producerId,r=this.localParticipant.deleteStream(t);if(r&&"share"===r.kind){this.activePresenterId=null,this.eventEmitter.emit(Ie,this.activePresenterId);var n=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||n||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(e){var t=e.consumer,r=e.peerId,n=this.participants.get(r);if(n){var a=new se(t);n.addStream(a),this.eventEmitter.emit(Je,a),"share"===a.kind&&(this.activePresenterId=n.id,this.eventEmitter.emit(Ie,this.activePresenterId),this.updateMainParticipant(n.id))}}},{key:"handleConsumerRemove",value:function(e){var t=e.consumerId,r=e.peerId,n=this.participants.get(r);if(null!=n&&n){var a=n.deleteStream(t);if(this.eventEmitter.emit(Ye,a),a&&"share"===a.kind){this.activePresenterId=null,this.eventEmitter.emit(Ie,this.activePresenterId);var i=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||i||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(e){var t=e.peerId,r=e.kind,n=e.newState,a=this.participants.get(t);a&&a&&("audio"==r?a.micOn=n:"video"==r&&(a.webcamOn=n),a.updateParticipantMediaState(r,n))}},{key:"handleSpeakerChange",value:function(e){var t=e.peerId;this.activeSpeakerId!==t&&(this.activeSpeakerId=t,this.eventEmitter.emit(De,t),t&&t!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&t!==this.mainParticipantId&&this.updateMainParticipant(t))}},{key:"handleNewChatMessage",value:function(e){var t=e.senderId,r={senderId:t,text:e.text,timestamp:e.timestamp};if(this.localParticipant.id===t)r.senderName=this.localParticipant.displayName;else{var n=this.participants.get(t);n&&(r.senderName=n.displayName)}this.messages.push(r),this.eventEmitter.emit(Me,r)}},{key:"updateMainParticipant",value:function(e){var t;this.mainParticipantId=e,t=e===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Le,t)}},{key:"handleEntryRequested",value:function(e){var t=this,r=e.id,n=e.name;this.eventEmitter.emit(Ae,{participantId:r,name:n,allow:function(){t.roomClient.respondEntry(r,"allowed")},deny:function(){t.roomClient.respondEntry(r,"denied")}})}},{key:"handleEntryResponded",value:function(e){var t=e.id,r=e.decision;this.eventEmitter.emit(je,t,r)}},{key:"handleMeetingJoined",value:function(e){var t=e.peers,r=e.poll,n=e.messages,a=e.baseUrl;this.baseUrl=a,n.length>0&&(this.messages=n),this.eventEmitter.emit(Te,{peers:t,poll:r,messages:n})}},{key:"handleMeetingLeft",value:function(e){this.eventEmitter.emit(Re,e)}},{key:"handleRecordingStateChanged",value:function(e){this.recordingState=e.status,this.eventEmitter.emit(Ne,e)}},{key:"handleLivestreamStateChanged",value:function(e){this.livestreamState=e.status,this.eventEmitter.emit(Ue,e)}},{key:"handleHlsStateChanged",value:function(e){this.hlsState=e.status,"HLS_PLAYABLE"==e.status?this.hlsUrls={downstreamUrl:e.downstreamUrl,playbackHlsUrl:e.playbackHlsUrl,livestreamUrl:e.livestreamUrl}:"HLS_STOPPED"==e.status&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(He,e)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Fe)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Be)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(ze)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(Ve)}},{key:"handleHlsStarted",value:function(e){this.eventEmitter.emit(We,e)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Ze)}},{key:"handleWhiteboardStarted",value:function(e){var t=e.state;this.eventEmitter.emit(Ge,t)}},{key:"handleWhiteboardStopped",value:function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),this.eventEmitter.emit(qe)}},{key:"handleVideoStateChanged",value:function(e){this.eventEmitter.emit($e,e)}},{key:"handleVideoSeeked",value:function(e){var t=e.currentTime;this.eventEmitter.emit(Ke,{currentTime:t})}},{key:"handlePinStateChanged",value:function(e){var t=e.peerId,r=e.state,n=e.pinnedBy;this.eventEmitter.emit(et,{participantId:t,state:r,pinnedBy:n})}},{key:"handleMeetingStateChanged",value:function(e){var t=e.state;this.eventEmitter.emit(at,{state:t})}},{key:"handleVideoQualityChanged",value:function(e){var t=e.peerId,r=e.prevQuality,n=e.currentQuality,a=this.participants.get(t);a&&a&&a.videoQualityChanged(r,n)}},{key:"handleMicRequested",value:function(e){var t=this,r=e.peerId;this.eventEmitter.emit(Qe,{participantId:r,accept:function(){return t.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(e){var t=this,r=e.peerId;this.eventEmitter.emit(Xe,{participantId:r,accept:function(){return t.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(e){var t=e.roomId,r=e.peer,n=this.connections.get(t);null!=n&&n.meeting.participantJoin(r)}},{key:"handleConnectionParticipantLeft",value:function(e){var t=e.roomId,r=e.peerId,n=this.connections.get(t);null!=n&&n.meeting.participantLeft(r)}},{key:"handleConnectionOpen",value:function(e){var t=e.peers,r=e.roomId,n=e.payload,a=new we({roomId:r,peers:t,payload:n});this.connections.set(a.id,a),this.eventEmitter.emit(tt,a)}},{key:"handleConnectionClose",value:function(e){var t=e.roomId;null!=this.connections.get(t)&&(this.connections.delete(t),this.eventEmitter.emit(rt,t))}},{key:"handleSwitchMeeting",value:function(e){var t=e.roomId,r=e.token,n=e.payload,a=e.peerId,i=e.connectionPeerId,o=e.connectionRoomId,s=a?{meetingId:t,payload:n,token:r,participantId:a}:{meetingId:t,payload:n,token:r,connectionParticipantId:i,connectionMeetingId:o};this.eventEmitter.emit(nt,s)}},{key:"handleConnectionChatMessage",value:function(e){var t=e.roomId,r=e.peerId,n=e.message,a=this.connections.get(t);null!=a&&a.meeting.sendChatMessageEvent({participantId:r,message:n})}},{key:"connectTo",value:(t=(0,n.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.meetingId,n=t.payload,e.next=3,this.roomClient.openConnection({roomId:r,payload:n});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"on",value:function(e,t){switch(e){case Oe:case xe:case De:case Ie:case Le:case Me:case Ae:case je:case Ne:case Fe:case Be:case Ue:case ze:case Ve:case We:case Ze:case He:case Je:case Ye:case Ge:case qe:case Te:case Re:case $e:case Ke:case Qe:case Xe:case et:case tt:case rt:case nt:case at:case Ce:case ke:this.eventEmitter.on(e,t);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(e,t){switch(e){case Oe:case xe:case De:case Ie:case Le:case Me:case Ae:case je:case Ne:case Fe:case Be:case Ue:case ze:case Ve:case He:case We:case Ze:case Je:case Ye:case Ge:case qe:case Te:case Re:case $e:case Ke:case Qe:case Xe:case et:case tt:case rt:case nt:case at:case ke:case Ce:this.eventEmitter.off(e,t);break;default:throw new Error("Invalid event type")}}}]),e}();function lt(e){var t=e.topic,r=e.message,n=e.senderId,a=e.timestamp,i=e.senderName,o=e.id;t&&r&&ee(this,it).emit(t,{message:r,senderId:n,timestamp:a,topic:t,senderName:i,id:o})}function ut(e){var t=e.peerId,r=e.mode;t===this.localParticipant.id?this.localParticipant.mode=r:this.participants.get(t).mode=r,this.eventEmitter.emit(Ce,{participantId:t,mode:r})}var dt=r(6900),pt=r(6380),ft=r(3430),ht=r(8962),mt=function(){var e=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(r,n){t.call(navigator,e,r,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getDisplayMedia&&(navigator.mediaDevices.getDisplayMedia=function(e){var t=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return t?new Promise((function(r,n){t.call(navigator,e,r,n)})):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),e.next=4,navigator.mediaDevices.getDisplayMedia(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=[E],gt=function(){function e(){(0,a.Z)(this,e)}var t,r,o;return(0,i.Z)(e,null,[{key:"config",value:function(e){if(!e)throw new Error("'token' is empty, please provide it in config");this.apiKey=e;var t=g(X,void 0,b.apply(void 0,vt));window.STORE=t,J.default.init({store:t})}},{key:"analytics",value:function(e){var t,r,n,a;!e&&navigator&&navigator.userAgent&&(n=navigator.userAgent,delete(a=u().parse(n)).engine);try{var i;null!==(i=e)&&void 0!==i&&i.browserUserAgent||(n=navigator.userAgent,delete(a=u().parse(n)).engine)}catch(e){}e&&e.rawUserAgent&&(n=e.rawUserAgent,delete(a=u().parse(n)).engine),e||(e={});var o={};o.sdkType=e.sdkType||"javascript",o.sdkVersion=e.sdkVersion||"0.0.63",o.platform=e.platform||(null===(t=a)||void 0===t||null===(r=t.platform)||void 0===r?void 0:r.type)||"","null"==e.browserUserAgent?o.browserUserAgent=void 0:o.browserUserAgent=a,e.deviceUserAgent&&(o.deviceUserAgent=e.deviceUserAgent),this._deviceInfo=o}},{key:"initMeeting",value:function(e){var t,r=e.meetingId,n=e.customCameraVideoTrack,a=void 0===n?void 0:n,i=e.customMicrophoneAudioTrack,o=void 0===i?void 0:i,s=e.autoConsume,c=void 0===s||s,l=e.preferredProtocol,u=e.mode,d=e.multiStream,p=void 0===d||d,f=e.participantId,h=e.name,m=e.micEnabled,y=e.webcamEnabled,v=e.maxResolution,g=e.chatEnabled,_=e.useSpartialLayerAnalytics;if(!r)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var b=f||k()({length:8}).toLowerCase(),w=h||k()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),"string"!=typeof l&&(l="UDP_ONLY"),null===(t=l)||void 0===t?void 0:t.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":l=l.toUpperCase();break;default:l="UDP_ONLY"}if(u||(u=ft.S.CONFERENCE),u!==ft.S.CONFERENCE&&u!==ft.S.VIEWER)throw new Error('"mode" can only be either '.concat(ft.S.CONFERENCE," or ").concat(ft.S.VIEWER));var S=new J.default({roomId:r,peerId:b,secret:this.apiKey,device:"unknown",displayName:w,mode:u,useSimulcast:p,produce:!0,consume:!0,useSharingSimulcast:!0,datachannel:!1!==g,micEnabled:!1!==m,webcamEnabled:!1!==y,maxResolution:v||"hd",useSpartialLayerAnalytics:_,_deviceInfo:this._deviceInfo,customCameraVideoTrack:a,customMicrophoneAudioTrack:o,autoConsume:c,preferredProtocol:l});oe.roomClient=S;var E=new he({id:b,displayName:w,local:!0,mode:u});return new ct(r,E,S)}},{key:"createCameraVideoTrack",value:(o=(0,n.Z)(c().mark((function e(t){var r,n,a,i,o,s,l,u,d,p,f,h,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cameraId,n=void 0===r?void 0:r,a=t.encoderConfig,i=void 0===a?void 0:a,o=t.facingMode,s=void 0===o?void 0:o,l=t.optimizationMode,u=void 0===l?void 0:l,d=t.multiStream,p=void 0===d||d,f=i?ht.v.videoProfiles[i]:ht.v.videoProfiles.h360p_w640p,h={video:{deviceId:n||void 0,facingMode:s||void 0,width:f.width,height:f.height,frameRate:f.frameRate}},e.next=5,mt(h);case 5:return m=e.sent,u&&(m.contentHint=u),m.encoderConfig=i||"h360p_w640p",m.contentHint=u||"",m.multiStream=p,e.abrupt("return",m);case 11:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(r=(0,n.Z)(c().mark((function e(t){var r,n,a,i,o,s,l,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.encoderConfig,n=void 0===r?void 0:r,a=t.optimizationMode,i=void 0===a?void 0:a,o=t.withAudio,s=void 0===o?"enable":o,l=n?ht.v.screenShareProfiles[n]:ht.v.screenShareProfiles.h720p_15fps,u={audio:"enable"===s,video:{width:l.width,height:l.height,frameRate:l.frameRate}},e.next=5,yt(u);case 5:return d=e.sent,i&&(d.contentHint=i),e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(t=(0,n.Z)(c().mark((function e(t){var r,n,a,i,o,s,l,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.noiseConfig,n=void 0===r?void 0:r,a=t.encoderConfig,i=void 0===a?void 0:a,o=t.microphoneId,s=void 0===o?void 0:o,l=i?ht.v.audioProfiles[i]:ht.v.audioProfiles.speech_standard,u={audio:{deviceId:s,sampleRate:l.sampleRate,echoCancellation:n?n&&n.acousticEchoCancellation:l.echoCancellation,autoGainControl:n?n&&n.autoGainControl:l.autoGainControl,noiseSuppression:n?n&&n.noiseSuppression:l.noiseSuppression,channelCount:l.channelCount}},e.next=5,mt(u);case 5:return(d=e.sent).encoderConfig=i||"speech_standard",e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();(0,o.Z)(gt,"Constants",{errors:dt.R,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},hlsEvents:pt.o,modes:ft.S});var _t=gt},8922:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.r(t),r.d(t,{default:()=>qa});var a=r(5861),i=r(5671),o=r(3144),s=r(4942),c=r(7757),l=r.n(c),u=r(9293),d=r(960),p=r(1227),f=r.n(p),h="mediasoup-demo",m=function(){function e(t){(0,i.Z)(this,e),t?(this._debug=f()("".concat(h,":").concat(t)),this._warn=f()("".concat(h,":WARN:").concat(t)),this._error=f()("".concat(h,":ERROR:").concat(t))):(this._debug=f()(h),this._warn=f()("".concat(h,":WARN")),this._error=f()("".concat(h,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,o.Z)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}(),y=r(1354),v=y.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),g=y.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function _(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o,s,c,u,d,p,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.secret,a="call-api.videosdk.live",i=[],o=null,s={},c={},u={},e.next=9,fetch("https://api.videosdk.live/infra/v1/meetings/init-config",{method:"POST",headers:{Authorization:n,"Content-Type":"application/json"},body:JSON.stringify({roomId:r})}).then((function(e){return e.json()})).catch((function(e){return{}}));case 9:return d=e.sent,(p=d.data)&&(a=p.baseUrl,f=p.observability,i=w(p.iceServers),o=f.jwt,s=f.traces,c=f.logs,u=f.metaData),e.abrupt("return",{baseUrl:a,iceServers:i,observabilityJwt:o,traces:s,logs:c,metaData:u});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){try{var t=y.AES.decrypt(e,v,{iv:g,mode:y.mode.CBC,padding:y.pad.ZeroPadding}).toString(y.enc.Utf8);return JSON.parse(t)}catch(e){return[]}}var S=r(6808),E=r.n(S);function P(e){var t=e.displayName;E().set("mediasoup-demo.user",{displayName:t})}function k(){return E().getJSON("mediasoup-demo.devices")}var T=r(3196),R=r.n(T),C=function(e){return{type:"SET_ROOM_STATE",payload:{state:e}}},O=function(e){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:e}}},x=function(e){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:e}}},D=function(e){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:e.canSendMic,canSendWebcam:e.canSendWebcam}}},I=function(e){return{type:"SET_CAN_CHANGE_WEBCAM",payload:e}},L=function(e){return{type:"SET_DISPLAY_NAME",payload:{displayName:e}}},M=function(e){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:e}}},A=function(e){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:e}}},j=function(e){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:e}}},N=function(e){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:e}}},F=function(e){return{type:"ADD_PRODUCER",payload:{producer:e}}},B=function(e){return{type:"REMOVE_PRODUCER",payload:{producerId:e}}},U=function(e,t){return{type:"SET_PRODUCER_TRACK",payload:{producerId:e,track:t}}},z=function(e,t){return{type:"SET_PRODUCER_SCORE",payload:{producerId:e,score:t}}},V=function(e){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:e}}},H=function(e){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:e}}},W=function(e){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:e}}},Z=function(e){return{type:"ADD_PEER",payload:{peer:e}}},G=function(e){return{type:"REMOVE_PEER",payload:{peerId:e}}},q=function(e,t){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:e,peerId:t}}},$=function(e,t){return{type:"ADD_CONSUMER",payload:{consumer:e,peerId:t}}},K=function(e,t){return{type:"REMOVE_CONSUMER",payload:{consumerId:e,peerId:t}}},Q=function(e,t){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:e,originator:t}}},X=function(e,t){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:e,originator:t}}},J=function(e,t,r){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:e,spatialLayer:t,temporalLayer:r}}},Y=function(e,t,r){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:e,spatialLayer:t,temporalLayer:r}}},ee=function(e,t){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:e,priority:t}}},te=function(e,t){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:e,score:t}}},re=function(e,t){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:e,peerId:t}}},ne=function(e,t){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:e,peerId:t}}},ae=function(e){var t=e.type,r=void 0===t?"info":t,n=e.text,a=e.title,i=e.timeout;if(!i)switch(r){case"info":i=3e3;break;case"error":i=5e3}var o={id:R()({length:6}).toLowerCase(),type:r,title:a,text:n,timeout:i};return function(e){e(function(e){return{type:"ADD_NOTIFICATION",payload:{notification:e}}}(o)),setTimeout((function(){e({type:"REMOVE_NOTIFICATION",payload:{notificationId:o.id}})}),i)}},ie=r(7187),oe=r(885),se=r(8962),ce={},le={},ue={};for(var de in se.v.videoProfiles)"oneSixNine"==se.v.videoProfiles[de].aspectRatio&&(ce[de]=se.v.videoProfiles[de],ce[de].encoding={maxBitrate:ce[de].bitRate,maxFramerate:ce[de].frameRate}),"fourThree"==se.v.videoProfiles[de].aspectRatio&&(le[de]=se.v.videoProfiles[de],le[de].encoding={maxBitrate:le[de].bitRate,maxFramerate:le[de].frameRate});for(var de in se.v.screenShareProfiles)ue[de]=se.v.screenShareProfiles[de],ue[de].encoding={maxBitrate:ue[de].bitRate,maxFramerate:ue[de].frameRate};var pe=Object.values(ce),fe=Object.values(le),he=Object.values(ue),me=[ce.h180p_w320p,ce.h360p_w640p],ye=[le.h180p_w240p,le.h360p_w480p],ve=["q","h","f"];function ge(e,t,r,n){var a=n&&n.videoEncoding;e&&(a=n&&n.screenShareEncoding);var i=null==n?void 0:n.simulcast;if(a||(a=function(e,t,r){for(var n=function(e,t,r){if(e)return he;var n=t>r?t/r:r/t;return Math.abs(n-16/9)<Math.abs(n-4/3)?pe:fe}(e,t,r),a=n[0].encoding,i=Math.max(t,r),o=0;o<n.length;o+=1){var s=n[o];if(a=s.encoding,s.width>=i)break}return a}(e,t,r)),!i)return[a];var o,s,c={width:t,height:r,encoding:{maxBitrate:a.maxBitrate,maxFramerate:a.maxFramerate}},l=(s=function(e,t){e&&(r=t,[{scaleResolutionDownBy:2,fps:3}].map((function(e){var t;return{width:Math.floor(r.width/e.scaleResolutionDownBy),height:Math.floor(r.height/e.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(r.encoding.maxBitrate/(Math.pow(e.scaleResolutionDownBy,2)*((null!==(t=r.encoding.maxFramerate)&&void 0!==t?t:30)/e.fps)))),maxFramerate:e.fps}}})));var r,n=t.width,a=t.height,i=n>a?n/a:a/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?me:ye}(e,c))[0];if(s.length>1){var u=s;o=(0,oe.Z)(u,2)[1]}var d=Math.max(t,r);return function(e,t,r){var n=[];return r.forEach((function(r,a){if(!(a>=ve.length)){var i=Math.min(e,t),o={rid:ve[a],scaleResolutionDownBy:i/Math.min(r.width,r.height),maxBitrate:r.encoding.maxBitrate,maxFramerate:r.encoding.maxFramerate};n.push(o)}})),n}(t,r,d>=960&&o?[l,o,c]:d>=480?[l,c]:[c])}function _e(e,t,r){if(!e)return{};var n=e.id,a=(e.preferredSpatialLayer,e.preferredTemporalLayer,e.appData),i=a.width,o=a.height,s=a.encodings;try{var c=function(e){var t=[];if(e&&0!=e.length){if(1===e.length){for(var r=0;r<3;r++)t.push(Math.pow(2,3-r-1));return t}var n=!1;return e.forEach((function(e){void 0!==e.scaleResolutionDownBy?(n=!0,t.push(Math.max(1,e.scaleResolutionDownBy))):t.push(1)})),n||e.forEach((function(r,n){t[n]=Math.pow(2,e.length-n-1)})),t}}(s);if(!c)return{};for(var l=Math.min(Math.max(se.v.adaptiveScalingFactor||.75,.5),1),u=0,d=0;d<c.length;d++){var p=l*i/c[d],f=l*o/c[d];if(!(t>=p&&r>=f))break;u=d}var h=(e.temporalLayers?e.temporalLayers:3)-1;if(0===u&&h>0){var m=i/c[0],y=o/c[0];t<.5*m&&r<.5*y&&(h-=1),h>0&&t<.25*m&&r<.25*y&&(h-=1)}return{consumerId:n,newPreferredSpatialLayer:u,newPreferredTemporalLayer:h}}catch(e){return{}}}var be=r(6900),we=r(710),Se=r(4180),Ee=r(3430),Pe=r(6380),ke="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},Te="1.4.1",Re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,Ce=function(e){var t=new Set([e]),r=new Set,n=e.match(Re);if(!n)return function(){return!1};var a=+n[1],i=+n[2],o=+n[3];if(null!=n[4])return function(t){return t===e};function s(e){return r.add(e),!1}function c(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(Re);if(!n)return s(e);var l=+n[1],u=+n[2],d=+n[3];return null!=n[4]||a!==l?s(e):0===a?i===u&&o<=d?c(e):s(e):i<=u?c(e):s(e)}}(Te),Oe=Te.split(".")[0],xe=Symbol.for("opentelemetry.js.api."+Oe),De=ke;function Ie(e,t,r,n){var a;void 0===n&&(n=!1);var i=De[xe]=null!==(a=De[xe])&&void 0!==a?a:{version:Te};if(!n&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}return i.version!==Te?(o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Te),r.error(o.stack||o.message),!1):(i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v1.4.1."),!0)}function Le(e){var t,r,n=null===(t=De[xe])||void 0===t?void 0:t.version;if(n&&Ce(n))return null===(r=De[xe])||void 0===r?void 0:r[e]}function Me(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v1.4.1.");var r=De[xe];r&&delete r[e]}var Ae,je=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne("verbose",this._namespace,e)},e}();function Ne(e,t,r){var n=Le("diag");if(n)return r.unshift(t),n[e].apply(n,function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(r),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(Ae||(Ae={}));var Fe=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},Be=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},Ue=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=Le("diag");if(n)return n[e].apply(n,Be([],Fe(t),!1))}}var t=this;t.setLogger=function(e,r){var n,a,i;if(void 0===r&&(r={logLevel:Ae.INFO}),e===t){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=o.stack)&&void 0!==n?n:o.message),!1}"number"==typeof r&&(r={logLevel:r});var s=Le("diag"),c=function(e,t){function r(r,n){var a=t[r];return"function"==typeof a&&e>=n?a.bind(t):function(){}}return e<Ae.NONE?e=Ae.NONE:e>Ae.ALL&&(e=Ae.ALL),t=t||{},{error:r("error",Ae.ERROR),warn:r("warn",Ae.WARN),info:r("info",Ae.INFO),debug:r("debug",Ae.DEBUG),verbose:r("verbose",Ae.VERBOSE)}}(null!==(a=r.logLevel)&&void 0!==a?a:Ae.INFO,e);if(s&&!r.suppressOverrideMessage){var l=null!==(i=(new Error).stack)&&void 0!==i?i:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+l),c.warn("Current logger will overwrite one already registered from "+l)}return Ie("diag",c,t,!0)},t.disable=function(){Me("diag",t)},t.createComponentLogger=function(e){return new je(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),ze=Ue.instance();function Ve(e){return Symbol.for(e)}var He,We=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var a=new e(r._currentContext);return a._currentContext.set(t,n),a},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},Ze=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},Ge=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},qe=function(){function e(){}return e.prototype.active=function(){return We},e.prototype.with=function(e,t,r){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];return t.call.apply(t,Ge([r],Ze(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),$e=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},Ke=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},Qe="context",Xe=new qe,Je=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return Ie(Qe,e,Ue.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,Ke([e,t,r],$e(a),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return Le(Qe)||Xe},e.prototype.disable=function(){this._getContextManager().disable(),Me(Qe,Ue.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(He||(He={}));var Ye="0000000000000000",et="00000000000000000000000000000000",tt={traceId:et,spanId:Ye,traceFlags:He.NONE},rt=function(){function e(e){void 0===e&&(e=tt),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),nt=Ve("OpenTelemetry Context Key SPAN");function at(e){return e.getValue(nt)||void 0}function it(){return at(Je.getInstance().active())}function ot(e,t){return e.setValue(nt,t)}function st(e){return e.deleteValue(nt)}function ct(e,t){return ot(e,new rt(t))}function lt(e){var t;return null===(t=at(e))||void 0===t?void 0:t.spanContext()}var ut=/^([0-9a-f]{32})$/i,dt=/^[0-9a-f]{16}$/i;function pt(e){return ut.test(e)&&e!==et}function ft(e){return pt(e.traceId)&&(t=e.spanId,dt.test(t)&&t!==Ye);var t}function ht(e){return new rt(e)}var mt=Je.getInstance(),yt=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=mt.active()),Boolean(null==t?void 0:t.root))return new rt;var n,a=r&&lt(r);return"object"==typeof(n=a)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&ft(a)?new rt(a):new rt},e.prototype.startActiveSpan=function(e,t,r,n){var a,i,o;if(!(arguments.length<2)){2===arguments.length?o=t:3===arguments.length?(a=t,o=r):(a=t,i=r,o=n);var s=null!=i?i:mt.active(),c=this.startSpan(e,a,s),l=ot(s,c);return mt.with(l,o,void 0,c)}},e}(),vt=new yt,gt=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):vt},e}(),_t=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new yt},e}()),bt=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new gt(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:_t},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}(),wt="trace",St=function(){function e(){this._proxyTracerProvider=new bt,this.wrapSpanContext=ht,this.isSpanContextValid=ft,this.deleteSpan=st,this.getSpan=at,this.getActiveSpan=it,this.getSpanContext=lt,this.setSpan=ot,this.setSpanContext=ct}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=Ie(wt,this._proxyTracerProvider,Ue.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return Le(wt)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){Me(wt,Ue.instance()),this._proxyTracerProvider=new bt},e}().getInstance(),Et=Je.getInstance(),Pt=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),kt={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},Tt={set:function(e,t,r){null!=e&&(e[t]=r)}},Rt=Ve("OpenTelemetry Baggage Key");function Ct(e){return e.getValue(Rt)||void 0}function Ot(){return Ct(Je.getInstance().active())}function xt(e,t){return e.setValue(Rt,t)}function Dt(e){return e.deleteValue(Rt)}var It=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=new e(this._entries);try{for(var o=It(n),s=o.next();!s.done;s=o.next()){var c=s.value;i._entries.delete(c)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),Mt=Symbol("BaggageEntryMetadata"),At=Ue.instance();function jt(e){return void 0===e&&(e={}),new Lt(new Map(Object.entries(e)))}var Nt,Ft,Bt,Ut="propagation",zt=new Pt,Vt=function(){function e(){this.createBaggage=jt,this.getBaggage=Ct,this.getActiveBaggage=Ot,this.setBaggage=xt,this.deleteBaggage=Dt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return Ie(Ut,e,Ue.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=Tt),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=kt),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Me(Ut,Ue.instance())},e.prototype._getGlobalPropagator=function(){return Le(Ut)||zt},e}().getInstance(),Ht=Function.prototype.toString,Wt=Ht.call(Object),Zt=(Nt=Object.getPrototypeOf,Ft=Object,function(e){return Nt(Ft(e))}),Gt=Object.prototype,qt=Gt.hasOwnProperty,$t=Symbol?Symbol.toStringTag:void 0,Kt=Gt.toString;function Qt(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$t&&$t in Object(e)?function(e){var t=qt.call(e,$t),r=e[$t],n=!1;try{e[$t]=void 0,n=!0}catch(e){}var a=Kt.call(e);return n&&(t?e[$t]=r:delete e[$t]),a}(e):function(e){return Kt.call(e)}(e)}(e))return!1;var t=Zt(e);if(null===t)return!0;var r=qt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ht.call(r)===Wt}function Xt(e){return er(e)?e.slice():e}function Jt(e,t,r,n){var a;if(void 0===r&&(r=0),!(r>20)){if(r++,nr(e)||nr(t)||tr(t))a=Xt(t);else if(er(e)){if(a=e.slice(),er(t))for(var i=0,o=t.length;i<o;i++)a.push(Xt(t[i]));else if(rr(t))for(i=0,o=(s=Object.keys(t)).length;i<o;i++)a[c=s[i]]=Xt(t[c])}else if(rr(e))if(rr(t)){if(!function(e,t){return!(!Qt(e)||!Qt(t))}(e,t))return t;var s;for(a=Object.assign({},e),i=0,o=(s=Object.keys(t)).length;i<o;i++){var c,l=t[c=s[i]];if(nr(l))void 0===l?delete a[c]:a[c]=l;else{var u=a[c],d=l;if(Yt(e,c,n)||Yt(t,c,n))delete a[c];else{if(rr(u)&&rr(d)){var p=n.get(u)||[],f=n.get(d)||[];p.push({obj:e,key:c}),f.push({obj:t,key:c}),n.set(u,p),n.set(d,f)}a[c]=Jt(a[c],l,r,n)}}}}else a=t;return a}}function Yt(e,t,r){for(var n=r.get(e[t])||[],a=0,i=n.length;a<i;a++){var o=n[a];if(o.key===t&&o.obj===e)return!0}return!1}function er(e){return Array.isArray(e)}function tr(e){return"function"==typeof e}function rr(e){return!nr(e)&&!er(e)&&!tr(e)&&"object"==typeof e}function nr(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}!function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(Bt||(Bt={}));var ar="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},ir=["OTEL_SDK_DISABLED"];function or(e){return ir.indexOf(e)>-1}var sr=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function cr(e){return sr.indexOf(e)>-1}var lr=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function ur(e){return lr.indexOf(e)>-1}var dr=1/0,pr=128,fr={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ae.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:dr,OTEL_ATTRIBUTE_COUNT_LIMIT:pr,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:dr,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:pr,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:dr,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:pr,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Bt.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function hr(e,t,r){if(void 0!==r[e]){var n=String(r[e]);t[e]="true"===n.toLowerCase()}}function mr(e,t,r,n,a){if(void 0===n&&(n=-1/0),void 0===a&&(a=1/0),void 0!==r[e]){var i=Number(r[e]);isNaN(i)||(t[e]=i<n?n:i>a?a:i)}}function yr(e,t,r,n){void 0===n&&(n=",");var a=r[e];"string"==typeof a&&(t[e]=a.split(n).map((function(e){return e.trim()})))}var vr={ALL:Ae.ALL,VERBOSE:Ae.VERBOSE,DEBUG:Ae.DEBUG,INFO:Ae.INFO,WARN:Ae.WARN,ERROR:Ae.ERROR,NONE:Ae.NONE};function gr(e,t,r){var n=r[e];if("string"==typeof n){var a=vr[n.toUpperCase()];null!=a&&(t[e]=a)}}function _r(e){var t={};for(var r in fr){var n=r;if("OTEL_LOG_LEVEL"===n)gr(n,t,e);else if(or(n))hr(n,t,e);else if(cr(n))mr(n,t,e);else if(ur(n))yr(n,t,e);else{var a=e[n];null!=a&&(t[n]=String(a))}}return t}function br(){var e=_r(ar);return Object.assign({},fr,e)}var wr=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,r){var n,a;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),o=i.next();!o.done;o=i.next()){var s=o.value;try{s.inject(e,t,r)}catch(e){ze.warn("Failed to inject with "+s.constructor.name+". Err: "+e.message)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}},e.prototype.extract=function(e,t,r){return this._propagators.reduce((function(e,n){try{return n.extract(e,t,r)}catch(e){ze.warn("Failed to inject with "+n.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),Sr=Ve("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Er(e){return!0===e.getValue(Sr)}var Pr=new RegExp("^(?:[a-z][_0-9a-z-*/]{0,255}|[a-z0-9][_0-9a-z-*/]{0,240}@[a-z][_0-9a-z-*/]{0,13})$"),kr=/^[ -~]{0,255}[!-~]$/,Tr=/,|=/,Rr=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,r){return t.push(r+"="+e.get(r)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var a=r.slice(0,n),i=r.slice(n+1,t.length);(function(e){return Pr.test(e)})(a)&&function(e){return kr.test(e)&&!Tr.test(e)}(i)&&e.set(a,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Cr="traceparent",Or="tracestate",xr=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),Dr=function(){function e(){}return e.prototype.inject=function(e,t,r){var n=St.getSpanContext(e);if(n&&!Er(e)&&ft(n)){var a="00-"+n.traceId+"-"+n.spanId+"-0"+Number(n.traceFlags||He.NONE).toString(16);r.set(t,Cr,a),n.traceState&&r.set(t,Or,n.traceState.serialize())}},e.prototype.extract=function(e,t,r){var n=r.get(t,Cr);if(!n)return e;var a=Array.isArray(n)?n[0]:n;if("string"!=typeof a)return e;var i=function(e){var t=xr.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}(a);if(!i)return e;i.isRemote=!0;var o=r.get(t,Or);if(o){var s=Array.isArray(o)?o.join(","):o;i.traceState=new Rr("string"==typeof s?s:void 0)}return St.setSpanContext(e,i)},e.prototype.fields=function(){return[Cr,Or]},e}(),Ir=",",Lr="baggage";function Mr(e){var t=e.split(";");if(!(t.length<=0)){var r=t.shift();if(r){var n=r.split("=");if(2===n.length){var a,i,o=decodeURIComponent(n[0].trim()),s=decodeURIComponent(n[1].trim());return t.length>0&&("string"!=typeof(i=t.join(";"))&&(At.error("Cannot create baggage metadata from unknown type: "+typeof i),i=""),a={__TYPE__:Mt,toString:function(){return i}}),{key:o,value:s,metadata:a}}}}}function Ar(e){return"string"!=typeof e||0===e.length?{}:e.split(Ir).map((function(e){return Mr(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})}var jr,Nr,Fr,Br=function(){function e(){}return e.prototype.inject=function(e,t,r){var n=Vt.getBaggage(e);if(n&&!Er(e)){var a=function(e){return e.getAllEntries().map((function(e){var t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(e,2),r=t[0],n=t[1],a=encodeURIComponent(r)+"="+encodeURIComponent(n.value);return void 0!==n.metadata&&(a+=";"+n.metadata.toString()),a}))}(n).filter((function(e){return e.length<=4096})).slice(0,180),i=function(e){return e.reduce((function(e,t){var r=""+e+(""!==e?Ir:"")+t;return r.length>8192?e:r}),"")}(a);i.length>0&&r.set(t,Lr,i)}},e.prototype.extract=function(e,t,r){var n=r.get(t,Lr),a=Array.isArray(n)?n.join(Ir):n;if(!a)return e;var i={};return 0===a.length?e:(a.split(Ir).forEach((function(e){var t=Mr(e);if(t){var r={value:t.value};t.metadata&&(r.metadata=t.metadata),i[t.key]=r}})),0===Object.entries(i).length?e:Vt.setBaggage(e,Vt.createBaggage(i)))},e.prototype.fields=function(){return[Lr]},e}(),Ur="telemetry.sdk.name",zr="telemetry.sdk.language",Vr="telemetry.sdk.version",Hr=((jr={})[Ur]="opentelemetry",jr["process.runtime.name"]="browser",jr[zr]="webjs",jr[Vr]="1.14.0",jr),Wr=function(){return Wr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Wr.apply(this,arguments)},Zr=function(){function e(e,t){var r,n=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(r=this._attributes)&&void 0!==r?r:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return n._attributes=Object.assign({},n._attributes,e),n.asyncAttributesPending=!1,e}),(function(e){return ze.debug("a resource's async attributes promise rejected: %s",e),n.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})["service.name"]="unknown_service",t[zr]=Hr[zr],t[Ur]=Hr[Ur],t[Vr]=Hr[Vr],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&ze.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return function(e,t,r,n){return new(r||(r=Promise))((function(t,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function o(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,o)}s((n=n.apply(e,[])).next())}))}(this,0,void 0,(function(){return function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.merge=function(t){var r,n=this;if(!t)return this;var a=Wr(Wr({},this._syncAttributes),null!==(r=t._syncAttributes)&&void 0!==r?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(a);var i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var r,a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(e,2),i=a[0],o=a[1];return Wr(Wr(Wr(Wr({},n._syncAttributes),i),null!==(r=t._syncAttributes)&&void 0!==r?r:t.attributes),o)}));return new e(a,i)},e.EMPTY=new e({}),e}();!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Nr||(Nr={})),function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Fr||(Fr={}));var Gr,qr=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$r=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};function Kr(e){var t,r,n={};if("object"!=typeof e||null==e)return n;try{for(var a=qr(Object.entries(e)),i=a.next();!i.done;i=a.next()){var o=$r(i.value,2),s=o[0],c=o[1];Qr(s)?Xr(c)?Array.isArray(c)?n[s]=c.slice():n[s]=c:ze.warn("Invalid attribute value set for key: "+s):ze.warn("Invalid attribute key: "+s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}function Qr(e){return"string"==typeof e&&e.length>0}function Xr(e){return null==e||(Array.isArray(e)?function(e){var t,r,n;try{for(var a=qr(e),i=a.next();!i.done;i=a.next()){var o=i.value;if(null!=o){if(!n){if(Jr(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!0}(e):Jr(e))}function Jr(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Gr||(Gr={}));var Yr=performance,en=Math.pow(10,6),tn=Math.pow(10,9);function rn(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*en)]}function nn(){var e=Yr.timeOrigin;if("number"!=typeof e){var t=Yr;e=t.timing&&t.timing.fetchStart}return e}function an(e){return e[0]*tn+e[1]}function on(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function sn(e){return on(e)||"number"==typeof e||e instanceof Date}function cn(e,t){var r=[e[0]+t[0],e[1]+t[1]];return r[1]>=tn&&(r[1]-=tn,r[0]+=1),r}var ln,un="exception.type",dn="exception.message",pn=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},fn=function(){function e(e,t,r,n,a,i,o,s,c){void 0===o&&(o=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Gr.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=n,this.parentSpanId=i,this.kind=a,this.links=o;var l=Date.now();this._performanceStartTime=Yr.now(),this._performanceOffset=l-(this._performanceStartTime+nn()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(ze.warn("Invalid attribute key: "+e),this):Xr(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(ze.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,r;try{for(var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),a=n.next();!a.done;a=n.next()){var i=pn(a.value,2),o=i[0],s=i[1];this.setAttribute(o,s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,r){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return ze.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(ze.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),sn(t)&&(sn(r)||(r=t),t=void 0);var n=Kr(t);return this.events.push({name:e,attributes:n,time:this._getTime(r),droppedAttributesCount:0}),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?ze.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=tn),[r,n]}(this.startTime,this.endTime),this._duration[0]<0&&(ze.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<Yr.now())return function(e){return cn(rn(nn()),rn("number"==typeof e?e:Yr.now()))}(e+this._performanceOffset);if("number"==typeof e)return rn(e);if(e instanceof Date)return rn(e.getTime());if(on(e))return e;if(this._startTimeProvided)return rn(Date.now());var t=Yr.now()-this._performanceStartTime;return cn(this.startTime,rn(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var r={};"string"==typeof e?r[dn]=e:e&&(e.code?r[un]=e.code.toString():e.name&&(r[un]=e.name),e.message&&(r[dn]=e.message),e.stack&&(r["exception.stacktrace"]=e.stack)),r[un]||r[dn]?this.addEvent("exception",r,t):ze.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&ze.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,r=this._attributeValueLengthLimit;return r<=0?(ze.warn("Attribute value limit must be positive, got "+r),e):"string"==typeof e?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,r):e})):e},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(ln||(ln={}));var hn=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:ln.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),mn=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:ln.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}();function yn(e){try{!function(e){ze.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},r=e;null!==r;)Object.getOwnPropertyNames(r).forEach((function(e){if(!t[e]){var n=r[e];n&&(t[e]=String(n))}})),r=Object.getPrototypeOf(r);return t}(e))}(e))}(e)}catch(e){}}var vn=function(){function e(e){var t,r,n,a;this._root=e.root,this._root||(yn(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new mn),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new mn,this._remoteParentNotSampled=null!==(r=e.remoteParentNotSampled)&&void 0!==r?r:new hn,this._localParentSampled=null!==(n=e.localParentSampled)&&void 0!==n?n:new mn,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new hn}return e.prototype.shouldSample=function(e,t,r,n,a,i){var o=St.getSpanContext(e);return o&&ft(o)?o.isRemote?o.traceFlags&He.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,n,a,i):this._remoteParentNotSampled.shouldSample(e,t,r,n,a,i):o.traceFlags&He.SAMPLED?this._localParentSampled.shouldSample(e,t,r,n,a,i):this._localParentNotSampled.shouldSample(e,t,r,n,a,i):this._root.shouldSample(e,t,r,n,a,i)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),gn=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:pt(t)&&this._accumulate(t)<this._upperBound?ln.RECORD_AND_SAMPLED:ln.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,r=0;r<e.length/8;r++){var n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t},e}(),_n=br(),bn=Bt.AlwaysOn;function wn(){return{sampler:Sn(_n),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:br().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:br().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:br().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:br().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:br().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:br().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:br().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:br().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Sn(e){switch(void 0===e&&(e=br()),e.OTEL_TRACES_SAMPLER){case Bt.AlwaysOn:return new mn;case Bt.AlwaysOff:return new hn;case Bt.ParentBasedAlwaysOn:return new vn({root:new mn});case Bt.ParentBasedAlwaysOff:return new vn({root:new hn});case Bt.TraceIdRatio:return new gn(En(e));case Bt.ParentBasedTraceIdRatio:return new vn({root:new gn(En(e))});default:return ze.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+bn+'".'),new mn}}function En(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return ze.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(ze.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):t<0||t>1?(ze.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):t}var Pn=function(){this.generateTraceId=Tn(16),this.generateSpanId=Tn(8)},kn=Array(32);function Tn(e){return function(){for(var t=0;t<2*e;t++)kn[t]=Math.floor(16*Math.random())+48,kn[t]>=58&&(kn[t]+=39);return String.fromCharCode.apply(null,kn.slice(0,2*e))}}var Rn,Cn=function(){function e(e,t,r){this._tracerProvider=r;var n,a,i,o,s=(n=t,a={sampler:Sn()},i=wn(),(o=Object.assign({},i,a,n)).generalLimits=Object.assign({},i.generalLimits,n.generalLimits||{}),o.spanLimits=Object.assign({},i.spanLimits,n.spanLimits||{}),o);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=t.idGenerator||new Pn,this.resource=r.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,r){var n,a,i;void 0===t&&(t={}),void 0===r&&(r=Et.active()),t.root&&(r=St.deleteSpan(r));var o=St.getSpan(r);if(Er(r))return ze.debug("Instrumentation suppressed, returning Noop Span"),St.wrapSpanContext(tt);var s,c,l,u=null==o?void 0:o.spanContext(),d=this._idGenerator.generateSpanId();u&&St.isSpanContextValid(u)?(s=u.traceId,c=u.traceState,l=u.spanId):s=this._idGenerator.generateTraceId();var p=null!==(n=t.kind)&&void 0!==n?n:Nr.INTERNAL,f=(null!==(a=t.links)&&void 0!==a?a:[]).map((function(e){return{context:e.context,attributes:Kr(e.attributes)}})),h=Kr(t.attributes),m=this._sampler.shouldSample(r,s,e,p,h,f);c=null!==(i=m.traceState)&&void 0!==i?i:c;var y={traceId:s,spanId:d,traceFlags:m.decision===Fr.RECORD_AND_SAMPLED?He.SAMPLED:He.NONE,traceState:c};if(m.decision===Fr.NOT_RECORD)return ze.debug("Recording is off, propagating context in a non-recording span"),St.wrapSpanContext(y);var v=new fn(this,r,e,y,p,l,f,t.startTime),g=Kr(Object.assign(h,m.attributes));return v.setAttributes(g),v},e.prototype.startActiveSpan=function(e,t,r,n){var a,i,o;if(!(arguments.length<2)){2===arguments.length?o=t:3===arguments.length?(a=t,o=r):(a=t,i=r,o=n);var s=null!=i?i:Et.active(),c=this.startSpan(e,a,s),l=St.setSpan(s,c);return Et.with(l,o,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),On=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xn=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,r=[];try{for(var n=On(this._spanProcessors),a=n.next();!a.done;a=n.next()){var i=a.value;r.push(i.forceFlush())}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(r).then((function(){e()})).catch((function(t){yn(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var r,n;try{for(var a=On(this._spanProcessors),i=a.next();!i.done;i=a.next())i.value.onStart(e,t)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.onEnd=function(e){var t,r;try{for(var n=On(this._spanProcessors),a=n.next();!a.done;a=n.next())a.value.onEnd(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,r=[];try{for(var n=On(this._spanProcessors),a=n.next();!a.done;a=n.next()){var i=a.value;r.push(i.shutdown())}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(r).then((function(){e()}),t)}))},e}(),Dn=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),In=function(){function e(){var e=this;this._promise=new Promise((function(t,r){e._resolve=t,e._reject=r}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),Ln=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},Mn=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},An=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new In}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Mn([this._that],Ln(r),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}();!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(Rn||(Rn={}));var jn,Nn,Fn=function(){function e(e,t){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var r=br();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new An(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ze.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&He.SAMPLED)&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&ze.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(ze.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,r){for(var n=[],a=0,i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);a<i;a++)n.push(e._flushOneBatch());Promise.all(n).then((function(){t()})).catch(r)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,r){var n=setTimeout((function(){r(new Error("Timeout"))}),e._exportTimeoutMillis);Et.with(Et.active().setValue(Sr,!0),(function(){var a=e._finishedSpans.splice(0,e._maxExportBatchSize),i=function(){return e._exporter.export(a,(function(e){var a;clearTimeout(n),e.code===Rn.SUCCESS?t():r(null!==(a=e.error)&&void 0!==a?a:new Error("BatchSpanProcessor: span export failed"))}))},o=a.map((function(e){return e.resource})).filter((function(e){return e.asyncAttributesPending}));0===o.length?i():Promise.all(o.map((function(e){var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(i,(function(e){yn(e),r(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;void 0===this._timer&&(this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(e){yn(e)}))}),this._scheduledDelayMillis),this._timer)},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Bn=(jn=function(e,t){return jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},jn(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}jn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Un=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.onInit(r),n}return Bn(t,e),t.prototype.onInit=function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(Fn);!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(Nn||(Nn={}));var zn=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.shift(),n=new WeakMap;e.length>0;)r=Jt(r,e.shift(),0,n);return r}({},wn(),function(e){var t,r,n,a,i,o,s,c,l,u,d,p,f=Object.assign({},e.spanLimits),h="undefined"!=typeof process&&process&&process.env?_r(process.env):_r(ar);return f.attributeCountLimit=null!==(o=null!==(i=null!==(a=null!==(r=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==r?r:null===(n=e.generalLimits)||void 0===n?void 0:n.attributeCountLimit)&&void 0!==a?a:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:h.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==o?o:pr,f.attributeValueLengthLimit=null!==(p=null!==(d=null!==(u=null!==(c=null===(s=e.spanLimits)||void 0===s?void 0:s.attributeValueLengthLimit)&&void 0!==c?c:null===(l=e.generalLimits)||void 0===l?void 0:l.attributeValueLengthLimit)&&void 0!==u?u:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:dr,Object.assign({},e,{spanLimits:f})}(e));this.resource=null!==(t=r.resource)&&void 0!==t?t:Zr.empty(),this.resource=Zr.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var n=this._buildExporterFromEnv();if(void 0!==n){var a=new Un(n);this.activeSpanProcessor=a}else this.activeSpanProcessor=new Dn}return e.prototype.getTracer=function(e,t,r){var n=e+"@"+(t||"")+":"+((null==r?void 0:r.schemaUrl)||"");return this._tracers.has(n)||this._tracers.set(n,new Cn({name:e,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return ze.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new xn(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),St.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Et.setGlobalContextManager(e.contextManager),e.propagator&&Vt.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(r){var n,a=setTimeout((function(){r(new Error("Span processor did not completed within timeout period of "+e+" ms")),n=Nn.timeout}),e);t.forceFlush().then((function(){clearTimeout(a),n!==Nn.timeout&&(n=Nn.resolved,r(n))})).catch((function(e){clearTimeout(a),n=Nn.error,r(e)}))}))}));return new Promise((function(e,r){Promise.all(t).then((function(t){var n=t.filter((function(e){return e!==Nn.resolved}));n.length>0?r(n):e()})).catch((function(e){return r([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(br().OTEL_PROPAGATORS)),r=t.map((function(t){var r=e._getPropagator(t);return r||ze.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),r})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===r.length?void 0:1===t.length?r[0]:new wr({propagators:r})},e.prototype._buildExporterFromEnv=function(){var e=br().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||ze.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new Dr}],["baggage",function(){return new Br}]]),e._registeredExporters=new Map,e}(),Vn=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},Hn=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},Wn=function(){function e(){this._enabled=!1,this._currentContext=We}return e.prototype._bindFunction=function(e,t){void 0===e&&(e=We);var r=this,n=function(){for(var n=this,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r.with(e,(function(){return t.apply(n,a)}))};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),n},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):t},e.prototype.disable=function(){return this._currentContext=We,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=We),this},e.prototype.with=function(e,t,r){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];var i=this._currentContext;this._currentContext=e||We;try{return t.call.apply(t,Hn([r],Vn(n),!1))}finally{this._currentContext=i}},e}(),Zn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gn=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return r}return Zn(t,e),t.prototype.register=function(t){void 0===t&&(t={}),void 0===t.contextManager&&(t.contextManager=new Wn),t.contextManager&&t.contextManager.enable(),e.prototype.register.call(this,t)},t}(zn);function qn(e,t){return ze.warn("Timeout must be greater than 0",e),t}var $n=function(){function e(e){void 0===e&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new An(this._shutdown,this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:1/0,this.timeoutMillis=function(e){return"number"==typeof e?e<=0?qn(e,1e4):e:function(){var e,t=Number(null!==(e=br().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==e?e:br().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?qn(t,1e4):t}()}(e.timeoutMillis),this.onInit(e)}return e.prototype.export=function(e,t){this._shutdownOnce.isCalled?t({code:Rn.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?t({code:Rn.FAILED,error:new Error("Concurrent export limit reached")}):this._export(e).then((function(){t({code:Rn.SUCCESS})})).catch((function(e){t({code:Rn.FAILED,error:e})}))},e.prototype._export=function(e){var t=this;return new Promise((function(r,n){try{ze.debug("items to be sent",e),t.send(e,r,n)}catch(e){n(e)}}))},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then((function(){}))},e.prototype._shutdown=function(){return ze.debug("shutdown started"),this.onShutdown(),this.forceFlush()},e}(),Kn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qn=function(e){function t(t,r,n){var a=e.call(this,t)||this;return a.name="OTLPExporterError",a.data=n,a.code=r,a}return Kn(t,e),t}(Error),Xn=function(){return Xn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xn.apply(this,arguments)};var Jn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yn=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r._useXHR=!1,r._useXHR=!!t.headers||"function"!=typeof navigator.sendBeacon,r._useXHR?r._headers=Object.assign({},function(e){void 0===e&&(e={});var t={};return Object.entries(e).forEach((function(e){var r=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(e,2),n=r[0],a=r[1];void 0!==a?t[n]=String(a):ze.warn('Header "'+n+'" has wrong value and will be ignored')})),t}(t.headers),Ar(br().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return Jn(t,e),t.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},t.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},t.prototype.send=function(e,t,r){var n=this;if(this._shutdownOnce.isCalled)ze.debug("Shutdown already started. Cannot send objects");else{var a=this.convert(e),i=JSON.stringify(a),o=new Promise((function(e,t){n._useXHR?function(e,t,r,n,a,i){var o,s,c=!1,l=setTimeout((function(){if(clearTimeout(o),c=!0,s.readyState===XMLHttpRequest.DONE){var e=new Qn("Request Timeout");i(e)}else s.abort()}),n),u=function(n,d){void 0===n&&(n=5),void 0===d&&(d=1e3),(s=new XMLHttpRequest).open("POST",t),Object.entries(Xn(Xn({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach((function(e){var t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(e,2),r=t[0],n=t[1];s.setRequestHeader(r,n)})),s.send(e),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE&&!1===c)if(s.status>=200&&s.status<=299)ze.debug("xhr success",e),a(),clearTimeout(l),clearTimeout(o);else if(s.status&&(p=s.status,[429,502,503,504].includes(p))&&n>0){var t;d*=1.5,t=s.getResponseHeader("Retry-After")?function(e){if(null==e)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?1e3*t:-1;var r=new Date(e).getTime()-Date.now();return r>=0?r:0}(s.getResponseHeader("Retry-After")):Math.round(Math.random()*(5e3-d)+d),o=setTimeout((function(){u(n-1,d)}),t)}else{var r=new Qn("Failed to export with XHR (status: "+s.status+")",s.status);i(r),clearTimeout(l),clearTimeout(o)}var p},s.onabort=function(){if(c){var e=new Qn("Request Timeout");i(e)}clearTimeout(l),clearTimeout(o)},s.onerror=function(){if(c){var e=new Qn("Request Timeout");i(e)}clearTimeout(l),clearTimeout(o)}};u()}(i,n.url,n._headers,n.timeoutMillis,e,t):function(e,t,r,n,a){navigator.sendBeacon(t,new Blob([e],{type:"application/json"}))?(ze.debug("sendBeacon - can send",e),n()):a(new Qn("sendBeacon - cannot send "+e))}(i,n.url,0,e,t)})).then(t,r);this._sendingPromises.push(o);var s=function(){var e=n._sendingPromises.indexOf(o);n._sendingPromises.splice(e,1)};o.then(s,s)}},t}($n);function ea(e){return Object.keys(e).map((function(t){return ta(t,e[t])}))}function ta(e,t){return{key:e,value:ra(t)}}function ra(e){var t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(ra)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((function(e){var t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}(e,2);return ta(t[0],t[1])}))}}:{}}function na(e){for(var t=e.length,r="",n=0;n<t;n+=2){var a=e.substring(n,n+2),i=parseInt(a,16);r+=String.fromCharCode(i)}return btoa(r)}function aa(e,t){var r,n=e.spanContext(),a=e.status,i=t?e.parentSpanId:null!=e.parentSpanId?na(e.parentSpanId):void 0;return{traceId:t?n.traceId:na(n.traceId),spanId:t?n.spanId:na(n.spanId),parentSpanId:i,traceState:null===(r=n.traceState)||void 0===r?void 0:r.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:an(e.startTime),endTimeUnixNano:an(e.endTime),attributes:ea(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(ia),droppedEventsCount:e.droppedEventsCount,status:{code:a.code,message:a.message},links:e.links.map((function(e){return function(e,t){var r;return{attributes:e.attributes?ea(e.attributes):[],spanId:t?e.context.spanId:na(e.context.spanId),traceId:t?e.context.traceId:na(e.context.traceId),traceState:null===(r=e.context.traceState)||void 0===r?void 0:r.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)})),droppedLinksCount:e.droppedLinksCount}}function ia(e){return{attributes:e.attributes?ea(e.attributes):[],name:e.name,timeUnixNano:an(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var oa=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};function sa(e,t){for(var r=function(e){var t,r,n=new Map;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=a.next();!i.done;i=a.next()){var o=i.value,s=n.get(o.resource);s||(s=new Map,n.set(o.resource,s));var c=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),l=s.get(c);l||(l=[],s.set(c,l)),l.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}(e),n=[],a=r.entries(),i=a.next();!i.done;){for(var o=oa(i.value,2),s=o[0],c=[],l=o[1].values(),u=l.next();!u.done;){var d=u.value;if(d.length>0){var p=d[0].instrumentationLibrary,f=p.name,h=p.version,m=p.schemaUrl,y=d.map((function(e){return aa(e,t)}));c.push({scope:{name:f,version:h},spans:y,schemaUrl:m})}u=l.next()}var v={resource:{attributes:ea(s.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};n.push(v),i=a.next()}return n}var ca=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),la=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r._headers=Object.assign(r._headers,Ar(br().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),r}return ca(t,e),t.prototype.convert=function(e){return function(e,t){return{resourceSpans:sa(e,!0)}}(e)},t.prototype.getDefaultUrl=function(e){return"string"==typeof e.url?e.url:br().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?function(e){try{var t=new URL(e);return""===t.pathname&&(t.pathname=t.pathname+"/"),t.toString()}catch(t){return ze.warn("Could not parse export URL: '"+e+"'"),e}}(br().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):br().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?((t=br().OTEL_EXPORTER_OTLP_ENDPOINT).endsWith("/")||(t+="/"),t+"v1/traces"):"http://localhost:4318/v1/traces";var t},t}(Yn),ua=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(e){return e&&e.get("OT_ZONE_CONTEXT")||We},e.prototype._bindFunction=function(e,t){var r=this,n=function(){for(var n=this,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r.with(e,(function(){return t.apply(n,a)}))};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),n},e.prototype._bindListener=function(e,t){var r=t;return void 0!==r.__ot_listeners||(r.__ot_listeners={},"function"==typeof r.addEventListener&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,e)),"function"==typeof r.removeEventListener&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),t},e.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},e.prototype._createZone=function(e,t){var r;return Zone.current.fork({name:e,properties:(r={},r.OT_ZONE_CONTEXT=t,r)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(e,t,r){var n=this;return function(a,i,o){void 0===e.__ot_listeners&&(e.__ot_listeners={});var s=e.__ot_listeners[a];void 0===s&&(s=new WeakMap,e.__ot_listeners[a]=s);var c=n.bind(r,i);return s.set(i,c),t.call(this,a,c,o)}},e.prototype._patchRemoveEventListener=function(e,t){return function(r,n){if(void 0===e.__ot_listeners||void 0===e.__ot_listeners[r])return t.call(this,r,n);var a=e.__ot_listeners[r],i=a.get(n);return a.delete(n),t.call(this,r,i||n)}},e.prototype.active=function(){if(!this._enabled)return We;var e=this._getActiveZone();return this._activeContextFromZone(e)||We},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):(void 0===(r=t)&&(r={}),"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener&&this._bindListener(e,t),t);var r},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(e,t,r){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];var i=this._createZoneName(),o=this._createZone(i,e);return o.run(t,r,n)},e}(),da=(r(6037),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),pa=function(){function e(){}return e.prototype.createHistogram=function(e,t){return Ea},e.prototype.createCounter=function(e,t){return Sa},e.prototype.createUpDownCounter=function(e,t){return Pa},e.prototype.createObservableGauge=function(e,t){return Ta},e.prototype.createObservableCounter=function(e,t){return ka},e.prototype.createObservableUpDownCounter=function(e,t){return Ra},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),fa=function(){},ha=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.add=function(e,t){},t}(fa),ma=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.add=function(e,t){},t}(fa),ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.record=function(e,t){},t}(fa),va=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t}(va),_a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t}(va),ba=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t}(va),wa=new pa,Sa=new ha,Ea=new ya,Pa=new ma,ka=new ga,Ta=new _a,Ra=new ba,Ca=new(function(){function e(){}return e.prototype.getMeter=function(e,t,r){return wa},e}()),Oa="metrics",xa=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return Ie(Oa,e,Ue.instance())},e.prototype.getMeterProvider=function(){return Le(Oa)||Ca},e.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},e.prototype.disable=function(){Me(Oa,Ue.instance())},e}().getInstance();const Da={context:Et,diag:ze,metrics:xa,propagation:Vt,trace:St};function Ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ma=function(){function e(t){var r=t.roomId,n=t.peerId,a=t.sdkName,o=t.logs,s=t.observabilityJwt,c=t.traces,l=t.metaData;if((0,i.Z)(this,e),this._peerId=n,this._roomId=r,this._logs=o,this._tracesEnabled=c.enabled,this._observabilityJwt=s,"react-native"!=a&&this._tracesEnabled){var u=new la({url:c.endPoint,headers:{Authorization:this._observabilityJwt}});this._provider=new Gn({resource:new Zr({"service.name":"videosdk-otel","sdk-version":"0.0.1"})}),this._tracer=this._provider.getTracer(n),this._provider.addSpanProcessor(new Un(u)),this._provider.register({contextManager:new ua}),this._rootSpan=this._tracer.startSpan("room_".concat(r,"_peer_").concat(n,"_sdk_").concat(a),{},We),this._rootSpan.setAttributes({roomId:r,peerId:n,sdkName:a,userId:l.userId,email:l.email}),this._rootSpan.end()}}var t,r;return(0,o.Z)(e,[{key:"trace",value:function(e){var t=e.spanName,r=e.attributes,n=void 0===r?{}:r,i=e.span,o=void 0===i?void 0:i;if(this._tracesEnabled){var s;s=o||this.getCurrentSpan();var c=Da.trace.setSpan(We,s),u=this._tracer.startActiveSpan(t,{},c,function(){var e=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setAttributes(n),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return u}return null}},{key:"traceAutoComplete",value:function(e){var t=e.spanName,r=e.attributes,n=void 0===r?{}:r,a=e.span,i=void 0===a?void 0:a,o=e.status,s=void 0===o?1:o,c=e.message,l=void 0===c?"SUCCESS":c;if(this._tracesEnabled){var u;u=i||this._rootSpan;var d=Da.trace.setSpan(We,u),p=this._tracer.startSpan(t,{},d);p.setAttributes(n),p.setStatus({code:s,message:l}),p.end()}}},{key:"completeSpan",value:function(e){var t=e.span,r=e.status,n=e.message;this._tracesEnabled&&(t.setStatus({code:r,message:n}),t.end())}},{key:"getCurrentSpan",value:function(){var e=Da.trace.getSpan(Da.context.active());return e||(e=this._rootSpan),e}},{key:"getCurrentSpanName",value:function(){var e;return null===(e=this.getCurrentSpan())||void 0===e?void 0:e.name}},{key:"flush",value:(r=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tracesEnabled){e.next=3;break}return e.next=3,this._provider.shutdown();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"pushLogs",value:(t=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.logType,n=t.logText,a=t.attributes,i=this._logs,o=i.enabled,s=i.endPoint,!o){e.next=8;break}return e.next=5,fetch(s,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:r,logText:n,attributes:La(La({},a),{},{roomId:this._roomId,peerId:this._peerId})})}).then((function(e){return e.json()})).catch((function(e){return console.log("error",e),{}}));case 5:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function Aa(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ja(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ja(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ba,Ua={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},za={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Va={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Ha=[{scalabilityMode:"S3T3_KEY"}],Wa=[{dtx:!0,maxFramerate:10}],Za=[{scalabilityMode:"S3T3",dtx:!0}],Ga=new m("RoomClient"),qa=function(){function e(t){var r,n,a=t.roomId,o=t.peerId,c=t.secret,l=t.displayName,u=t.device,d=t.handlerName,p=t.useSimulcast,f=t.useSharingSimulcast,h=t.forceTcp,m=t.mode,y=t.forceH264,v=t.forceVP9,g=t.svc,_=t.datachannel,b=t.externalVideo,w=t.micEnabled,S=t.webcamEnabled,E=t.maxResolution,P=t.useSpartialLayerAnalytics,k=t._deviceInfo,T=t.customCameraVideoTrack,R=t.customMicrophoneAudioTrack,C=t.autoConsume,O=t.preferredProtocol;(0,i.Z)(this,e),(0,s.Z)(this,"delay",(function(e){return new Promise((function(t){return setTimeout(t,e)}))})),Ga.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',a,o,l,u.flag),this.useSpartialLayerAnalytics=P||!1,this._deviceInfo=k,this._eventEmitter=new ie.EventEmitter,this._closed=!1,this._displayName=l,this._device=u,this._forceTcp=h,this._preferredProtocol=O,m==Ee.S.CONFERENCE?(r=!0,n=!0):(r=!1,n=!1),this._mode=m,this._produce=r,this._consume=n,this._useDataChannel=_,this._forceH264=Boolean(y),this._forceVP9=Boolean(v),this._micEnabled=Boolean(w),this._webcamEnabled=Boolean(S),this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,b&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=b,this._externalVideo.play().catch((function(e){return Ga.warn("externalVideo.play() failed:%o",e)}))),this._handlerName=d,this._useSimulcast=p,this._useSharingSimulcast=f,this._protooUrl="",this._secret=c,this._peerId=o,this._roomId=a,this._baseUrl="",this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:E||"hd"},this._pinnedParticipants=new Map,g&&(Ha[0].scalabilityMode="".concat(g,"_KEY"),Za[0].scalabilityMode=g),this.customCameraVideoTrack=T,this.customMicrophoneAudioTrack=R,this._autoConsume=C,this._iceServers=[],this._metrics=new Se.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._collectStats="react-native"!=k.sdkType,this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null}var t,r,c,p,f,h,m,y,v,g,b,w,S,E,T,R,oe,ce,le,ue,de,pe,fe,he,me,ye,ve,ke,Te,Re,Ce,Oe,xe,De,Ie,Le,Me,Ae,je,Ne,Fe,Be,Ue,ze,Ve,He,We,Ze,Ge,qe,$e,Ke,Qe,Xe,Je,Ye,et,tt,rt,nt,at,it,ot,st,ct,lt,ut,dt,pt,ft,ht,mt,yt,vt,gt,_t,bt,wt,St,Et,Pt,kt,Tt,Rt,Ct,Ot,xt,Dt,It,Lt,Mt,At,jt,Nt,Ft,Bt,Ut,zt,Vt;return(0,o.Z)(e,[{key:"on",value:function(e,t){this._eventEmitter.on(e,t)}},{key:"close",value:(Vt=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o,s,c,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.sendLeft,(c=void 0===s||s)&&(this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSING"}),null===(u=this._openTelemetry)||void 0===u||u.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){e.next=4;break}return e.abrupt("return");case 4:return this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._protoo.close(),this._metrics.running&&this._metrics.stopAllProbes(),Ga.debug("close()"),e.next=14,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"Closing Trasnport"});case 14:return d=e.sent,this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),null===(n=this._openTelemetry)||void 0===n||n.completeSpan({span:d,status:1,message:"Closed Trasnport"}),Ba.dispatch(C("closed")),c&&this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSED"}),null===(a=this._openTelemetry)||void 0===a||a.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),c&&this._eventEmitter.emit("MEETING_LEFT"),null===(i=this._openTelemetry)||void 0===i||i.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1}),e.next=25,null===(o=this._openTelemetry)||void 0===o?void 0:o.flush();case 25:case"end":return e.stop()}}),e,this)}))),function(e){return Vt.apply(this,arguments)})},{key:"join",value:(zt=(0,a.Z)(l().mark((function e(){var t,r,n,i,o,c,p,f,h,m,y=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({roomId:this._roomId,secret:this._secret});case 2:return n=e.sent,i=n.baseUrl,o=n.iceServers,c=n.logs,p=n.observabilityJwt,f=n.traces,h=n.metaData,this._baseUrl=i,this._protooUrl="wss://".concat(this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode),this._iceServers=o,this._tracesEnabled=f.enabled,"react-native"!=this._deviceInfo.sdkType&&(this._openTelemetry=new Ma({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:f,logs:c,observabilityJwt:p,metaData:h})),e.next=16,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack}});case 16:this._joinSpan=e.sent,m=new u.qo(this._protooUrl),this._protoo=new u._z(m),this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTING"}),Ba.dispatch(C("connecting")),null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Meeting is in CONNECTING State",status:1}),this._protoo.on("open",(function(){var e;y._isWebsocketAlive=!0,y._closed=!1,y.startPingPong(),y._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),null===(e=y._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:"Meeting is in CONNECTED State",status:1}),y.requestEntry()})),this._protoo.on("failed",(function(){var e;y._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"FAILED"}),null===(e=y._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:"Meeting is in FAILED State",status:2}),Ba.dispatch(ae({type:"error",text:"WebSocket connection failed"}))})),this._protoo.on("disconnected",(function(){var e;y._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),null===(e=y._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:"Meeting is in DISCONNECTED State",status:1}),Ba.dispatch(ae({type:"error",text:"WebSocket disconnected"})),y._sendTransport&&(y._sendTransport.close(),y._sendTransport=null),y._recvTransport&&(y._recvTransport.close(),y._recvTransport=null),Ba.dispatch(C("closed"))})),this._protoo.on("close",(function(){y._closed||y.close({sendLeft:!0})})),this._protoo.on("request",function(){var e=(0,a.Z)(l().mark((function e(t,r,n){var a,i,o,c,u,p,f,h,m,v,g,_,b,w,S,E,P,k,T,R,C,O,x,D,I,L,M,A,j,N,F,B,U,z,V,H,W,Z,G,q,Q,X,J,Y,ee,te,ne,ie,oe,se,ce,le,ue,de,pe,fe;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug('proto "request" event [method:%s, data:%o]',t.method,t.data),e.t0=t.method,e.next="close"===e.t0?4:"newConsumer"===e.t0?6:"newDataConsumer"===e.t0?51:"enableMic"===e.t0?78:"disableMic"===e.t0?80:"enableWebcam"===e.t0?96:"disableWebcam"===e.t0?98:"pinStateChanged"===e.t0?114:"switchRoom"===e.t0?137:"statsData"===e.t0?140:143;break;case 4:return y.close({sendLeft:!0}),e.abrupt("break",143);case 6:return e.next=8,null===(a=y._openTelemetry)||void 0===a?void 0:a.trace({spanName:"Protoo REQ: newConsumer",attributes:{request:JSON.stringify(t)}});case 8:if(o=e.sent,y._consume){e.next=13;break}return n(403,"I do not want to consume"),null===(c=y._openTelemetry)||void 0===c||c.completeSpan({span:o,status:2,message:"I do not want to consume"}),e.abrupt("break",143);case 13:return u=t.data,p=u.peerId,f=u.producerId,h=u.id,m=u.kind,v=u.rtpParameters,g=u.type,_=u.appData,b=u.producerPaused,e.next=16,null===(i=y._openTelemetry)||void 0===i?void 0:i.trace({spanName:"Creating Consumer",span:o});case 16:return w=e.sent,e.prev=17,e.next=20,y._recvTransport.consume({id:h,producerId:f,kind:m,rtpParameters:v,appData:Fa(Fa({},_),{},{peerId:p})});case 20:return T=e.sent,R=d.parseScalabilityMode(T.rtpParameters.encodings[0].scalabilityMode),C=R.spatialLayers,O=R.temporalLayers,T.spatialLayers=C,T.temporalLayers=O,T.currentSpatialLayers=C-1,T.currentTemporalLayers=O-1,y._consumers.set(T.id,T),T.on("transportclose",(function(){y._consumers.delete(T.id);var e=K(T.id,p);Ba.dispatch(e),y._eventEmitter.emit(e.type,e.payload)})),null===(S=y._openTelemetry)||void 0===S||S.completeSpan({span:w,status:1,message:"Consumer Created"}),e.next=31,null===(E=y._openTelemetry)||void 0===E?void 0:E.trace({spanName:"Sending Stream Enabled Event",span:o});case 31:w=e.sent,x=$({id:T.id,type:g,locallyPaused:!1,remotelyPaused:b,rtpParameters:T.rtpParameters,spatialLayers:C,temporalLayers:O,currentSpatialLayer:C-1,currentTemporalLayer:O-1,preferredSpatialLayer:C-1,preferredTemporalLayer:O-1,priority:1,codec:T.rtpParameters.codecs[0].mimeType.split("/")[1],track:T.track,appData:_,instance:T},p),Ba.dispatch(x),y._eventEmitter.emit(x.type,x.payload),r(),"video"===T.kind&&Ba.getState().me.audioOnly&&y._pauseConsumer(T),null===(P=y._openTelemetry)||void 0===P||P.completeSpan({span:w,status:1,message:"Event Send Successfully"}),null==o||o.setAttributes((0,s.Z)({},"consumer.consumerId",T.id)),null===(k=y._openTelemetry)||void 0===k||k.completeSpan({span:o,status:1,message:"New Consumer Created Successfully"}),"video"==T.kind&&T.appData.share&&(null===(D=y._openTelemetry)||void 0===D||D.traceAutoComplete({spanName:"Presenter Changed",attributes:{"peer.id":p}})),e.next=50;break;case 43:throw e.prev=43,e.t1=e.catch(17),null===(I=y._openTelemetry)||void 0===I||I.completeSpan({span:w,status:2,message:"Error creating a Consumer: ".concat(e.t1)}),null===(L=y._openTelemetry)||void 0===L||L.completeSpan({span:o,status:2,message:"Error creating a Consumer: ".concat(e.t1)}),Ba.dispatch(ae({type:"error",text:"Error creating a Consumer: ".concat(e.t1)})),y._openTelemetry.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:e.t1.message}}),e.t1;case 50:return e.abrupt("break",143);case 51:if(y._consume){e.next=54;break}return n(403,"I do not want to data consume"),e.abrupt("break",143);case 54:if(y._useDataChannel){e.next=57;break}return n(403,"I do not want DataChannels"),e.abrupt("break",143);case 57:return M=t.data,A=M.peerId,j=M.dataProducerId,N=M.id,F=M.sctpStreamParameters,B=M.label,U=M.protocol,z=M.appData,e.prev=58,e.next=61,y._recvTransport.consumeData({id:N,dataProducerId:j,sctpStreamParameters:F,label:B,protocol:U,appData:Fa(Fa({},z),{},{peerId:A})});case 61:V=e.sent,y._dataConsumers.set(V.id,V),V.on("transportclose",(function(){y._dataConsumers.delete(V.id)})),V.on("open",(function(){Ga.debug('DataConsumer "open" event')})),V.on("close",(function(){Ga.warn('DataConsumer "close" event'),y._dataConsumers.delete(V.id),Ba.dispatch(ae({type:"error",text:"DataConsumer closed"}))})),V.on("error",(function(e){Ga.error('DataConsumer "error" event:%o',e),Ba.dispatch(ae({type:"error",text:"DataConsumer error: ".concat(e)}))})),V.on("message",(function(e){if(Ga.debug('DataConsumer "message" event [streamId:%d]',V.sctpStreamParameters.streamId),window.DC_MESSAGE=e,e instanceof ArrayBuffer){var t=new DataView(e).getUint32();return t==Math.pow(2,32)-1?(Ga.warn("dataChannelTest finished!"),void(y._nextDataChannelTestNumber=0)):(t>y._nextDataChannelTestNumber&&Ga.warn("dataChannelTest: %s packets missing",t-y._nextDataChannelTestNumber),void(y._nextDataChannelTestNumber=t+1))}if("string"==typeof e)switch(V.label){case"chat":var r=Ba.getState().peers,n=Object.keys(r).map((function(e){return r[e]})).find((function(e){return e.dataConsumers.includes(V.id)}));if(!n){Ga.warn('DataConsumer "message" from unknown peer');break}Ba.dispatch(ae({title:"".concat(n.displayName," says:"),text:e,timeout:5e3})),y._eventEmitter.emit("CHAT_MESSAGE",{text:e,senderId:n.id,timestamp:(new Date).getTime()});break;case"bot":Ba.dispatch(ae({title:"Message from Bot:",text:e,timeout:5e3}))}else Ga.warn('ignoring DataConsumer "message" (not a string)')})),window.DC=V,Ba.dispatch(re({id:V.id,sctpStreamParameters:V.sctpStreamParameters,label:V.label,protocol:V.protocol},A)),r(),e.next=77;break;case 73:e.prev=73,e.t2=e.catch(58),Ga.error('"newDataConsumer" request failed:%o',e.t2),Ba.dispatch(ae({type:"error",text:"Error creating a DataConsumer: ".concat(e.t2)}));case 77:return e.abrupt("break",143);case 78:try{W=t.data.peerId,null===(H=y._openTelemetry)||void 0===H||H.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Protoo REQ: enableMic",attributes:{peerId:W},status:1}),y._eventEmitter.emit("MIC_REQUESTED",{peerId:W}),r()}catch(e){Ga.error('"enableMic" request failed:%o',e),y._openTelemetry.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:e.message}}),y._emitError({code:3027,message:e.message})}return e.abrupt("break",143);case 80:return e.prev=80,e.next=83,null===(G=y._openTelemetry)||void 0===G?void 0:G.trace({spanName:"Protoo REQ: disableMic"});case 83:return Z=e.sent,e.next=86,y.disableMic(!1,Z);case 86:null===(q=y._openTelemetry)||void 0===q||q.completeSpan({span:Z,status:1,message:"Request Completed"}),r(),e.next=95;break;case 90:e.prev=90,e.t3=e.catch(80),null===(Q=y._openTelemetry)||void 0===Q||Q.completeSpan({span:Z,status:2,message:"disableMic request failed ".concat(e.t3)}),y._openTelemetry.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:e.t3.message}}),y._emitError({code:3028,message:e.t3.message});case 95:return e.abrupt("break",143);case 96:try{J=t.data.peerId,null===(X=y._openTelemetry)||void 0===X||X.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Protoo REQ: enableWebcam",attributes:{peerId:J},status:1}),y._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:J}),r()}catch(e){Ga.error('"enableWebcam" request failed:%o',e),y._openTelemetry.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:e.message}}),y._emitError({code:3029,message:e.message})}return e.abrupt("break",143);case 98:return e.prev=98,e.next=101,null===(ee=y._openTelemetry)||void 0===ee?void 0:ee.trace({spanName:"Protoo REQ: disableWebcam"});case 101:return Y=e.sent,e.next=104,y.disableWebcam(Y);case 104:null===(te=y._openTelemetry)||void 0===te||te.completeSpan({span:Y,status:1,message:"Request Completed"}),r(),e.next=113;break;case 108:e.prev=108,e.t4=e.catch(98),null===(ne=y._openTelemetry)||void 0===ne||ne.completeSpan({span:Y,status:2,message:"disableWebcam request failed ".concat(e.t4)}),y._openTelemetry.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:e.t4.message}}),y._emitError({code:3030,message:e.t4.message});case 113:return e.abrupt("break",143);case 114:return e.prev=114,ce=t.data,le=ce.peerId,ue=ce.state,de=ce.pinnedBy,e.next=118,null===(oe=y._openTelemetry)||void 0===oe?void 0:oe.trace({spanName:"Protoo REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:le,state:ue,pinnedBy:de})}});case 118:ie=e.sent,y._pinnedParticipants.has(le)||y._pinnedParticipants.set(le,{cam:!1,share:!1}),pe=y._pinnedParticipants.get(le),null!=ue.cam&&(pe.cam=ue.cam),null!=ue.share&&(pe.share=ue.share),y._pinnedParticipants.set(le,pe),y._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:le,state:ue,pinnedBy:de}),0==pe.share&&0==pe.cam&&y._pinnedParticipants.delete(le),ie.setAttributes({_pinnedParticipants:JSON.stringify(y._pinnedParticipants)}),null===(se=y._openTelemetry)||void 0===se||se.completeSpan({span:ie,status:1,message:"Request Completed"}),r(),e.next=136;break;case 131:throw e.prev=131,e.t5=e.catch(114),null===(fe=y._openTelemetry)||void 0===fe||fe.completeSpan({span:ie,status:2,message:"pinStateChanged request failed"}),y._openTelemetry.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:e.t5.message}}),e.t5;case 136:return e.abrupt("break",143);case 137:return y._eventEmitter.emit("SWITCH_ROOM",t.data),r(),e.abrupt("break",143);case 140:return r({peerId:y._peerId,statsData:y._stats}),y._stats={},e.abrupt("break",143);case 143:case"end":return e.stop()}}),e,null,[[17,43],[58,73],[80,90],[98,108],[114,131]])})));return function(t,r,n){return e.apply(this,arguments)}}()),this._protoo.on("notification",function(){var e=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o,s,c,u,d,p,f,h,m,v,g,_,b,w,S,E,P,k,T,R,C,x,D,I,L,M,A,j,N,F,B,U,V,H,W,$,Y,ee,re,ie,oe,se,ce,le,ue,de,pe,fe,he,me,ye,ve,ge,_e,be,we,Se,Ee,ke,Te,Re,Ce,Oe,xe,De,Ie;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug('proto "notification" event [method:%s, data:%o]',t.method,t.data),e.t0=t.method,e.next="error"===e.t0?4:"participantMediaStateChanged"===e.t0?9:"producerScore"===e.t0?10:"entryRequested"===e.t0?13:"entryResponded"===e.t0?19:"newPeer"===e.t0?27:"peerClosed"===e.t0?34:"peerDisplayNameChanged"===e.t0?40:"downlinkBwe"===e.t0?44:"consumerClosed"===e.t0?46:"consumerPaused"===e.t0?58:"consumerResumed"===e.t0?65:"consumerLayersChanged"===e.t0?72:"consumerScore"===e.t0?83:"dataConsumerClosed"===e.t0?86:"activeSpeaker"===e.t0?95:"recordingStateChanged"===e.t0?100:"recordingStarted"===e.t0?103:"recordingStopped"===e.t0?105:"livestreamStateChanged"===e.t0?107:"livestreamStarted"===e.t0?110:"livestreamStopped"===e.t0?112:"hlsStateChanged"===e.t0?114:"hlsPlayableStateChanged"===e.t0?117:"hlsStarted"===e.t0?119:"hlsStopped"===e.t0?122:"whiteboardStarted"===e.t0?124:"whiteboardStopped"===e.t0?127:"videoStatusChanged"===e.t0?129:"videoSeeked"===e.t0?131:"connectionOpen"===e.t0?134:"connectionClose"===e.t0?136:"connectionChatMessage"===e.t0?138:"connectionParticipantJoined"===e.t0?140:"connectionParticipantLeft"===e.t0?142:"pubsubMessage"===e.t0?144:"peerModeChanged"===e.t0?146:"restartIce"===e.t0?149:155;break;case 4:return n=t.data,y._eventEmitter.emit("ERROR",n),y._openTelemetry.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:n.message}}),null===(r=y._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:n.message},status:2}),e.abrupt("break",156);case 9:try{a=t.data,i=a.peerId,o=a.kind,s=a.newState,y._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:i,kind:o,newState:s}),"video"==o&&(null===(c=y._openTelemetry)||void 0===c||c.traceAutoComplete({spanName:"".concat(i," has ").concat(s?"enable":"disable"," ").concat(o),status:1}))}catch(e){Ga.error('"newProducer" request failed:%o',e),y._openTelemetry.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:e.message}})}case 10:return u=t.data,d=u.producerId,p=u.score,Ba.dispatch(z(d,p)),e.abrupt("break",156);case 13:return h=t.data,m=h.id,v=h.name,e.next=16,null===(f=y._openTelemetry)||void 0===f?void 0:f.trace({spanName:"Protoo Noti: entryRequested",span:y._joinSpan,attributes:{data:JSON.stringify({id:m,name:v})}});case 16:return g=e.sent,m!==y._peerId?(y._eventEmitter.emit("ENTRY_REQUESTED",{id:m,name:v}),null===(_=y._openTelemetry)||void 0===_||_.completeSpan({span:g,status:1,message:"EntryResponded Recieved"})):null===(b=y._openTelemetry)||void 0===b||b.completeSpan({span:g,status:2,message:"Entry Request Failed"}),e.abrupt("break",156);case 19:return S=t.data,E=S.id,P=S.decision,k=S.sessionId,y._tracesEnabled&&y._joinSpan.setAttribute("sessionId",k),y._eventEmitter.emit("ENTRY_RESPONDED",{id:E,decision:P}),e.next=24,null===(w=y._openTelemetry)||void 0===w?void 0:w.trace({spanName:"Protoo Noti: entryResponded",attributes:{data:JSON.stringify({id:E,decision:P})},span:y._joinSpan});case 24:return T=e.sent,E===y._peerId&&"allowed"===P?(y.joinRoom(),null===(R=y._openTelemetry)||void 0===R||R.completeSpan({span:T,status:1,message:"EntryResponded Recieved"})):null===(C=y._openTelemetry)||void 0===C||C.completeSpan({span:y._joinSpan,status:2,message:"Join Request Denied"}),e.abrupt("break",156);case 27:x=t.data,D=Z(Fa(Fa({},x),{},{consumers:[],dataConsumers:[]})),Ba.dispatch(D),y._eventEmitter.emit(D.type,D.payload),Ba.dispatch(ae({text:"".concat(x.displayName," has joined the room")}));try{null===(I=y._openTelemetry)||void 0===I||I.traceAutoComplete({spanName:"Protoo Noti: newPeer ".concat(x.displayName),attributes:{peerData:JSON.stringify(x)}})}catch(e){y._openTelemetry.pushLogs({logText:"Error Protoo Noti: newPeer",logType:"ERROR",attributes:{error:e.message}}),console.error(e)}return e.abrupt("break",156);case 34:return M=t.data.peerId,A=G(M),Ba.dispatch(A),y._eventEmitter.emit(A.type,A.payload),null===(L=y._openTelemetry)||void 0===L||L.traceAutoComplete({spanName:"Protoo Noti: peerClosed for ".concat(M)}),e.abrupt("break",156);case 40:return j=t.data,N=j.peerId,F=j.displayName,B=j.oldDisplayName,Ba.dispatch(q(F,N)),Ba.dispatch(ae({text:"".concat(B," is now ").concat(F)})),e.abrupt("break",156);case 44:return Ga.debug("'downlinkBwe' event:%o",t.data),e.abrupt("break",156);case 46:if(V=t.data.consumerId,H=y._consumers.get(V)){e.next=50;break}return e.abrupt("break",156);case 50:return H.close(),y._consumers.delete(V),W=H.appData.peerId,$=K(V,W),Ba.dispatch($),y._eventEmitter.emit($.type,$.payload),null===(U=y._openTelemetry)||void 0===U||U.traceAutoComplete({spanName:"Protoo Noti: consumerClosed for ".concat(V),attributes:{consumerData:JSON.stringify(H)}}),e.abrupt("break",156);case 58:if(Y=t.data.consumerId,ee=y._consumers.get(Y)){e.next=62;break}return e.abrupt("break",156);case 62:return ee.pause(),Ba.dispatch(Q(Y,"remote")),e.abrupt("break",156);case 65:if(re=t.data.consumerId,ie=y._consumers.get(re)){e.next=69;break}return e.abrupt("break",156);case 69:return ie.resume(),Ba.dispatch(X(re,"remote")),e.abrupt("break",156);case 72:if(oe=t.data,se=oe.consumerId,ce=oe.spatialLayer,le=oe.temporalLayer,(ue=y._consumers.get(se)).currentSpatialLayer=ce,ue.currentTemporalLayer=le,ue){e.next=78;break}return e.abrupt("break",156);case 78:return ue.appData.encodings.length>1?(y._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:ue.appData.peerId,prevQuality:ue.spatialLayers-1-ue.currentSpatialLayer==0?"HIGH":ue.spatialLayers-1-ue.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:ue.spatialLayers-1-ce==0?"HIGH":ue.spatialLayers-1-ce==1?"MEDIUM":"LOW"}),y._openTelemetry.pushLogs({logText:"Consumer Peer ".concat(ue.appData.peerId," changed to ").concat(ue.spatialLayers-1-ce==0?"HIGH":ue.spatialLayers-1-ce==1?"MEDIUM":"LOW",", previous quality was ").concat(ue.spatialLayers-1-ue.currentSpatialLayer==0?"HIGH":ue.spatialLayers-1-ue.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{consumerId:se}})):(y._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:ue.appData.peerId,prevQuality:"HIGH",currentQuality:"HIGH"}),y._openTelemetry.pushLogs({logText:"Consumer Peer ".concat(ue.appData.peerId," changed to HIGH, previous quality was HIGH"),logType:"INFO",attributes:{consumerId:se}})),ue.currentSpatialLayer=ce,ue.currentTemporalLayer=le,Ba.dispatch(J(se,ce,le)),e.abrupt("break",156);case 83:return de=t.data,pe=de.consumerId,fe=de.score,Ba.dispatch(te(pe,fe)),e.abrupt("break",156);case 86:if(he=t.data.dataConsumerId,me=y._dataConsumers.get(he)){e.next=90;break}return e.abrupt("break",156);case 90:return me.close(),y._dataConsumers.delete(he),ye=me.appData.peerId,Ba.dispatch(ne(he,ye)),e.abrupt("break",156);case 95:return ve=t.data.peerId,ge=O(ve),Ba.dispatch(ge),y._eventEmitter.emit(ge.type,ge.payload),e.abrupt("break",156);case 100:return y._eventEmitter.emit("RECORDING_STATE_CHANGED",t.data),null===(_e=y._openTelemetry)||void 0===_e||_e.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(t.data.status),attributes:{data:JSON.stringify(t.data)},status:1}),e.abrupt("break",156);case 103:return y._eventEmitter.emit("RECORDING_STARTED",{}),e.abrupt("break",156);case 105:return y._eventEmitter.emit("RECORDING_STOPPED",{}),e.abrupt("break",156);case 107:return y._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",t.data),null===(be=y._openTelemetry)||void 0===be||be.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(t.data.status),attributes:{data:JSON.stringify(t.data)},status:1}),e.abrupt("break",156);case 110:return y._eventEmitter.emit("LIVESTREAM_STARTED",{}),e.abrupt("break",156);case 112:return y._eventEmitter.emit("LIVESTREAM_STOPPED",{}),e.abrupt("break",156);case 114:return y._eventEmitter.emit("HLS_STATE_CHANGED",t.data),null===(we=y._openTelemetry)||void 0===we||we.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(t.data.status),attributes:{data:JSON.stringify(t.data)},status:1}),e.abrupt("break",156);case 117:return t.data.isPlayable&&(y._eventEmitter.emit("HLS_STATE_CHANGED",Fa(Fa({},t.data),{},{status:Pe.o.HLS_PLAYABLE})),null===(Se=y._openTelemetry)||void 0===Se||Se.traceAutoComplete({spanName:"Protoo Noti: hlsPlayableStateChanged",status:1})),e.abrupt("break",156);case 119:return Ee=t.data.downstreamUrl,y._eventEmitter.emit("HLS_STARTED",Ee),e.abrupt("break",156);case 122:return y._eventEmitter.emit("HLS_STOPPED",{}),e.abrupt("break",156);case 124:return ke=t.data.state,y._eventEmitter.emit("WHITEBOARD_STARTED",{state:ke}),e.abrupt("break",156);case 127:return y._eventEmitter.emit("WHITEBOARD_STOPPED",{}),e.abrupt("break",156);case 129:return y._eventEmitter.emit("VIDEO_STATE_CHANGED",t.data),e.abrupt("break",156);case 131:return Te=t.data.currentTime,y._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Te}),e.abrupt("break",156);case 134:return y._eventEmitter.emit("CONNECTION_OPEN",t.data),e.abrupt("break",156);case 136:return y._eventEmitter.emit("CONNECTION_CLOSE",t.data),e.abrupt("break",156);case 138:return y._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",t.data),e.abrupt("break",156);case 140:return y._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",t.data),e.abrupt("break",156);case 142:return y._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",t.data),e.abrupt("break",156);case 144:return y._eventEmitter.emit("PUBSUB_MESSAGE",t.data),e.abrupt("break",156);case 146:return y._eventEmitter.emit("PEER_MODE_CHANGED",t.data),null===(Re=y._openTelemetry)||void 0===Re||Re.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(t.data)},status:1}),e.abrupt("break",156);case 149:return Oe=t.data,xe=Oe.transportId,De=Oe.iceParameters,e.next=152,null===(Ce=y._openTelemetry)||void 0===Ce?void 0:Ce.trace({spanName:"Protoo Noti: restartIce for transportId :".concat(xe),attributes:{iceParameters:JSON.stringify(De)}});case 152:return Ie=e.sent,y.handleRemoteRestartIce({transportId:xe,iceParameters:De,internalSpan:Ie}),e.abrupt("break",156);case 155:Ga.error('unknown protoo notification.method "%s"',t.method);case 156:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 28:case"end":return e.stop()}}),e,this)}))),function(){return zt.apply(this,arguments)})},{key:"requestEntry",value:(Ut=(0,a.Z)(l().mark((function e(){var t,r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"Requesting Entry",span:this._joinSpan});case 2:return n=e.sent,e.next=5,this._protoo.request("requestEntry",{name:this._displayName});case 5:null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:n,status:1,message:"Entry Requested Successfully"});case 6:case"end":return e.stop()}}),e,this)}))),function(){return Ut.apply(this,arguments)})},{key:"respondEntry",value:(Bt=(0,a.Z)(l().mark((function e(t,r){var n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=this._openTelemetry)||void 0===n?void 0:n.trace({spanName:"Responding Entry",attributes:{peerId:t,decision:r},span:this._joinSpan});case 2:return i=e.sent,e.next=5,this._protoo.request("respondEntry",{id:t,decision:r});case 5:null===(a=this._openTelemetry)||void 0===a||a.completeSpan({message:"Entry Responded Successfully",span:i,status:1});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return Bt.apply(this,arguments)})},{key:"startRecording",value:(Ft=(0,a.Z)(l().mark((function e(t,r,n){var a,i,o,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("startRecording()"),e.next=3,null===(a=this._openTelemetry)||void 0===a?void 0:a.trace({spanName:"startRecording() Start",attributes:{webhookUrl:t||"webhookUrl Not Specify",awsDirPath:r||"awsDirPath Not Specify",config:n?JSON.stringify(n):"config Not Specify"}});case 3:return o=e.sent,e.prev=4,e.next=7,this._protoo.request("startRecording",{webhookUrl:t,awsDirPath:r,config:n});case 7:e.next=15;break;case 9:e.prev=9,e.t0=e.catch(4),Ga.error("startRecording() | failed:%o",e.t0),null===(s=this._openTelemetry)||void 0===s||s.completeSpan({span:o,status:2,message:"startRecording() failed"}),this._openTelemetry.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:e.t0.message}}),this._emitError({code:3017,message:e.t0.message});case 15:null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:o,status:1,message:"startRecording() End"});case 16:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e,t,r){return Ft.apply(this,arguments)})},{key:"stopRecording",value:(Nt=(0,a.Z)(l().mark((function e(){var t,r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopRecording()"),e.next=3,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"stopRecording() Start"});case 3:return n=e.sent,e.prev=4,e.next=7,this._protoo.request("stopRecording",{});case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),null===(a=this._openTelemetry)||void 0===a||a.completeSpan({span:n,status:2,message:"stopRecording() failed"}),this._openTelemetry.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:e.t0.message}}),this._emitError({code:3018,message:e.t0.message});case 14:null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:n,status:1,message:"stopRecording() End"});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return Nt.apply(this,arguments)})},{key:"startLivestream",value:(jt=(0,a.Z)(l().mark((function e(t,r){var n,a,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("startLivestream()"),e.next=3,null===(n=this._openTelemetry)||void 0===n?void 0:n.trace({spanName:"startLivestream() Start",attributes:{outputs:t?JSON.stringify(t):"outputs Not Specify",config:r?JSON.stringify(r):"config Not Specify"}});case 3:return i=e.sent,e.prev=4,e.next=7,this._protoo.request("startLivestream",{outputs:t,config:r});case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:i,status:1,message:"startLivestream() End"}),this._openTelemetry.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:e.t0.message}}),this._emitError({code:3019,message:e.t0.message});case 14:null===(a=this._openTelemetry)||void 0===a||a.completeSpan({span:i,status:1,message:"startLivestream() End"});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e,t){return jt.apply(this,arguments)})},{key:"stopLivestream",value:(At=(0,a.Z)(l().mark((function e(){var t,r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopLivestream()"),e.next=3,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"stopLivestream() Start"});case 3:return n=e.sent,e.prev=4,e.next=7,this._protoo.request("stopLivestream",{});case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),this._openTelemetry.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:e.t0.message}}),null===(a=this._openTelemetry)||void 0===a||a.completeSpan({span:n,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:3020,message:e.t0.message});case 14:null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:n,status:1,message:"stopLivestream() End"});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return At.apply(this,arguments)})},{key:"startHls",value:(Mt=(0,a.Z)(l().mark((function e(t){var r,n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},Ga.debug("startHls()"),e.next=4,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"startHls() Start",attributes:{config:t?JSON.stringify(t):"config Not Specify"}});case 4:return a=e.sent,e.prev=5,e.next=8,this._protoo.request("startHls",{config:t});case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),this._openTelemetry.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:e.t0.message}}),null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:a,status:2,message:"Error startHls() failed"}),Ga.error("startHls() | failed:%o",e.t0);case 15:null===(n=this._openTelemetry)||void 0===n||n.completeSpan({span:a,status:1,message:"startHlsSpan() End"});case 16:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return Mt.apply(this,arguments)})},{key:"stopHls",value:(Lt=(0,a.Z)(l().mark((function e(){var t,r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopHls()"),e.next=3,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"stopHls() Start"});case 3:return n=e.sent,e.prev=4,e.next=7,this._protoo.request("stopHls",{});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),this._openTelemetry.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:e.t0.message}}),null===(a=this._openTelemetry)||void 0===a||a.completeSpan({span:n,status:2,message:"Error stopHls() failed"});case 13:null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:n,status:1,message:"stopHls() End"});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return Lt.apply(this,arguments)})},{key:"startWhiteboard",value:(It=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("startWhiteboard()"),e.prev=1,e.next=4,this._protoo.request("startWhiteboard",{});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),Ga.error("startWhiteboard() | failed:%o",e.t0),this._emitError({code:3021,message:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return It.apply(this,arguments)})},{key:"stopWhiteboard",value:(Dt=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopWhiteboard()"),e.prev=1,e.next=4,this._protoo.request("stopWhiteboard",{});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),Ga.error("stopWhiteboard() | failed:%o",e.t0),this._emitError({code:3022,message:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return Dt.apply(this,arguments)})},{key:"pinStateChange",value:(xt=(0,a.Z)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.peerId,a=t.state,null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Pin state Change for ".concat(n),attributes:{state:a?JSON.stringify(a):null},status:1}),e.prev=2,e.next=5,this._protoo.request("pinStateChanged",{peerId:n,state:a});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("pinStateChange() | failed");case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return xt.apply(this,arguments)})},{key:"startVideo",value:(Ot=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.link,Ga.debug("startVideo()"),this._openTelemetry.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),e.prev=3,e.next=6,this._protoo.request("startVideo",{link:r});case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),this._openTelemetry.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("startVideo() | failed:%o",e.t0),this._emitError({code:3023,message:e.t0.message});case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e){return Ot.apply(this,arguments)})},{key:"stopVideo",value:(Ct=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopVideo()"),this._openTelemetry.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),e.prev=2,e.next=5,this._protoo.request("stopVideo",{});case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("stopVideo() | failed:%o",e.t0),this._emitError({code:3024,message:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return Ct.apply(this,arguments)})},{key:"pauseVideo",value:(Rt=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("pauseVideo()"),e.prev=1,e.next=4,this._protoo.request("pauseVideo",{currentTime:t});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),Ga.error("pauseVideo() | failed:%o",e.t0),this._emitError({code:3025,message:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return Rt.apply(this,arguments)})},{key:"resumeVideo",value:(Tt=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("resumeVideo()"),e.prev=1,e.next=4,this._protoo.request("resumeVideo",{});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),Ga.error("resumeVideo() | failed:%o",e.t0),this._emitError({code:3026,message:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return Tt.apply(this,arguments)})},{key:"seekVideo",value:(kt=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("seekVideo()"),e.prev=1,e.next=4,this._protoo.request("seekVideo",{currentTime:t});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),Ga.error("seekVideo() | failed:%o",e.t0),this._emitError({code:3031,message:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return kt.apply(this,arguments)})},{key:"enablePeerMic",value:(Pt=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Enabling peer ".concat(t," Mic"),status:1}),Ga.debug("enablePeerMic()"),e.prev=2,e.next=5,this._protoo.request("enablePeerMic",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("enablePeerMic() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return Pt.apply(this,arguments)})},{key:"disablePeerMic",value:(Et=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Disabling peer ".concat(t," Mic"),status:1}),Ga.debug("disablePeerMic()"),e.prev=2,e.next=5,this._protoo.request("disablePeerMic",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("disablePeerMic() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return Et.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(St=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("consumeWebcamStreams()"),this._openTelemetry.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:t}}),e.prev=2,e.next=5,this._protoo.request("consumeVideoStreams",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("consumeWebcamStreams() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return St.apply(this,arguments)})},{key:"consumeMicStreams",value:(wt=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("consumeMicStreams()"),this._openTelemetry.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:t}}),e.prev=2,e.next=5,this._protoo.request("consumeAudioStreams",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("consumeMicStreams() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return wt.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(bt=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopConsumingAudioStreams()"),this._openTelemetry.pushLogs({logText:"Error stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:t}}),e.prev=2,e.next=5,this._protoo.request("stopConsumingAudioStreams",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("stopConsumingMicStreams() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return bt.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(_t=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("stopConsumingWebcamStreams()"),this._openTelemetry.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:t}}),e.prev=2,e.next=5,this._protoo.request("stopConsumingVideoStreams",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("stopConsumingWebcamStreams() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return _t.apply(this,arguments)})},{key:"changeMode",value:(gt=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o,c,u,p,f,h,m,y,v,g,_,b,w,S,E,P,T,R,C,O,I,L=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"changeMode() Calling with mode : ".concat(t)});case 2:if(n=e.sent,a=this._mode,e.prev=4,a!==t){e.next=10;break}throw n.setAttributes({message:"You are already in ".concat(t," mode")}),null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:n,status:2,message:"changeMode() Ending"}),this._openTelemetry.pushLogs({logText:"You are already in ".concat(t," mode"),logType:"INFO"}),new Error("You are already in ".concat(t," mode"));case 10:if(this._mode=t,t!==Ee.S.CONFERENCE){e.next=42;break}return this._consume=!0,this._produce=!0,this._mediasoupDevice=new d.Device({handlerName:this._handlerName}),e.next=17,this._protoo.request("getRouterRtpCapabilities");case 17:return u=e.sent,null==n||n.setAttributes((0,s.Z)({},"routerRtpCapabilities",JSON.stringify(u).toString())),e.next=21,this._mediasoupDevice.load({routerRtpCapabilities:u});case 21:if(!this._produce){e.next=26;break}return e.next=24,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 24:p=e.sent,this.createProducerTransport(p,n);case 26:if(!this._consume){e.next=33;break}return e.next=29,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 29:f=e.sent,h=f.id,m=f.iceParameters,y=f.iceCandidates,v=f.dtlsParameters,g=f.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:h,iceParameters:m,iceCandidates:y,dtlsParameters:v,sctpParameters:g,iceServers:this._iceServers}),this._recvTransport.on("connect",(function(e,t,r){var n=e.dtlsParameters;L._protoo.request("connectWebRtcTransport",{transportId:L._recvTransport.id,dtlsParameters:n}).then(t).catch(r)}));case 33:return null===(o=this._openTelemetry)||void 0===o||o.traceAutoComplete({spanName:"Sending changeMode request to server",status:1}),e.next=36,this._protoo.request("changeMode",{mode:t});case 36:this._produce&&(Ba.dispatch(D({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),_=k(),this._webcamEnabled&&(!_||_.webcamEnabled||this._externalVideo)&&this.enableWebcam(this.customCameraVideoTrack,n),this.enableChatDataProducer()),window.SHOW_INFO&&(b=Ba.getState(),w=b.me,Ba.dispatch(x(w.id))),null===(c=this._openTelemetry)||void 0===c||c.traceAutoComplete({spanName:"Emitting PEER_MODE_CHANGED for Peer : ".concat(this._peerId," "),status:1}),this._eventEmitter.emit("PEER_MODE_CHANGED",{peerId:this._peerId,mode:"CONFERENCE"}),e.next=58;break;case 42:if(t!==Ee.S.VIEWER){e.next=58;break}return null===(S=this._openTelemetry)||void 0===S||S.traceAutoComplete({spanName:"Sending changeMode request to server",status:1}),e.next=46,this._protoo.request("changeMode",{mode:t});case 46:return this._consume=!1,this._produce=!1,this._dataConsumers.clear(),e.next=51,null===(E=this._openTelemetry)||void 0===E?void 0:E.trace({spanName:"Closing Trasnport",span:n});case 51:O=e.sent,null===(P=this._sendTransport)||void 0===P||P.close(),this._sendTransport=null,null===(T=this._recvTransport)||void 0===T||T.close(),this._recvTransport=null,null===(R=this._openTelemetry)||void 0===R||R.completeSpan({span:O,status:1,message:"Closed Trasnport"}),null===(C=this._openTelemetry)||void 0===C||C.completeSpan({span:O,status:1,message:"changeMode() Ending"});case 58:e.next=64;break;case 60:e.prev=60,e.t0=e.catch(4),this._openTelemetry.pushLogs({logText:"Error changeMode(".concat(t,") | failed"),logType:"ERROR",attributes:{error:e.t0.message}}),null===(I=this._openTelemetry)||void 0===I||I.completeSpan({span:n,status:2,message:"changeMode(".concat(t,") | failed")});case 64:case"end":return e.stop()}}),e,this,[[4,60]])}))),function(e){return gt.apply(this,arguments)})},{key:"enablePeerWebcam",value:(vt=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Enabling peer ".concat(t," Webcam"),status:1}),Ga.debug("enablePeerWebcam()"),e.prev=2,e.next=5,this._protoo.request("enablePeerWebcam",{peerId:t});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("enablePeerWebcam() | failed:%o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return vt.apply(this,arguments)})},{key:"disablePeerWebcam",value:(yt=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Disabling peer ".concat(t," Webcam"),status:1}),Ga.debug("disablePeerWebcam()"),e.prev=2,e.next=5,this._protoo.request("disablePeerWebcam",{peerId:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this._openTelemetry.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:e.t0.message}});case 10:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return yt.apply(this,arguments)})},{key:"enableMic",value:(mt=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f,h,m,y,v,g,_,b,w,S,E,P,k,T,R,C,O,x,D,I,L,M,A,j=this,N=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N.length>0&&void 0!==N[0]?N[0]:void 0,n=N.length>1&&void 0!==N[1]?N[1]:void 0,e.next=4,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"enableMic() Calling ".concat(r?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:r?JSON.stringify(r):"Not Specify Custom Track"},span:n||null});case 4:if(a=e.sent,Ga.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){e.next=23;break}return e.next=10,null===(i=this._openTelemetry)||void 0===i?void 0:i.trace({spanName:"Mic Producer found",span:a});case 10:return c=e.sent,r&&(null===(u=this._openTelemetry)||void 0===u||u.traceAutoComplete({spanName:"Stopping customAudioTrack",status:1}),r.getTracks().forEach((function(e){e.stop()}))),null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:c,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),d=this._micProducer,e.next=17,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions});case 17:return this._micProducer=e.sent,p=F({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:d._appData.encodings,codecOptions:d._appData.codecOptions,instance:this._micProducer}),Ba.dispatch(p),this._eventEmitter.emit(p.type,p.payload),null===(s=this._openTelemetry)||void 0===s||s.completeSpan({span:a,status:1,message:"Enable Mic Successful"}),e.abrupt("return");case 23:if(this._mediasoupDevice.canProduce("audio")){e.next=27;break}return Ga.error("enableMic() | cannot produce audio"),null===(f=this._openTelemetry)||void 0===f||f.completeSpan({span:a,status:2,message:'enableMic() | cannot produce audio"'}),e.abrupt("return");case 27:if(e.prev=27,this._externalVideo){e.next=57;break}return Ga.debug("enableMic() | calling getUserMedia()"),e.next=32,this._updateMics(a);case 32:if(this._mic.device){e.next=36;break}throw null===(w=this._openTelemetry)||void 0===w||w.traceAutoComplete({spanName:"Mic Device Not Found",status:2}),this._openTelemetry.pushLogs({logText:"Error Mic Device Not Found",logType:"ERROR"}),new Error("no mic devices");case 36:try{r&&"ended"==(h=r.getAudioTracks()[0]).readyState&&(h=null,null===(S=this._openTelemetry)||void 0===S||S.traceAutoComplete({spanName:"Dispose Audio Custom Track, it is in ended state",status:2}))}catch(e){this._openTelemetry.pushLogs({logText:"Error Invalid Custom Audio Track Passed. Reverting to default Error",logType:"ERROR",attributes:{error:e.message}}),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(e))}if(h){e.next=55;break}return e.next=40,null===(E=this._openTelemetry)||void 0===E?void 0:E.trace({spanName:"Creating Track",span:a});case 40:return k=e.sent,e.prev=41,e.next=44,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 44:T=e.sent,e.next=53;break;case 47:return e.prev=47,e.t0=e.catch(41),this._openTelemetry.pushLogs({logText:"Error in getUserMedia for audio",logType:"ERROR",attributes:{error:JSON.stringify(e.t0)}}),null===(R=this._openTelemetry)||void 0===R||R.completeSpan({span:a,status:2,message:"Error in getUserMedia for audio"}),"Permission denied"===e.t0.message||"NotAllowedError"===e.t0.name?(this._openTelemetry.pushLogs({logText:"Error Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(error),logType:"ERROR"}),this._emitError(be.H.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED)):this._emitError(be.H.ERROR_GET_AUDIO_MEDIA),e.abrupt("return");case 53:h=T.getAudioTracks()[0],null===(P=this._openTelemetry)||void 0===P||P.completeSpan({message:"Audio Track Generated",span:k,status:1});case 55:e.next=61;break;case 57:return e.next=59,this._getExternalVideoStream();case 59:C=e.sent,h=C.getAudioTracks()[0].clone();case 61:return e.next=63,null===(m=this._openTelemetry)||void 0===m?void 0:m.trace({spanName:"Generating Producer Configuration",span:a});case 63:return O=e.sent,x={opusStereo:1,opusDtx:1},r&&(D=r.encoderConfig?se.v.audioProfiles[r.encoderConfig]:se.v.audioProfiles.speech_standard,x={opusStereo:D.stereo?1:0,opusFec:D.fec?1:0,opusDtx:D.dtx?1:0,opusMaxPlaybackRate:D.maxPlaybackRate,opusPtime:D.packetTime}),L={encodings:I=[{networkPriority:"high"}],codecOptions:x},null===(y=this._openTelemetry)||void 0===y||y.traceAutoComplete({spanName:"Generated AppData",attributes:{appData:JSON.stringify(L)},status:1}),null===(v=this._openTelemetry)||void 0===v||v.completeSpan({span:O,status:1,message:"Producer Configuration Generated"}),e.next=73,null===(g=this._openTelemetry)||void 0===g?void 0:g.trace({spanName:"Creating Mic Producer",span:a});case 73:return O=e.sent,e.next=76,this._sendTransport.produce({track:h,encodings:I,codecOptions:x,appData:L});case 76:this._micProducer=e.sent,M=F({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:I,codecOptions:x,instance:this._micProducer}),Ba.dispatch(M),this._eventEmitter.emit(M.type,M.payload),this._micProducer.on("transportclose",(function(){var e,t=B(j._micProducer.id);Ba.dispatch(t),j._eventEmitter.emit(t.type,t.payload),null===(e=j._micProducer)||void 0===e||e.close(),j._micProducer=null})),this._micProducer.on("trackended",(function(){var e;null===(e=j._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",status:2}),Ba.dispatch(ae({type:"error",text:"Microphone disconnected!"})),j.disableMic(!1,a).catch((function(){}))})),null===(_=this._openTelemetry)||void 0===_||_.completeSpan({span:O,status:1,message:"Mic Producer Created"}),null===(b=this._openTelemetry)||void 0===b||b.completeSpan({span:a,status:1,message:"Enable Mic Successful"}),e.next=95;break;case 86:return e.prev=86,e.t1=e.catch(27),null===(A=this._openTelemetry)||void 0===A||A.completeSpan({span:a,status:2,message:"Error enabling microphone: ".concat(e.t1)}),this._openTelemetry.pushLogs({logText:"Error enabling microphone",logType:"ERROR",attributes:{error:e.t1.message}}),Ga.error("enableMic() | failed:%o",e.t1),Ba.dispatch(ae({type:"error",text:"Error enabling microphone: ".concat(e.t1)})),e.next=94,this._protoo.request("produceError",{mediaType:"audio",message:e.t1.message});case 94:h&&h.stop();case 95:case"end":return e.stop()}}),e,this,[[27,86],[41,47]])}))),function(){return mt.apply(this,arguments)})},{key:"disableMic",value:(ht=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f,h,m,y,v,g,_,b=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>0&&void 0!==b[0]&&b[0],a=b.length>1&&void 0!==b[1]?b[1]:void 0,Ga.debug("disableMic()"),e.next=5,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"disableMic() Calling",status:1,span:a||null});case 5:if(i=e.sent,this._micProducer){e.next=9;break}return null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:i,status:2,message:"Mic Producer Not found"}),e.abrupt("return");case 9:return e.next=11,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"Closing Mic Producer",span:i,status:1});case 11:if(s=e.sent,this._micEnabled=!1,!this._micProducer||n){e.next=35;break}return e.next=16,null===(c=this._openTelemetry)||void 0===c?void 0:c.trace({spanName:"Pausing Mic Producer",span:s,status:1});case 16:return p=e.sent,this._micProducer.pause(),f=B(this._micProducer.id),null===(u=this._openTelemetry)||void 0===u||u.completeSpan({span:p,status:1,message:"Pause Mic Successfully"}),Ba.dispatch(f),this._eventEmitter.emit(f.type,f.payload),e.prev=22,e.next=25,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 25:null===(h=this._openTelemetry)||void 0===h||h.completeSpan({span:s,status:1,message:"Requested Server to Close Producer"}),e.next=33;break;case 28:e.prev=28,e.t0=e.catch(22),Ba.dispatch(ae({type:"error",text:"Error closing server-side mic Producer: ".concat(e.t0)})),null===(m=this._openTelemetry)||void 0===m||m.completeSpan({span:i,status:2,message:"Error closing server-side mic Producer closeProducer :".concat(n)}),this._openTelemetry.pushLogs({logText:"Error closing server-side mic Producer closeProducer :".concat(n),logType:"ERROR",attributes:{error:e.t0.message}});case 33:return null===(d=this._openTelemetry)||void 0===d||d.completeSpan({span:i,status:1,message:"Mic Disabled Successfully"}),e.abrupt("return");case 35:return this._micProducer.close(),y=B(this._micProducer.id),Ba.dispatch(y),this._eventEmitter.emit(y.type,y.payload),e.prev=39,e.next=42,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 42:null===(v=this._openTelemetry)||void 0===v||v.completeSpan({span:s,status:1,message:"Requested Server to Close Producer"}),null===(g=this._openTelemetry)||void 0===g||g.completeSpan({span:i,status:1,message:"Mic Disabled Successfully"}),e.next=51;break;case 46:e.prev=46,e.t1=e.catch(39),Ba.dispatch(ae({type:"error",text:"Error closing server-side mic Producer: ".concat(e.t1)})),null===(_=this._openTelemetry)||void 0===_||_.completeSpan({span:i,status:2,message:"Error closing server-side mic Producer closeProducer :".concat(n)}),this._openTelemetry.pushLogs({logText:"Error closing server-side mic Producer closeProducer :".concat(n),logType:"ERROR",attributes:{error:e.t1.message}});case 51:this._micProducer=null;case 52:case"end":return e.stop()}}),e,this,[[22,28],[39,46]])}))),function(){return ht.apply(this,arguments)})},{key:"muteMic",value:(ft=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),e.prev=3,e.next=6,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 6:Ba.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),Ga.error("muteMic() | failed: %o",e.t0),this._openTelemetry.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error pausing server-side mic Producer: ".concat(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return ft.apply(this,arguments)})},{key:"unmuteMic",value:(pt=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),e.prev=3,e.next=6,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 6:Ba.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),Ga.error("unmuteMic() | failed: %o",e.t0),this._openTelemetry.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error resuming server-side mic Producer: ".concat(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return pt.apply(this,arguments)})},{key:"enableWebcam",value:(dt=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f,h,m,y,v,g,_,b,w,S,E,P,k,T,R,C,O,x,D,I,L,M,A=this,j=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.length>0&&void 0!==j[0]?j[0]:void 0,n=j.length>1&&void 0!==j[1]?j[1]:void 0,e.next=4,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"enableWebcam() Calling ".concat(r?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:r?JSON.stringify(r):"Not Specify Custom Track"},span:n||null});case 4:if(a=e.sent,Ga.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){e.next=10;break}return null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:a,status:2,message:"Webcam Producer found"}),e.abrupt("return");case 10:if(this._mediasoupDevice.canProduce("video")){e.next=14;break}return null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:a,status:2,message:"enableWebcam() | cannot produce video"}),Ga.error("enableWebcam() | cannot produce video"),e.abrupt("return");case 14:if(Ba.dispatch(H(!0)),u=this._webcam.resolution,e.prev=16,this._externalVideo){e.next=56;break}return e.next=20,this._updateWebcams(a);case 20:if(c=this._webcam.device){e.next=25;break}throw null===(v=this._openTelemetry)||void 0===v||v.traceAutoComplete({spanName:"Webcam Device Not Found",status:2}),this._openTelemetry.pushLogs({logText:"Error Webcam Device Not Found",logType:"ERROR"}),new Error("no webcam devices");case 25:Ga.debug("enableWebcam() | calling getUserMedia()");try{r&&"ended"==(s=r.getVideoTracks()[0]).readyState&&(s=null,null===(g=this._openTelemetry)||void 0===g||g.traceAutoComplete({spanName:"Dispose Video Custom Track, it is in ended state",status:2}))}catch(e){this._openTelemetry.pushLogs({logText:"Error Invalid Custom Track Passed. Reverting to default Error",logType:"ERROR",attributes:{error:e.message}}),console.log("Invalid Custom Track Passed. Reverting to default Error: ".concat(e))}if(s){e.next=54;break}return e.next=30,null===(_=this._openTelemetry)||void 0===_?void 0:_.trace({spanName:"Creating Track",span:a});case 30:if(b=e.sent,e.prev=31,"hd"!=this._webcam.resolution){e.next=39;break}return e.next=35,we.VideoSDK.createCameraVideoTrack({cameraId:c.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast});case 35:r=e.sent,b.setAttributes({customVideoTrackConfig:JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast})}),e.next=43;break;case 39:return e.next=41,we.VideoSDK.createCameraVideoTrack({cameraId:c.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 41:r=e.sent,b.setAttributes({customVideoTrackConfig:JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast})});case 43:s=r.getVideoTracks()[0],null===(w=this._openTelemetry)||void 0===w||w.completeSpan({message:"Video Track Generated",span:b,status:1}),e.next=54;break;case 47:return e.prev=47,e.t0=e.catch(31),this._openTelemetry.pushLogs({logText:"Error Creating VideoTrack",logType:"ERROR",attributes:{error:e.t0.message}}),null===(S=this._openTelemetry)||void 0===S||S.completeSpan({message:"Error Creating VideoTrack",span:a,status:2}),console.log("Error Creating VideoTrack: ",e.t0),"Permission denied"===e.t0.message||"NotAllowedError"===e.t0.name?this._emitError(be.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(be.H.ERROR_GET_VIDEO_MEDIA),e.abrupt("return");case 54:e.next=61;break;case 56:return c={label:"external video"},e.next=59,this._getExternalVideoStream();case 59:E=e.sent,s=E.getVideoTracks()[0].clone();case 61:return e.next=63,null===(d=this._openTelemetry)||void 0===d?void 0:d.trace({spanName:"Generating Producer Configuration",span:a});case 63:if(P=e.sent,R={videoGoogleStartBitrate:1e3},!this._forceH264){e.next=72;break}if(T=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/h264"===e.mimeType.toLowerCase()}))){e.next=70;break}throw this._openTelemetry.pushLogs({logText:"Error desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 70:e.next=77;break;case 72:if(!this._forceVP9){e.next=77;break}if(T=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/vp9"===e.mimeType.toLowerCase()}))){e.next=77;break}throw this._openTelemetry.pushLogs({logText:"Error desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 77:s?(C=s.getConstraints(),k=ge(!1,C.width,C.height,{simulcast:r.multiStream})):this._useSimulcast&&(O=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video"===e.kind})),k=this._forceVP9&&T||"video/vp9"===O.mimeType.toLowerCase()?Ha:Va[this._webcam.resolution]),x={};try{x={encodings:k,width:r?null===(D=s)||void 0===D?void 0:D.getConstraints().width:za[u].width.ideal,height:r?null===(I=s)||void 0===I?void 0:I.getConstraints().height:za[u].height.ideal}}catch(e){this._openTelemetry.pushLogs({logText:"Error Enable Webcam AppData",logType:"ERROR",attributes:{error:e.message}}),console.log(e)}return null===(p=this._openTelemetry)||void 0===p||p.traceAutoComplete({spanName:"Track Generated with height ".concat(x.height," and width ").concat(x.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(x)},status:1}),null===(f=this._openTelemetry)||void 0===f||f.completeSpan({span:P,status:1,message:"Producer Configuration Generated"}),e.next=84,null===(h=this._openTelemetry)||void 0===h?void 0:h.trace({spanName:"Creating Webcam Producer",span:a});case 84:return P=e.sent,e.next=87,this._sendTransport.produce({track:s,encodings:k,codecOptions:R,codec:T,appData:x});case 87:this._webcamProducer=e.sent,L=F({id:this._webcamProducer.id,deviceLabel:c.label,type:this._getWebcamType(c),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer}),Ba.dispatch(L),this._eventEmitter.emit(L.type,L.payload),this._webcamProducer.on("transportclose",(function(){var e,t=B(A._webcamProducer.id);Ba.dispatch(t),A._eventEmitter.emit(t.type,t.payload),null===(e=A._webcamProducer)||void 0===e||e.close(),A._webcamProducer=null})),this._webcamProducer.on("trackended",(function(){var e;null===(e=A._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:" this._webcamProducer trackended or Webcam disconnected!",status:2}),Ba.dispatch(ae({type:"error",text:"Webcam disconnected!"})),A.disableWebcam(a).catch((function(){}))})),null===(m=this._openTelemetry)||void 0===m||m.completeSpan({span:P,status:1,message:"Webcam Producer Created"}),null===(y=this._openTelemetry)||void 0===y||y.completeSpan({span:a,status:1,message:"Enable Webcam Successful"}),e.next=106;break;case 97:return e.prev=97,e.t1=e.catch(16),console.log("enableWebcam() | failed:%o",e.t1),this._openTelemetry.pushLogs({logText:"Error enabling webcam",logType:"ERROR",attributes:{error:e.t1.message}}),null===(M=this._openTelemetry)||void 0===M||M.completeSpan({span:a,status:2,message:"Error enabling webcam"}),Ba.dispatch(ae({type:"error",text:"Error enabling webcam: ".concat(e.t1)})),e.next=105,this._protoo.request("produceError",{mediaType:"video",message:e.t1.message});case 105:s&&s.stop();case 106:Ba.dispatch(H(!1));case 107:case"end":return e.stop()}}),e,this,[[16,97],[31,47]])}))),function(){return dt.apply(this,arguments)})},{key:"disableWebcam",value:(ut=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>0&&void 0!==p[0]?p[0]:void 0,e.next=3,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"disableWebcam() Calling",status:1,span:a||null});case 3:if(i=e.sent,Ga.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){e.next=9;break}return null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:i,status:2,message:"Webcam Producer Not found"}),e.abrupt("return");case 9:return e.next=11,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"Closing Webcam Producer",span:i,status:1});case 11:return s=e.sent,this._webcamProducer.close(),c=B(this._webcamProducer.id),Ba.dispatch(c),this._eventEmitter.emit(c.type,c.payload),e.prev=16,e.next=19,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 19:null===(u=this._openTelemetry)||void 0===u||u.completeSpan({span:s,status:1,message:"Requested Server to Close Producer"}),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(16),this._openTelemetry.pushLogs({logText:"Error closing server-side webcam Producer",logType:"ERROR",attributes:{error:e.t0.message}}),null===(d=this._openTelemetry)||void 0===d||d.completeSpan({span:i,status:2,message:"Error closing server-side webcam Producer: ".concat(e.t0)}),Ba.dispatch(ae({type:"error",text:"Error closing server-side webcam Producer: ".concat(e.t0)}));case 27:this._webcamProducer=null,null===(n=this._openTelemetry)||void 0===n||n.completeSpan({span:i,status:1,message:"Webcam Disabled Successfully"});case 29:case"end":return e.stop()}}),e,this,[[16,22]])}))),function(){return ut.apply(this,arguments)})},{key:"getMics",value:(lt=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,this._updateMics();case 4:this._mics.forEach((function(e,r){t.push({deviceId:r,label:e.label})})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),Ga.error("getMics() | Error",e.t0),this._openTelemetry.pushLogs({logText:"Error getMics() | Error",logType:"ERROR",attributes:{error:e.t0.message}});case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return lt.apply(this,arguments)})},{key:"changeMic",value:(ct=(0,a.Z)(l().mark((function e(t){var r,a,i,o,s,c,u,d,p,f,h,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"changeMic() Calling"});case 2:if(a=e.sent,e.prev=3,"object"!=n(t)){e.next=12;break}return a.setAttributes({customTrackConfig:JSON.stringify(t)}),e.next=8,this.disableMic(!0,a);case 8:return e.next=10,this.enableMic(t,a);case 10:e.next=32;break;case 12:return c=t,e.next=15,this._updateMics();case 15:return u=Array.from(this._mics.keys()),d=u.length,p=this._mic.device?this._mic.device.deviceId:void 0,null!=c&&null!=c?f=u.indexOf(c):(f=u.indexOf(p))<d-1?f++:f=0,this._mic.device=this._mics.get(u[f]),e.next=22,null===(i=this._openTelemetry)||void 0===i?void 0:i.trace({spanName:"Getting Selected Mic",span:a,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}});case 22:if(h=e.sent,this._mic.device){e.next=26;break}throw this._openTelemetry.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 26:return e.next=28,this.disableMic(!0,a);case 28:return e.next=30,this.enableMic(void 0,a);case 30:null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:h,status:1,message:"Done"}),null===(s=this._openTelemetry)||void 0===s||s.completeSpan({span:a,status:1,message:"changeMic() Ending"});case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(3),null===(m=this._openTelemetry)||void 0===m||m.completeSpan({span:a,status:2,message:"changeMic() | Error ".concat(e.t0)}),this._openTelemetry.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:e.t0.message}});case 38:case"end":return e.stop()}}),e,this,[[3,34]])}))),function(e){return ct.apply(this,arguments)})},{key:"getWebcams",value:(st=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,this._updateWebcams();case 4:this._webcams.forEach((function(e,r){t.push({deviceId:r,label:e.label,facingMode:e.facing||"environment"})})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),Ga.error("getWebcams() | failed %o",e.t0),this._openTelemetry.pushLogs({logText:"Error getWebcams() | failed",logType:"ERROR",attributes:{error:e.t0.message}});case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return st.apply(this,arguments)})},{key:"replaceWebcamStream",value:(ot=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._webcamProducer){e.next=7;break}return r=t.getVideoTracks()[0],e.next=4,this._webcamProducer.replaceTrack({track:r});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),e.next=11;break;case 7:return e.next=9,this.disableWebcam();case 9:return e.next=11,this.enableWebcam(t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return ot.apply(this,arguments)})},{key:"changeWebcam",value:(it=(0,a.Z)(l().mark((function e(t){var r,a,i,o,s,c,u,d,p,f,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"changeWebcam() Calling"});case 2:if(a=e.sent,Ba.dispatch(H(!0)),"object"!==n(t)){e.next=20;break}return a.setAttributes({customTrackConfig:JSON.stringify(t)}),e.prev=6,e.next=9,this.disableWebcam(a);case 9:return e.next=11,this.enableWebcam(t,a);case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),Ga.error("changeWebcam() | failed: %o",e.t0),this._openTelemetry.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(t),error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Could not change webcam: ".concat(e.t0)}));case 18:e.next=51;break;case 20:return e.prev=20,e.next=23,this._updateWebcams(a);case 23:return c=Array.from(this._webcams.keys()),u=c.length,d=this._webcam.device?this._webcam.device.deviceId:void 0,null!=t&&null!=t?p=c.indexOf(t):(p=c.indexOf(d))<u-1?p++:p=0,this._webcam.device=this._webcams.get(c[p]),Ga.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",e.next=32,null===(i=this._openTelemetry)||void 0===i?void 0:i.trace({spanName:"Getting Selected Webcam",span:a,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}});case 32:if(f=e.sent,this._webcam.device){e.next=36;break}throw this._openTelemetry.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 36:return e.next=38,this.disableWebcam(a);case 38:return e.next=40,this.enableWebcam(void 0,a);case 40:return null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:f,status:1,message:"Done"}),null===(s=this._openTelemetry)||void 0===s||s.completeSpan({span:a,status:1,message:"changeWebcam() Ending"}),e.abrupt("return");case 45:e.prev=45,e.t1=e.catch(20),Ga.error("changeWebcam() | failed: %o",e.t1),this._openTelemetry.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(t),error:e.t1.message}}),null===(h=this._openTelemetry)||void 0===h||h.completeSpan({span:a,status:2,message:"Could not change webcam ".concat(e.t1)}),Ba.dispatch(ae({type:"error",text:"Could not change webcam: ".concat(e.t1)}));case 51:Ba.dispatch(H(!1));case 52:case"end":return e.stop()}}),e,this,[[6,13],[20,45]])}))),function(e){return it.apply(this,arguments)})},{key:"changeWebcamResolution",value:(at=(0,a.Z)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug("changeWebcamResolution()"),Ba.dispatch(H(!0)),e.prev=2,e.t0=this._webcam.resolution,e.next="qvga"===e.t0?6:"vga"===e.t0?8:"hd"===e.t0?10:12;break;case 6:return this._webcam.resolution="vga",e.abrupt("break",13);case 8:return this._webcam.resolution="hd",e.abrupt("break",13);case 10:return this._webcam.resolution="qvga",e.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return Ga.debug("changeWebcamResolution() | calling getUserMedia()"),e.prev=14,e.next=17,navigator.mediaDevices.getUserMedia({video:Fa({deviceId:{exact:this._webcam.device.deviceId}},za[this._webcam.resolution])});case 17:t=e.sent,e.next=25;break;case 20:return e.prev=20,e.t1=e.catch(14),this._openTelemetry.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(e.t1)}}),"Permission denied"===e.t1.message||"NotAllowedError"===e.t1.name?this._emitError(be.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(be.H.ERROR_GET_VIDEO_MEDIA),e.abrupt("return");case 25:return r=t.getVideoTracks()[0],e.next=28,this._webcamProducer.replaceTrack({track:r});case 28:Ba.dispatch(U(this._webcamProducer.id,r)),e.next=36;break;case 31:e.prev=31,e.t2=e.catch(2),Ga.error("changeWebcamResolution() | failed: %o",e.t2),this._openTelemetry.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:e.t2.message}}),Ba.dispatch(ae({type:"error",text:"Could not change webcam resolution: ".concat(e.t2)}));case 36:Ba.dispatch(H(!1));case 37:case"end":return e.stop()}}),e,this,[[2,31],[14,20]])}))),function(){return at.apply(this,arguments)})},{key:"enableShare",value:(nt=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f,h,m,y,v,g,_,b,w,S,E,P,k,T,R,C,O,x,D=this,I=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=I.length>0&&void 0!==I[0]?I[0]:void 0,e.next=3,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"enableShare() Calling ".concat(r?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:r?JSON.stringify(r):"Not Specify Custom Track"}});case 3:if(n=e.sent,Ga.debug("enableShare()"),!this._shareProducer){e.next=8;break}return null===(a=this._openTelemetry)||void 0===a||a.completeSpan({span:n,status:2,message:"Screen Share Producer found"}),e.abrupt("return");case 8:if(this._mediasoupDevice.canProduce("video")){e.next=12;break}return null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:n,status:2,message:"enableShare() | cannot produce video"}),Ga.error("enableShare() | cannot produce video"),e.abrupt("return");case 12:return Ba.dispatch(W(!0)),e.prev=13,Ga.debug("enableShare() | calling getUserMedia()"),e.next=17,null===(c=this._openTelemetry)||void 0===c?void 0:c.trace({spanName:"Creating Track",span:n});case 17:if(m=e.sent,!r||!r.active){e.next=23;break}o=r.getVideoTracks()[0],s=r.getAudioTracks()[0],e.next=42;break;case 23:return e.prev=23,e.next=26,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 26:v=e.sent,e.next=35;break;case 29:return e.prev=29,e.t0=e.catch(23),this._openTelemetry.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(e.t0)}}),null===(g=this._openTelemetry)||void 0===g||g.completeSpan({span:n,status:2,message:"Error in getDisplayMedia for screen share ".concat(e.t0)}),"Permission denied"===e.t0.message||"NotAllowedError"===e.t0.name?this._emitError(be.H.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(be.H.ERROR_GET_DISPLAY_MEDIA),e.abrupt("return");case 35:if(v){e.next=39;break}return Ba.dispatch(W(!0)),null===(_=this._openTelemetry)||void 0===_||_.completeSpan({span:n,status:2,message:"Stream not found"}),e.abrupt("return");case 39:o=v.getVideoTracks()[0],s=v.getAudioTracks()[0],null===(y=this._openTelemetry)||void 0===y||y.completeSpan({message:"Track Generated with height ".concat(o.getSettings().height," and width ").concat(o.getSettings().width),span:m,status:1});case 42:return e.next=44,null===(u=this._openTelemetry)||void 0===u?void 0:u.trace({spanName:"Generating Producer Configuration",span:n});case 44:if(b=e.sent,E={videoGoogleStartBitrate:1e3},!this._forceH264){e.next=53;break}if(S=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/h264"===e.mimeType.toLowerCase()}))){e.next=51;break}throw this._openTelemetry.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 51:e.next=58;break;case 53:if(!this._forceVP9){e.next=58;break}if(S=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video/vp9"===e.mimeType.toLowerCase()}))){e.next=58;break}throw this._openTelemetry.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 58:return this._useSharingSimulcast&&(P=this._mediasoupDevice.rtpCapabilities.codecs.find((function(e){return"video"===e.kind})),w=this._forceVP9&&S||"video/vp9"===P.mimeType.toLowerCase()?Za:Wa.map((function(e){return Fa(Fa({},e),{},{dtx:!0})}))),null===(d=this._openTelemetry)||void 0===d||d.completeSpan({span:b,status:1,message:"Producer Configuration Generated"}),e.next=62,null===(p=this._openTelemetry)||void 0===p?void 0:p.trace({spanName:"Creating Share Producer",span:n});case 62:return b=e.sent,e.next=65,this._sendTransport.produce({track:o,encodings:w,codecOptions:E,codec:S,appData:{share:!0}});case 65:if(this._shareProducer=e.sent,k=F({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareProducer}),Ba.dispatch(k),this._eventEmitter.emit(k.type,k.payload),this._shareProducer.on("transportclose",(function(){var e,t=B(D._shareProducer.id);Ba.dispatch(t),D._eventEmitter.emit(t.type,t.payload),null===(e=D._shareProducer)||void 0===e||e.close(),D._shareProducer=null})),this._shareProducer.on("trackended",(function(){var e;null===(e=D._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:" this._shareProducer trackended or Share disconnected!",status:2}),Ba.dispatch(ae({type:"error",text:"Share disconnected!"})),D.disableShare().catch((function(){}))})),null===(f=this._openTelemetry)||void 0===f||f.completeSpan({span:b,status:1,message:"Share Producer Created"}),!s){e.next=94;break}return e.prev=73,C={opusStereo:1,opusDtx:1},e.next=77,null===(T=this._openTelemetry)||void 0===T?void 0:T.trace({spanName:"Creating Share Audio Producer",span:n});case 77:return b=e.sent,e.next=80,this._sendTransport.produce({track:s,codecOptions:C,appData:{share:!0}});case 80:this._shareAudioProducer=e.sent,O=F({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareAudioProducer}),Ba.dispatch(O),this._eventEmitter.emit(O.type,O.payload),this._shareAudioProducer.on("transportclose",(function(){var e,t=B(D._shareAudioProducer.id);Ba.dispatch(t),D._eventEmitter.emit(t.type,t.payload),null===(e=D._shareAudioProducer)||void 0===e||e.close(),D._shareAudioProducer=null})),this._shareAudioProducer.on("trackended",(function(){var e;null===(e=D._openTelemetry)||void 0===e||e.traceAutoComplete({spanName:" this._shareAudioProducer trackended",status:2}),Ba.dispatch(ae({type:"error",text:"Share disconnected!"}))})),null===(R=this._openTelemetry)||void 0===R||R.completeSpan({span:b,status:1,message:"Share Audio Producer Created"}),e.next=94;break;case 89:return e.prev=89,e.t1=e.catch(73),e.next=93,this._protoo.request("produceError",{mediaType:"shareAudio",message:e.t1.message});case 93:this._openTelemetry.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:e.t1.message}});case 94:null===(h=this._openTelemetry)||void 0===h||h.completeSpan({span:n,status:1,message:"Enable Share Successful"}),e.next=109;break;case 97:return e.prev=97,e.t2=e.catch(13),Ga.error("enableShare() | failed:%o",e.t2),null===(x=this._openTelemetry)||void 0===x||x.completeSpan({span:n,status:2,message:"Error in enableShare video produceError"}),n.setAttributes({error:e.t2.message}),console.log("screen share catch",e.t2.message),this._openTelemetry.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:e.t2.message}}),"NotAllowedError"!==e.t2.name&&Ba.dispatch(ae({type:"error",text:"Error sharing: ".concat(e.t2)})),e.next=107,this._protoo.request("produceError",{mediaType:"share",message:e.t2.message});case 107:o&&o.stop(),s&&s.stop();case 109:Ba.dispatch(W(!1));case 110:case"end":return e.stop()}}),e,this,[[13,97],[23,29],[73,89]])}))),function(){return nt.apply(this,arguments)})},{key:"disableShare",value:(rt=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("disableShare()"),e.next=3,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"disableShare() Calling",status:1});case 3:if(a=e.sent,this._shareProducer){e.next=7;break}return null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:a,status:2,message:"Share Producer Not found"}),e.abrupt("return");case 7:return e.next=9,null===(r=this._openTelemetry)||void 0===r?void 0:r.trace({spanName:"Closing Share Producer",span:a,status:1});case 9:if(o=e.sent,this._shareProducer.close(),s=B(this._shareProducer.id),Ba.dispatch(s),this._eventEmitter.emit(s.type,s.payload),!this._shareAudioProducer){e.next=23;break}return e.next=17,null===(c=this._openTelemetry)||void 0===c?void 0:c.trace({spanName:"Closing Share Audio Producer",span:a,status:1});case 17:d=e.sent,this._shareAudioProducer.close(),s=B(this._shareAudioProducer.id),Ba.dispatch(s),this._eventEmitter.emit(s.type,s.payload),null===(u=this._openTelemetry)||void 0===u||u.completeSpan({span:d,status:1,message:"Closed Share Audio Producer"});case 23:return e.prev=23,e.next=26,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 26:if(!this._shareAudioProducer){e.next=29;break}return e.next=29,this._protoo.request("closeProducer",{producerId:this._shareAudioProducer.id});case 29:null===(p=this._openTelemetry)||void 0===p||p.completeSpan({span:o,status:1,message:"Requested Server to Close Producer"}),e.next=37;break;case 32:e.prev=32,e.t0=e.catch(23),Ba.dispatch(ae({type:"error",text:"Error closing server-side share Producer: ".concat(e.t0)})),null===(f=this._openTelemetry)||void 0===f||f.completeSpan({span:a,status:2,message:"Error closing server-side share Producer ".concat(e.t0)}),this._openTelemetry.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:e.t0.message}});case 37:this._shareProducer=null,this._shareAudioProducer=null,null===(n=this._openTelemetry)||void 0===n||n.completeSpan({span:a,status:1,message:"Screen Share Disabled Successfully"});case 40:case"end":return e.stop()}}),e,this,[[23,32]])}))),function(){return rt.apply(this,arguments)})},{key:"enableAudioOnly",value:(tt=(0,a.Z)(l().mark((function e(){var t,r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug("enableAudioOnly()"),Ba.dispatch(A(!0)),this.disableWebcam(),t=Aa(this._consumers.values()),e.prev=4,t.s();case 6:if((r=t.n()).done){e.next=13;break}if("video"===(n=r.value).kind){e.next=10;break}return e.abrupt("continue",11);case 10:this._pauseConsumer(n);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:Ba.dispatch(M(!0)),Ba.dispatch(A(!1));case 23:case"end":return e.stop()}}),e,this,[[4,15,18,21]])}))),function(){return tt.apply(this,arguments)})},{key:"disableAudioOnly",value:(et=(0,a.Z)(l().mark((function e(){var t,r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug("disableAudioOnly()"),Ba.dispatch(A(!0)),!this._webcamProducer&&this._produce&&(k()||{}).webcamEnabled&&this.enableWebcam(),t=Aa(this._consumers.values()),e.prev=4,t.s();case 6:if((r=t.n()).done){e.next=13;break}if("video"===(n=r.value).kind){e.next=10;break}return e.abrupt("continue",11);case 10:this._resumeConsumer(n);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:Ba.dispatch(M(!1)),Ba.dispatch(A(!1));case 23:case"end":return e.stop()}}),e,this,[[4,15,18,21]])}))),function(){return et.apply(this,arguments)})},{key:"muteAudio",value:(Ye=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug("muteAudio()"),Ba.dispatch(j(!0));case 2:case"end":return e.stop()}}),e)}))),function(){return Ye.apply(this,arguments)})},{key:"unmuteAudio",value:(Je=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ga.debug("unmuteAudio()"),Ba.dispatch(j(!1));case 2:case"end":return e.stop()}}),e)}))),function(){return Je.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(Xe=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.iceParameters,i=t.transportId,o=t.internalSpan,i===(null===(r=this._sendTransport)||void 0===r?void 0:r.id)&&this._sendTransport.restartIce({iceParameters:a}),i===(null===(n=this._recvTransport)||void 0===n?void 0:n.id)&&this._recvTransport.restartIce({iceParameters:a}),e.prev=3,e.next=6,this._protoo.request("iceRestarted",{transportId:i});case 6:null===(s=this._openTelemetry)||void 0===s||s.completeSpan({span:o,status:1,message:"iceRestarted"}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),null===(c=this._openTelemetry)||void 0===c||c.completeSpan({span:o,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(e.t0)}),this._openTelemetry.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"ICE restart failed: ".concat(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return Xe.apply(this,arguments)})},{key:"restartIce",value:(Qe=(0,a.Z)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("restartIce()"),Ba.dispatch(N(!0)),e.prev=2,!this._sendTransport){e.next=9;break}return e.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return t=e.sent,e.next=9,this._sendTransport.restartIce({iceParameters:t});case 9:if(!this._recvTransport){e.next=15;break}return e.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return r=e.sent,e.next=15,this._recvTransport.restartIce({iceParameters:r});case 15:Ba.dispatch(ae({text:"ICE restarted"})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),Ga.error("restartIce() | failed:%o",e.t0),Ba.dispatch(ae({type:"error",text:"ICE restart failed: ".concat(e.t0)})),this._openTelemetry.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:e.t0.message}});case 23:Ba.dispatch(N(!1));case 24:case"end":return e.stop()}}),e,this,[[2,18]])}))),function(){return Qe.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(Ke=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",t),e.prev=1,!this._webcamProducer){e.next=7;break}return e.next=5,this._webcamProducer.setMaxSpatialLayer(t);case 5:e.next=10;break;case 7:if(!this._shareProducer){e.next=10;break}return e.next=10,this._shareProducer.setMaxSpatialLayer(t);case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),Ga.error("setMaxSendingSpatialLayer() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error setting max sending video spatial layer: ".concat(e.t0)}));case 17:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(e){return Ke.apply(this,arguments)})},{key:"setWebcamQuality",value:($e=(0,a.Z)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._webcamProducer){e.next=2;break}return e.abrupt("return");case 2:if(r=this._webcam.resolution,n=Ua[r][t].s,this._webcamProducer.maxSpatialLayer!=n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this._webcamProducer.setMaxSpatialLayer(n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return $e.apply(this,arguments)})},{key:"setConsumerQuality",value:(qe=(0,a.Z)(l().mark((function e(t,r){var n,a,i,o,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this._webcam.resolution,e.next=3,null===(n=this._openTelemetry)||void 0===n?void 0:n.trace({spanName:'Setting "'.concat(r,'" Quality')});case 3:return s=e.sent,c=Ua[o][r].s,u=Ua[o][r].t,null===(a=this._openTelemetry)||void 0===a||a.traceAutoComplete({spanName:"Getting spatial & temporal layers",attributes:{spatialLayers:JSON.parse(c),temporalLayers:JSON.parse(u)},status:1}),e.next=9,this.setConsumerPreferredLayers(t,c,u);case 9:null===(i=this._openTelemetry)||void 0===i||i.completeSpan({message:"Done",span:s,status:1});case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return qe.apply(this,arguments)})},{key:"setViewPort",value:(Ge=(0,a.Z)(l().mark((function e(t,r,n){var a,i,o,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._consumers.get(t.id)){e.next=2;break}return e.abrupt("return");case 2:if(a=_e(this._consumers.get(t.id),r,n),i=a.consumerId,o=a.newPreferredSpatialLayer,s=a.newPreferredTemporalLayer,!i){e.next=6;break}return e.next=6,this.setConsumerPreferredLayers(i,o,s);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return Ge.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(Ze=(0,a.Z)(l().mark((function e(t,r,n){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",t,r,n),e.prev=1,(a=this._consumers.get(t)).spatialLayers>1&&(a.preferredSpatialLayer=r,a.preferredTemporalLayer=n),e.next=6,this._protoo.request("setConsumerPreferredLayers",{consumerId:t,spatialLayer:r,temporalLayer:n});case 6:Ba.dispatch(Y(t,r,n)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),Ga.error("setConsumerPreferredLayers() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error setting Consumer preferred layers: ".concat(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e,t,r){return Ze.apply(this,arguments)})},{key:"setConsumerPriority",value:(We=(0,a.Z)(l().mark((function e(t,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("setConsumerPriority() [consumerId:%s, priority:%d]",t,r),e.prev=1,e.next=4,this._protoo.request("setConsumerPriority",{consumerId:t,priority:r});case 4:Ba.dispatch(ee(t,r)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),Ga.error("setConsumerPriority() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error setting Consumer priority: ".concat(e.t0)}));case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e,t){return We.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(He=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("requestConsumerKeyFrame() [consumerId:%s]",t),e.prev=1,e.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:t});case 4:Ba.dispatch(ae({text:"Keyframe requested for video consumer"})),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),Ga.error("requestConsumerKeyFrame() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error requesting key frame for Consumer: ".concat(e.t0)}));case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return He.apply(this,arguments)})},{key:"enableChatDataProducer",value:(Ve=(0,a.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("enableChatDataProducer()"),this._useDataChannel){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=e.sent,Ba.dispatch(V({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",(function(){t._chatDataProducer=null})),this._chatDataProducer.on("open",(function(){Ga.debug('chat DataProducer "open" event')})),this._chatDataProducer.on("close",(function(){Ga.error('chat DataProducer "close" event'),t._chatDataProducer=null,Ba.dispatch(ae({type:"error",text:"Chat DataProducer closed"}))})),this._chatDataProducer.on("error",(function(e){Ga.error('chat DataProducer "error" event:%o',e),Ba.dispatch(ae({type:"error",text:"Chat DataProducer error: ".concat(e)}))})),this._chatDataProducer.on("bufferedamountlow",(function(){Ga.debug('chat DataProducer "bufferedamountlow" event')})),e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(3),Ga.error("enableChatDataProducer() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error enabling chat DataProducer: ".concat(e.t0)})),e.t0;case 21:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(){return Ve.apply(this,arguments)})},{key:"enableBotDataProducer",value:(ze=(0,a.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("enableBotDataProducer()"),this._useDataChannel){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=e.sent,Ba.dispatch(V({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",(function(){t._botDataProducer=null})),this._botDataProducer.on("open",(function(){Ga.debug('bot DataProducer "open" event')})),this._botDataProducer.on("close",(function(){Ga.error('bot DataProducer "close" event'),t._botDataProducer=null,Ba.dispatch(ae({type:"error",text:"Bot DataProducer closed"}))})),this._botDataProducer.on("error",(function(e){Ga.error('bot DataProducer "error" event:%o',e),Ba.dispatch(ae({type:"error",text:"Bot DataProducer error: ".concat(e)}))})),this._botDataProducer.on("bufferedamountlow",(function(){Ga.debug('bot DataProducer "bufferedamountlow" event')})),e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(3),Ga.error("enableBotDataProducer() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error enabling bot DataProducer: ".concat(e.t0)})),e.t0;case 21:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(){return ze.apply(this,arguments)})},{key:"sendChatMessage",value:(Ue=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug('sendChatMessage() [text:"%s]',t),this._chatDataProducer){e.next=4;break}return Ba.dispatch(ae({type:"error",text:"No chat DataProducer"})),e.abrupt("return");case 4:try{this._chatDataProducer.send(t)}catch(e){Ga.error("chat DataProducer.send() failed:%o",e),Ba.dispatch(ae({type:"error",text:"chat DataProducer.send() failed: ".concat(e)}))}case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Ue.apply(this,arguments)})},{key:"sendBotMessage",value:(Be=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug('sendBotMessage() [text:"%s]',t),this._botDataProducer){e.next=4;break}return Ba.dispatch(ae({type:"error",text:"No bot DataProducer"})),e.abrupt("return");case 4:try{this._botDataProducer.send(t)}catch(e){Ga.error("bot DataProducer.send() failed:%o",e),Ba.dispatch(ae({type:"error",text:"bot DataProducer.send() failed: ".concat(e)}))}case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Be.apply(this,arguments)})},{key:"changeDisplayName",value:(Fe=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug('changeDisplayName() [displayName:"%s"]',t),P({displayName:t}),e.prev=2,e.next=5,this._protoo.request("changeDisplayName",{displayName:t});case 5:this._displayName=t,Ba.dispatch(L(t)),Ba.dispatch(ae({text:"Display name changed"})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),Ga.error("changeDisplayName() | failed: %o",e.t0),Ba.dispatch(ae({type:"error",text:"Could not change display name: ".concat(e.t0)})),Ba.dispatch(L());case 15:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(e){return Fe.apply(this,arguments)})},{key:"openConnection",value:(Ne=(0,a.Z)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.payload,e.next=3,this._protoo.request("openConnection",{roomId:r,payload:n}).catch((function(e){throw new Error(e)}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return Ne.apply(this,arguments)})},{key:"closeConnection",value:(je=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._protoo.request("closeConnection",{roomId:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return je.apply(this,arguments)})},{key:"switchTo",value:(Ae=(0,a.Z)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.peerIds,a=t.payload,e.next=3,this._protoo.request("requestSwitchRoom",{roomId:r,peerIds:n,payload:a});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return Ae.apply(this,arguments)})},{key:"switchPeerRoom",value:(Me=(0,a.Z)(l().mark((function e(t){var r,n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.peerId,n=t.roomId,a=t.payload,i=t.token,e.next=3,this._protoo.request("switchPeerRoom",{roomId:n,peerId:r,payload:a,token:i});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return Me.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Le=(0,a.Z)(l().mark((function e(t){var r,n,a,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.connectionRoomId,a=t.peerId,i=t.payload,o=t.token,e.next=3,this._protoo.request("connectionSwitchPeerRoom",{roomId:r,connectionRoomId:n,peerId:a,payload:i,token:o});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return Le.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(Ie=(0,a.Z)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,n=t.message,e.next=3,this._protoo.request("connectionSendChatMessage",{roomId:r,message:n});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return Ie.apply(this,arguments)})},{key:"connectionEndMeeting",value:(De=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.roomId,e.next=3,this._protoo.request("connectionCloseRoom",{roomId:r});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return De.apply(this,arguments)})},{key:"pubsubPublish",value:(xe=(0,a.Z)(l().mark((function e(t,r,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("pubsubPublish",{topic:t,message:r,options:n});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this._openTelemetry.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("pubsubPublish() | failed: %o",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e,t,r){return xe.apply(this,arguments)})},{key:"pubsubSubscribe",value:(Oe=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("pubsubSubscribe",{topic:t});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),this._openTelemetry.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("pubsubSubscribe() | failed: %o",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return Oe.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Ce=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._protoo.request("pubsubUnsubscribe",{topic:t});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this._openTelemetry.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:e.t0.message}}),Ga.error("pubsubUnsubscribe() | failed: %o",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return Ce.apply(this,arguments)})},{key:"closeRoom",value:(Re=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._protoo.request("closeRoom",{});case 2:case"end":return e.stop()}}),e,this)}))),function(){return Re.apply(this,arguments)})},{key:"removePeer",value:(Te=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=this._openTelemetry)||void 0===r||r.traceAutoComplete({spanName:"Removing peer ".concat(t),status:1}),null!=t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this._protoo.request("removePeer",{peerId:t});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Te.apply(this,arguments)})},{key:"startPingPong",value:(ke=(0,a.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=setInterval((function(){t.pingWebSocket()}),2e3);case 2:case"end":return e.stop()}}),e,this)}))),function(){return ke.apply(this,arguments)})},{key:"pingWebSocket",value:(ve=(0,a.Z)(l().mark((function e(){var t,r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}return e.abrupt("return");case 2:t=!1,this._protoo.request("ping").then((function(e){e&&(t=!0)})).catch((function(e){})),setTimeout((function(){t?(!r._isWebsocketAlive||r._pingWebsocketFailedCounter>1?(r._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),r._isWebsocketAlive=!0,r._pingWebsocketFailedCounter=0,r.restartIce()):"failed"!=r._transportState&&"disconnected"!=r._transportState||(console.log("Calling Restart Ice based on transport state",r._transportState),r.restartIce()),r._pingWebsocketFailedCounter=0):(r._isWebsocketAlive&&r._pingWebsocketFailedCounter>1&&(r._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),r._isWebsocketAlive=!1,r.startInternetPingPong()),r._pingWebsocketFailedCounter=r._pingWebsocketFailedCounter+1)}),1e3);case 5:case"end":return e.stop()}}),e,this)}))),function(){return ve.apply(this,arguments)})},{key:"startInternetPingPong",value:(ye=(0,a.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=setInterval((function(){t.pingInternet()}),2e3);case 2:case"end":return e.stop()}}),e,this)}))),function(){return ye.apply(this,arguments)})},{key:"pingInternet",value:(me=(0,a.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}return e.abrupt("return");case 2:return this._openTelemetry.pushLogs({logText:"pinging internet",logType:"INFO"}),e.next=5,fetch("https://api.videosdk.live/ping",{method:"GET"}).then((function(e){return e.text()})).catch((function(e){return t._openTelemetry.pushLogs({logText:"Error pingInternet failed",logType:"ERROR",attributes:{error:e.message}}),"failed"}));case 5:if("pong"!=e.sent){e.next=16;break}if(this._openTelemetry.pushLogs({logText:"Pong",logType:"INFO"}),!(this._pingWebsocketFailedCounter>5&&this._pongInternetCounter>3)||this._isWebsocketAlive){e.next=14;break}return this._pongInternetCounter=0,this.close({sendLeft:!1}),this._openTelemetry.pushLogs({logText:"Re-join the meeting, after diconnect",logType:"INFO"}),e.next=14,this.join();case 14:this._pongInternetCounter=this._pongInternetCounter+1,this._isWebsocketAlive&&(this._pongInternetCounter=0,null!=this._pingInternetInterval&&(clearInterval(this._pingInternetInterval),this._pingInternetInterval=null));case 16:case"end":return e.stop()}}),e,this)}))),function(){return me.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(he=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getSendTransportRemoteStats()"),this._sendTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return he.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(fe=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getRecvTransportRemoteStats()"),this._recvTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return fe.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(pe=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getAudioRemoteStats()"),this._micProducer){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._latestStats[this._micProducer.id]);case 4:case"end":return e.stop()}}),e,this)}))),function(){return pe.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(de=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getVideoRemoteStats()"),t=this._webcamProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._latestStats[t.id]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return de.apply(this,arguments)})},{key:"getShareRemoteStats",value:(ue=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getVideoRemoteStats()"),t=this._shareProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._latestStats[t.id]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return ue.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(le=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getConsumerRemoteStats()"),r=this._consumers.get(t)){e.next=4;break}return e.abrupt("return");case 4:return this._latestStats[t]&&(this._latestStats[t][0].currentSpatialLayer=r.currentSpatialLayer,this._latestStats[t][0].currentTemporalLayer=r.currentTemporalLayer,this._latestStats[t][0].preferredSpatialLayer=r.preferredSpatialLayer,this._latestStats[t][0].preferredTemporalLayer=r.preferredTemporalLayer),e.abrupt("return",this._latestStats[t]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return le.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(ce=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getChatDataProducerRemoteStats()"),t=this._chatDataProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:t.id}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return ce.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(oe=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getBotDataProducerRemoteStats()"),t=this._botDataProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:t.id}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return oe.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(R=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(t)){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:t}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(T=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getSendTransportLocalStats()"),this._sendTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._sendTransport.getStats());case 4:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(E=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getRecvTransportLocalStats()"),this._recvTransport){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._recvTransport.getStats());case 4:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"getAudioLocalStats",value:(S=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getAudioLocalStats()"),this._micProducer){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._micProducer.getStats());case 4:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"getVideoLocalStats",value:(w=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ga.debug("getVideoLocalStats()"),t=this._webcamProducer||this._shareProducer){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",t.getStats());case 5:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(b=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._consumers.get(t)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r.getStats());case 4:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(g=(0,a.Z)(l().mark((function e(t){var r,n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uplink,n=t.downlink,a=t.rtt,i=t.secret,Ga.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",r,n,a),e.prev=2,e.next=5,this._protoo.request("applyNetworkThrottle",{uplink:r,downlink:n,rtt:a,secret:i});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),Ga.error("applyNetworkThrottle() | failed:%o",e.t0),Ba.dispatch(ae({type:"error",text:"Error applying network throttle: ".concat(e.t0)}));case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return g.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(v=(0,a.Z)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.silent,n=void 0!==r&&r,a=t.secret,Ga.debug("resetNetworkThrottle()"),e.prev=2,e.next=5,this._protoo.request("resetNetworkThrottle",{secret:a});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n||(Ga.error("resetNetworkThrottle() | failed:%o",e.t0),Ba.dispatch(ae({type:"error",text:"Error resetting network throttle: ".concat(e.t0)})));case 10:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return v.apply(this,arguments)})},{key:"createProducerTransport",value:(y=(0,a.Z)(l().mark((function e(t,r){var n,i,o,s,c,u,d,p,f,h,m=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.id,s=t.iceParameters,c=t.iceCandidates,u=t.dtlsParameters,d=t.sctpParameters,e.next=3,null===(n=this._openTelemetry)||void 0===n?void 0:n.trace({spanName:"Creating Send Transport",span:r||null});case 3:p=e.sent,this._sendTransport=this._mediasoupDevice.createSendTransport({id:o,iceParameters:s,iceCandidates:c,dtlsParameters:u,sctpParameters:d,iceServers:this._iceServers}),this._sendTransport.on("connect",(function(e,t,r){var n,a=e.dtlsParameters;null===(n=m._openTelemetry)||void 0===n||n.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",status:1}),m._protoo.request("connectWebRtcTransport",{transportId:m._sendTransport.id,dtlsParameters:a}).then(t).catch(r)})),this._sendTransport.on("produce",function(){var e=(0,a.Z)(l().mark((function e(t,r,n){var a,i,o,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.kind,i=t.rtpParameters,o=t.appData,e.prev=1,null===(s=m._openTelemetry)||void 0===s||s.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",status:1}),e.next=5,m._protoo.request("produce",{transportId:m._sendTransport.id,kind:a,rtpParameters:i,appData:o});case 5:c=e.sent,u=c.id,r({id:u}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),m._openTelemetry.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:e.t0.message}}),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r,n){return e.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var e=(0,a.Z)(l().mark((function e(t,r,n){var a,i,o,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.sctpStreamParameters,i=t.label,o=t.protocol,s=t.appData,Ga.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',a,s),e.prev=2,e.next=5,m._protoo.request("produceData",{transportId:m._sendTransport.id,sctpStreamParameters:a,label:i,protocol:o,appData:s});case 5:c=e.sent,u=c.id,r({id:u}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),m._openTelemetry.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:e.t0.message}}),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,r,n){return e.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",(function(e){var t;null===(t=m._openTelemetry)||void 0===t||t.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(e),status:1}),"failed"===e&&m.restartIce(),m._transportState=e})),f=0,(h=this._metrics.addNewProbe(this._sendTransport,"sendTransport")).onStatsCollected=function(e){try{var t,r,n,a;m._stats.producerStats||(m._stats.producerStats={}),m._stats.producerStats.audio||(m._stats.producerStats.audio=[]),m._stats.producerStats.shareAudio||(m._stats.producerStats.shareAudio=[]),m._micProducer&&(m._latestStats[null===(t=m._micProducer)||void 0===t?void 0:t.id]=[]),m._shareAudioProducer&&(m._latestStats[null===(r=m._shareAudioProducer)||void 0===r?void 0:r.id]=[]),e.audio.forEach((function(e){var t,r,n;if(m._micProducer&&e.trackId==(null===(t=m._micProducer)||void 0===t?void 0:t.track.id))m._latestStats[null===(n=m._micProducer)||void 0===n?void 0:n.id].push(e),f%5==0&&m._stats.producerStats.audio.push(e);else if(m._shareAudioProducer&&e.trackId==(null===(r=m._shareAudioProducer)||void 0===r?void 0:r.track.id)){var a;m._latestStats[null===(a=m._shareAudioProducer)||void 0===a?void 0:a.id].push(e),f%5==0&&m._stats.producerStats.shareAudio.push(e)}})),m._stats.producerStats.video||(m._stats.producerStats.video=[]),m._stats.producerStats.share||(m._stats.producerStats.share=[]),m._webcamProducer&&(m._latestStats[null===(n=m._webcamProducer)||void 0===n?void 0:n.id]=[]),m._shareProducer&&(m._latestStats[null===(a=m._shareProducer)||void 0===a?void 0:a.id]=[]),e.video.forEach((function(e){var t,r,n;if(m._webcamProducer&&e.trackId==(null===(t=m._webcamProducer)||void 0===t?void 0:t.track.id))m._latestStats[null===(n=m._webcamProducer)||void 0===n?void 0:n.id].push(e);else if(m._shareProducer&&e.trackId==(null===(r=m._shareProducer)||void 0===r?void 0:r.track.id)){var a;m._latestStats[null===(a=m._shareProducer)||void 0===a?void 0:a.id].push(e)}})),f%5==0&&null!=m._webcamProducer&&m._stats.producerStats.video.push({timestamp:new Date,stats:m._latestStats[m._webcamProducer.id]}),f%5==0&&null!=m._shareProducer&&m._stats.producerStats.share.push({timestamp:new Date,stats:m._latestStats[m._shareProducer.id]}),f++}catch(e){m._openTelemetry.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:e.message}}),console.log("PRODUCER ERROR",e)}},h.start(),this._sendTransport.observer.on("close",(function(){h.stop(),m._metrics.removeExistingProbe(h)})),null===(i=this._openTelemetry)||void 0===i||i.completeSpan({span:p,status:1,message:"Send Transport Created Successfully"});case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"createConsumerTransport",value:(m=(0,a.Z)(l().mark((function e(t,r){var n,a,i,o,s,c,u,d,p,f,h=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,o=t.iceParameters,s=t.iceCandidates,c=t.dtlsParameters,u=t.sctpParameters,e.next=3,null===(n=this._openTelemetry)||void 0===n?void 0:n.trace({spanName:"Creating Recieve Transport",span:r||null});case 3:d=e.sent,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:i,iceParameters:o,iceCandidates:s,dtlsParameters:c,sctpParameters:u,iceServers:this._iceServers}),this._recvTransport.on("connect",(function(e,t,r){var n,a=e.dtlsParameters;null===(n=h._openTelemetry)||void 0===n||n.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",status:1}),h._protoo.request("connectWebRtcTransport",{transportId:h._recvTransport.id,dtlsParameters:a}).then(t).catch(r)})),this._recvTransport.on("connectionstatechange",(function(e){var t;null===(t=h._openTelemetry)||void 0===t||t.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(e),status:1}),"failed"===e&&h.restartIce(),h._transportState=e})),p=0,(f=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(e){try{e.audio.forEach((function(e){var t=h._consumers.get(e.trackId);if(null!=t){var r=1==t.appData.share?"audio"==t.kind?"shareAudio":"share":t.kind;h._stats.consumerStats||(h._stats.consumerStats={}),h._stats.consumerStats[t.appData.peerId]||(h._stats.consumerStats[t.appData.peerId]={}),h._stats.consumerStats[t.appData.peerId][r]||(h._stats.consumerStats[t.appData.peerId][r]=[]),e.trackId==t.id&&(h._latestStats[t.id]=[],h._latestStats[t.id].push(e),p%5==0&&h._stats.consumerStats[t.appData.peerId][r].push(e))}})),e.video.forEach((function(e){var t=h._consumers.get(e.trackId);if(null!=t){var r=1==t.appData.share?"audio"==t.kind?"shareAudio":"share":t.kind;h._stats.consumerStats||(h._stats.consumerStats={}),h._stats.consumerStats[t.appData.peerId]||(h._stats.consumerStats[t.appData.peerId]={}),h._stats.consumerStats[t.appData.peerId][r]||(h._stats.consumerStats[t.appData.peerId][r]=[]),e.trackId==t.id&&(h._latestStats[t.id]=[],h._latestStats[t.id].push(e),p%5==0&&h._stats.consumerStats[t.appData.peerId][r].push(e))}})),p++}catch(e){h._openTelemetry.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:e.message}}),console.log("CONSUMER CATCH",e)}},f.start(),this._recvTransport.observer.on("close",(function(){f.stop(),h._metrics.removeExistingProbe(f)})),null===(a=this._openTelemetry)||void 0===a||a.completeSpan({span:d,status:1,message:"Recieve Transport Created Successfully"});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"joinRoom",value:(h=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,c,u,p,f,h,m,y,v,g,_,b,w,S,E,P,T,R,O;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga.debug("joinRoom()"),e.prev=1,e.next=4,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"Loading Router Capabilities",span:this._joinSpan});case 4:return c=e.sent,this._mediasoupDevice=new d.Device({handlerName:this._handlerName}),e.next=8,this._protoo.request("getRouterRtpCapabilities");case 8:return u=e.sent,null==c||c.setAttributes((0,s.Z)({},"routerRtpCapabilities",JSON.stringify(u).toString())),e.next=12,this._mediasoupDevice.load({routerRtpCapabilities:u});case 12:if(null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:c,status:1,message:"Router Capabilities Loaded"}),!this._produce){e.next=18;break}return e.next=16,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 16:p=e.sent,this.createProducerTransport(p,this._joinSpan);case 18:if(!this._consume){e.next=23;break}return e.next=21,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 21:f=e.sent,this.createConsumerTransport(f,this._joinSpan);case 23:return e.next=25,this._protoo.request("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:null===(n=this._mediasoupDevice)||void 0===n?void 0:n.rtpCapabilities,sctpCapabilities:null===(a=this._mediasoupDevice)||void 0===a?void 0:a.sctpCapabilities,deviceInfo:this._deviceInfo,autoConsume:this._autoConsume});case 25:h=e.sent,m=h.peers,y=h.poll,v=h.messages,Ba.dispatch(C("connected")),null===(i=this._openTelemetry)||void 0===i||i.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:m,poll:y,messages:v,baseUrl:this._baseUrl}),Ba.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Ba.dispatch(ae({text:"You are in the room!",timeout:3e3})),g=Aa(m);try{for(g.s();!(_=g.n()).done;)b=_.value,w=Z(Fa(Fa({},b),{},{consumers:[],dataConsumers:[]})),Ba.dispatch(w),this._eventEmitter.emit(w.type,w.payload)}catch(e){g.e(e)}finally{g.f()}this._produce&&(Ba.dispatch(D({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&(null===(S=this._openTelemetry)||void 0===S||S.traceAutoComplete({spanName:"Disposing Audio Track",status:2}),this.customMicrophoneAudioTrack.getTracks().forEach((function(e){e.stop()}))),E=k(),this._webcamEnabled&&(!E||E.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&(null===(P=this._openTelemetry)||void 0===P||P.traceAutoComplete({spanName:"Disposing Video Track",status:2}),this.customCameraVideoTrack.getTracks().forEach((function(e){e.stop()}))),this.enableChatDataProducer()),window.SHOW_INFO&&(T=Ba.getState(),R=T.me,Ba.dispatch(x(R.id))),null===(o=this._openTelemetry)||void 0===o||o.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),e.next=48;break;case 41:e.prev=41,e.t0=e.catch(1),Ga.error("joinRoom() failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:e.t0.message}}),null===(O=this._openTelemetry)||void 0===O||O.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(e.t0)}),Ba.dispatch(ae({type:"error",text:"Could not join the room: ".concat(e.t0)})),this.close({sendLeft:!0});case 48:case"end":return e.stop()}}),e,this,[[1,41]])}))),function(){return h.apply(this,arguments)})},{key:"_updateMics",value:(f=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>0&&void 0!==f[0]?f[0]:void 0,this._mics=new Map,Ga.debug("_updateMics() |"),e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return a=e.sent,e.next=8,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"_updateMics() Calling for Getting System Mic list",attributes:{systemDevice:a?JSON.stringify(a):"Device not found"},span:n||null});case 8:i=e.sent,o=Aa(a);try{for(o.s();!(s=o.n()).done;)"audioinput"==(c=s.value).kind&&this._mics.set(c.deviceId,c)}catch(e){o.e(e)}finally{o.f()}u=Array.from(this._mics.values()),d=u.length,p=this._mic.device?this._mic.device.deviceId:void 0,0===d?this._mic.device=null:this._mics.has(p)||(this._mic.device=u[0]),this._tracesEnabled&&i.setAttribute({"this._mic":JSON.stringify(this._mic)}),null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:i,status:1,message:"Update Mic"});case 17:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_updateWebcams",value:(p=(0,a.Z)(l().mark((function e(){var t,r,n,a,i,o,s,c,u,d,p,f=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>0&&void 0!==f[0]?f[0]:void 0,Ga.debug("_updateWebcams()"),this._webcams=new Map,Ga.debug("_updateWebcams() | calling enumerateDevices()"),e.next=6,navigator.mediaDevices.enumerateDevices();case 6:return a=e.sent,e.next=9,null===(t=this._openTelemetry)||void 0===t?void 0:t.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",attributes:{systemDevice:a?JSON.stringify(a):"Device not found"},span:n||null});case 9:i=e.sent,o=Aa(a),e.prev=11,o.s();case 13:if((s=o.n()).done){e.next=20;break}if("videoinput"===(c=s.value).kind){e.next=17;break}return e.abrupt("continue",18);case 17:this._webcams.set(c.deviceId,c);case 18:e.next=13;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:u=Array.from(this._webcams.values()),d=u.length,p=this._webcam.device?this._webcam.device.deviceId:void 0,Ga.debug("_updateWebcams() [webcams:%o]",u),0===d?this._webcam.device=null:this._webcams.has(p)||(this._webcam.device=u[0]),this._tracesEnabled&&i.setAttribute({"this._webcams":JSON.stringify(this._webcam)}),null===(r=this._openTelemetry)||void 0===r||r.completeSpan({span:i,status:1,message:"Update Webcam"}),Ba.dispatch(I(this._webcams.size>1));case 36:case"end":return e.stop()}}),e,this,[[11,22,25,28]])}))),function(){return p.apply(this,arguments)})},{key:"_getWebcamType",value:function(e){return/(back|rear)/i.test(e.label)?(Ga.debug("_getWebcamType() | it seems to be a back camera"),"back"):(Ga.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(c=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.paused){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._protoo.request("pauseConsumer",{consumerId:t.id});case 5:t.pause(),Ba.dispatch(Q(t.id,"local")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),Ga.error("_pauseConsumer() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error pausing Consumer: ".concat(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return c.apply(this,arguments)})},{key:"_resumeConsumer",value:(r=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.paused){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._protoo.request("resumeConsumer",{consumerId:t.id});case 5:t.resume(),Ba.dispatch(X(t.id,"local")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),Ga.error("_resumeConsumer() | failed:%o",e.t0),this._openTelemetry.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:e.t0.message}}),Ba.dispatch(ae({type:"error",text:"Error resuming Consumer: ".concat(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return r.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(t=(0,a.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._externalVideoStream){e.next=2;break}return e.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){e.next=5;break}return e.next=5,new Promise((function(e){return t._externalVideo.addEventListener("canplay",e)}));case 5:if(!this._externalVideo.captureStream){e.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),e.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){e.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),e.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return e.abrupt("return",this._externalVideoStream);case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_emitError",value:function(e){this._eventEmitter.emit("ERROR",e)}}],[{key:"init",value:function(e){Ba=e.store}}]),e}()},1206:function(e){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),a=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var a=e.getVersionPrecision(t),i=e.getVersionPrecision(r),o=Math.max(a,i),s=0,c=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(s=o-Math.min(a,i)),o-=1;o>=s;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===s)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var a=e[r];if(t(a,r))return a}},e.assign=function(e){for(var t,r,n=e,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var s=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=i.length;t<r;t+=1)s();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=a,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);var o=function(){function e(){}var t;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new a.default(e,t)},e.parse=function(e){return new a.default(e).getResult()},(t=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e,t),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=c(r(92)),a=c(r(93)),i=c(r(94)),o=c(r(95)),s=c(r(17));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,a={},i=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(a[t]=o,i+=1):"object"==typeof o&&(r[t]=o,n+=1)})),n>0){var o=Object.keys(r),c=s.default.find(o,(function(e){return t.isOS(e)}));if(c){var l=this.satisfies(r[c]);if(void 0!==l)return l}var u=s.default.find(o,(function(e){return t.isPlatform(e)}));if(u){var d=this.satisfies(r[u]);if(void 0!==d)return d}}if(i>0){var p=Object.keys(a),f=s.default.find(p,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(a[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),a=s.default.getBrowserTypeByAlias(n);return t&&a&&(n=a.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,a=this.getBrowserVersion();if("string"==typeof a)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(s.default.compareVersions(a,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(t,e),version:a.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=a.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},r=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=a.default.getMacOSVersionName(t),n={name:i.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=a.default.getAndroidVersionName(t),n={name:i.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:i.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},r=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},r=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},r=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},r=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})},452:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.BlockCipher,r=e.algo,a=[],i=[],o=[],s=[],c=[],l=[],u=[],d=[],p=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99,a[r]=h,i[h]=r;var m=e[r],y=e[m],v=e[y],g=257*e[h]^16843008*h;o[r]=g<<24|g>>>8,s[r]=g<<16|g>>>16,c[r]=g<<8|g>>>24,l[r]=g,g=16843009*v^65537*y^257*m^16843008*r,u[h]=g<<24|g>>>8,d[h]=g<<16|g>>>16,p[h]=g<<8|g>>>24,f[h]=g,r?(r=m^e[e[e[v^m]]],n^=e[e[n]]):r=n=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],o=0;o<n;o++)o<r?i[o]=t[o]:(l=i[o-1],o%r?r>6&&o%r==4&&(l=a[l>>>24]<<24|a[l>>>16&255]<<16|a[l>>>8&255]<<8|a[255&l]):(l=a[(l=l<<8|l>>>24)>>>24]<<24|a[l>>>16&255]<<16|a[l>>>8&255]<<8|a[255&l],l^=h[o/r|0]<<24),i[o]=i[o-r]^l);for(var s=this._invKeySchedule=[],c=0;c<n;c++){if(o=n-c,c%4)var l=i[o];else l=i[o-4];s[c]=c<4||o<=4?l:u[a[l>>>24]]^d[a[l>>>16&255]]^p[a[l>>>8&255]]^f[a[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,l,a)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,d,p,f,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,a,i,o,s){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],p=e[t+3]^r[3],f=4,h=1;h<c;h++){var m=n[l>>>24]^a[u>>>16&255]^i[d>>>8&255]^o[255&p]^r[f++],y=n[u>>>24]^a[d>>>16&255]^i[p>>>8&255]^o[255&l]^r[f++],v=n[d>>>24]^a[p>>>16&255]^i[l>>>8&255]^o[255&u]^r[f++],g=n[p>>>24]^a[l>>>16&255]^i[u>>>8&255]^o[255&d]^r[f++];l=m,u=y,d=v,p=g}m=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&p])^r[f++],y=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^r[f++],v=(s[d>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^r[f++],g=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^r[f++],e[t]=m,e[t+1]=y,e[t+2]=v,e[t+3]=g},keySize:8});e.AES=t._createHelper(m)}(),n.AES)},5109:function(e,t,r){var n;e.exports=(n=r(8249),r(888),void(n.lib.Cipher||function(e){var t=n,r=t.lib,a=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),l=t.algo.EvpKDF,u=r.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:v}return function(t){return{encrypt:function(r,n,a){return e(n).encrypt(t,r,n,a)},decrypt:function(r,n,a){return e(n).decrypt(t,r,n,a)}}}}()}),d=(r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),p=r.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=d.CBC=function(){var e=p.extend();function t(e,t,r){var n,a=this._iv;a?(n=a,this._iv=void 0):n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,a=n.blockSize;t.call(this,e,r,a),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+a)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,a=n.blockSize,i=e.slice(r,r+a);n.decryptBlock(e,r),t.call(this,e,r,a),this._prevBlock=i}}),e}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,a=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(a);var c=i.create(o,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){var e;u.reset.call(this);var t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),r.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?i.create([1398893684,1701076831]).concat(r).concat(t):t).toString(c)},parse:function(e){var t,r=c.parse(e),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=i.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),m.create({ciphertext:r,salt:t})}},v=r.SerializableCipher=a.extend({cfg:a.extend({format:y}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var a=e.createEncryptor(r,n),i=a.finalize(t),o=a.cfg;return m.create({ciphertext:i,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),g=(t.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=i.random(8));var a=l.create({keySize:t+r}).compute(e,n),o=i.create(a.words.slice(t),4*r);return a.sigBytes=4*t,m.create({key:a,iv:o,salt:n})}},_=r.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:g}),encrypt:function(e,t,r,n){var a=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=a.iv;var i=v.encrypt.call(this,e,t,a.key,n);return i.mixIn(a),i},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var a=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=a.iv,v.decrypt.call(this,e,t,a.key,n)}})}()))},8249:function(e,t,r){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(2480)}catch(e){}var a=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},s=o.lib={},c=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,a=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<a;i++){var o=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=o<<24-(n+i)%4*8}else for(var s=0;s<a;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(a());return new l.init(t,e)}}),u=o.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a++){var i=t[a>>>2]>>>24-a%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},p=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a++){var i=t[a>>>2]>>>24-a%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,a=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,u=e.min(4*c,i);if(c){for(var d=0;d<c;d+=o)this._doProcessBlock(a,d);r=a.splice(0,c),n.sigBytes-=u}return new l.init(r,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(s.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}}),o.algo={});return o}(Math),n)},8269:function(e,t,r){var n;e.exports=(n=r(8249),function(){var e=n,t=e.lib.WordArray;function r(e,r,n){for(var a=[],i=0,o=0;o<r;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;a[i>>>2]|=s<<24-i%4*8,i++}return t.create(a,i)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var a=[],i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)a.push(n.charAt(o>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,n=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var i=0;i<n.length;i++)a[n.charCodeAt(i)]=i}var o=n.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return r(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},3786:function(e,t,r){var n;e.exports=(n=r(8249),function(){var e=n,t=e.lib.WordArray;function r(e,r,n){for(var a=[],i=0,o=0;o<r;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;a[i>>>2]|=s<<24-i%4*8,i++}return t.create(a,i)}e.enc.Base64url={stringify:function(e,t=!0){var r=e.words,n=e.sigBytes,a=t?this._safe_map:this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(r[o>>>2]>>>24-o%4*8&255)<<16|(r[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|r[o+2>>>2]>>>24-(o+2)%4*8&255,c=0;c<4&&o+.75*c<n;c++)i.push(a.charAt(s>>>6*(3-c)&63));var l=a.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,t=!0){var n=e.length,a=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<a.length;o++)i[a.charCodeAt(o)]=o}var s=a.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(n=c)}return r(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)},298:function(e,t,r){var n;e.exports=(n=r(8249),function(){var e=n,t=e.lib.WordArray,r=e.enc;function a(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a+=2){var i=t[a>>>2]>>>16-a%4*8&65535;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var r=e.length,n=[],a=0;a<r;a++)n[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(n,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var o=a(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>1]|=a(e.charCodeAt(i)<<16-i%2*16);return t.create(n,2*r)}}}(),n.enc.Utf16)},888:function(e,t,r){var n,a,i,o,s,c,l,u;e.exports=(u=r(8249),r(2783),r(9824),i=(a=(n=u).lib).Base,o=a.WordArray,c=(s=n.algo).MD5,l=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,a=n.hasher.create(),i=o.create(),s=i.words,c=n.keySize,l=n.iterations;s.length<c;){r&&a.update(r),r=a.update(e).finalize(t),a.reset();for(var u=1;u<l;u++)r=a.finalize(r),a.reset();i.concat(r)}return i.sigBytes=4*c,i}}),n.EvpKDF=function(e,t,r){return l.create(r).compute(e,t)},u.EvpKDF)},2209:function(e,t,r){var n,a,i,o;e.exports=(o=r(8249),r(5109),a=(n=o).lib.CipherParams,i=n.enc.Hex,n.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return a.create({ciphertext:t})}},o.format.Hex)},9824:function(e,t,r){var n,a,i;e.exports=(a=(n=r(8249)).lib.Base,i=n.enc.Utf8,void(n.algo.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,c=o.words,l=0;l<r;l++)s[l]^=1549556828,c[l]^=909522486;a.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},1354:function(e,t,r){var n;e.exports=(n=r(8249),r(4938),r(4433),r(298),r(8269),r(3786),r(8214),r(2783),r(2153),r(7792),r(34),r(7460),r(3327),r(706),r(9824),r(2112),r(888),r(5109),r(8568),r(4242),r(9968),r(7660),r(1148),r(3615),r(2807),r(1077),r(6475),r(6991),r(2209),r(452),r(4253),r(1857),r(4454),r(3974),n)},4433:function(e,t,r){var n;e.exports=(n=r(8249),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,n=[],a=0;a<r;a++)n[a>>>2]|=e[a]<<24-a%4*8;t.call(this,n,r)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)},8214:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=i.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,a=e[n];e[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i=this._hash.words,o=e[t+0],c=e[t+1],f=e[t+2],h=e[t+3],m=e[t+4],y=e[t+5],v=e[t+6],g=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],S=e[t+11],E=e[t+12],P=e[t+13],k=e[t+14],T=e[t+15],R=i[0],C=i[1],O=i[2],x=i[3];R=l(R,C,O,x,o,7,s[0]),x=l(x,R,C,O,c,12,s[1]),O=l(O,x,R,C,f,17,s[2]),C=l(C,O,x,R,h,22,s[3]),R=l(R,C,O,x,m,7,s[4]),x=l(x,R,C,O,y,12,s[5]),O=l(O,x,R,C,v,17,s[6]),C=l(C,O,x,R,g,22,s[7]),R=l(R,C,O,x,_,7,s[8]),x=l(x,R,C,O,b,12,s[9]),O=l(O,x,R,C,w,17,s[10]),C=l(C,O,x,R,S,22,s[11]),R=l(R,C,O,x,E,7,s[12]),x=l(x,R,C,O,P,12,s[13]),O=l(O,x,R,C,k,17,s[14]),R=u(R,C=l(C,O,x,R,T,22,s[15]),O,x,c,5,s[16]),x=u(x,R,C,O,v,9,s[17]),O=u(O,x,R,C,S,14,s[18]),C=u(C,O,x,R,o,20,s[19]),R=u(R,C,O,x,y,5,s[20]),x=u(x,R,C,O,w,9,s[21]),O=u(O,x,R,C,T,14,s[22]),C=u(C,O,x,R,m,20,s[23]),R=u(R,C,O,x,b,5,s[24]),x=u(x,R,C,O,k,9,s[25]),O=u(O,x,R,C,h,14,s[26]),C=u(C,O,x,R,_,20,s[27]),R=u(R,C,O,x,P,5,s[28]),x=u(x,R,C,O,f,9,s[29]),O=u(O,x,R,C,g,14,s[30]),R=d(R,C=u(C,O,x,R,E,20,s[31]),O,x,y,4,s[32]),x=d(x,R,C,O,_,11,s[33]),O=d(O,x,R,C,S,16,s[34]),C=d(C,O,x,R,k,23,s[35]),R=d(R,C,O,x,c,4,s[36]),x=d(x,R,C,O,m,11,s[37]),O=d(O,x,R,C,g,16,s[38]),C=d(C,O,x,R,w,23,s[39]),R=d(R,C,O,x,P,4,s[40]),x=d(x,R,C,O,o,11,s[41]),O=d(O,x,R,C,h,16,s[42]),C=d(C,O,x,R,v,23,s[43]),R=d(R,C,O,x,b,4,s[44]),x=d(x,R,C,O,E,11,s[45]),O=d(O,x,R,C,T,16,s[46]),R=p(R,C=d(C,O,x,R,f,23,s[47]),O,x,o,6,s[48]),x=p(x,R,C,O,g,10,s[49]),O=p(O,x,R,C,k,15,s[50]),C=p(C,O,x,R,y,21,s[51]),R=p(R,C,O,x,E,6,s[52]),x=p(x,R,C,O,h,10,s[53]),O=p(O,x,R,C,w,15,s[54]),C=p(C,O,x,R,c,21,s[55]),R=p(R,C,O,x,_,6,s[56]),x=p(x,R,C,O,T,10,s[57]),O=p(O,x,R,C,v,15,s[58]),C=p(C,O,x,R,P,21,s[59]),R=p(R,C,O,x,m,6,s[60]),x=p(x,R,C,O,S,10,s[61]),O=p(O,x,R,C,f,15,s[62]),C=p(C,O,x,R,b,21,s[63]),i[0]=i[0]+R|0,i[1]=i[1]+C|0,i[2]=i[2]+O|0,i[3]=i[3]+x|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;r[a>>>5]|=128<<24-a%32;var i=e.floor(n/4294967296),o=n;r[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,n,a,i,o){var s=e+(t&r|~t&n)+a+o;return(s<<i|s>>>32-i)+t}function u(e,t,r,n,a,i,o){var s=e+(t&n|r&~n)+a+o;return(s<<i|s>>>32-i)+t}function d(e,t,r,n,a,i,o){var s=e+(t^r^n)+a+o;return(s<<i|s>>>32-i)+t}function p(e,t,r,n,a,i,o){var s=e+(r^(t|~n))+a+o;return(s<<i|s>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),n.MD5)},8568:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,r,n){var a,i=this._iv;i?(a=i.slice(0),this._iv=void 0):a=this._prevBlock,n.encryptBlock(a,0);for(var o=0;o<r;o++)e[t+o]^=a[o]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,a=n.blockSize;t.call(this,e,r,a,n),this._prevBlock=e.slice(r,r+a)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,a=n.blockSize,i=e.slice(r,r+a);t.call(this,e,r,a,n),this._prevBlock=i}}),e}(),n.mode.CFB)},9968:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var a=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0),r(o);var s=o.slice(0);n.encryptBlock(s,0);for(var c=0;c<a;c++)e[t+c]^=s[c]}});return e.Decryptor=a,e}(),n.mode.CTRGladman)},4242:function(e,t,r){var n,a,i;e.exports=(i=r(8249),r(5109),i.mode.CTR=(a=(n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0);var o=i.slice(0);r.encryptBlock(o,0),i[n-1]=i[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=o[s]}}),n.Decryptor=a,n),i.mode.CTR)},1148:function(e,t,r){var n,a;e.exports=(a=r(8249),r(5109),a.mode.ECB=((n=a.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),a.mode.ECB)},7660:function(e,t,r){var n,a,i;e.exports=(i=r(8249),r(5109),i.mode.OFB=(a=(n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,a=this._iv,i=this._keystream;a&&(i=this._keystream=a.slice(0),this._iv=void 0),r.encryptBlock(i,0);for(var o=0;o<n;o++)e[t+o]^=i[o]}}),n.Decryptor=a,n),i.mode.OFB)},3615:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,a=n-r%n,i=r+a-1;e.clamp(),e.words[i>>>2]|=a<<24-i%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)},2807:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.Iso10126={pad:function(e,t){var r=4*t,a=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(a-1)).concat(n.lib.WordArray.create([a<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)},1077:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)},6991:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},6475:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},n.pad.ZeroPadding)},2112:function(e,t,r){var n,a,i,o,s,c,l,u,d;e.exports=(d=r(8249),r(2783),r(9824),i=(a=(n=d).lib).Base,o=a.WordArray,c=(s=n.algo).SHA1,l=s.HMAC,u=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=l.create(r.hasher,e),a=o.create(),i=o.create([1]),s=a.words,c=i.words,u=r.keySize,d=r.iterations;s.length<u;){var p=n.update(t).finalize(i);n.reset();for(var f=p.words,h=f.length,m=p,y=1;y<d;y++){m=n.finalize(m),n.reset();for(var v=m.words,g=0;g<h;g++)f[g]^=v[g]}a.concat(p),c[0]++}return a.sigBytes=4*u,a}}),n.PBKDF2=function(e,t,r){return u.create(r).compute(e,t)},d.PBKDF2)},3974:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,a=[],i=[],o=[],s=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)c.call(this);for(a=0;a<8;a++)n[a]^=r[a+4&7];if(t){var i=t.words,o=i[0],s=i[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,p=u<<16|65535&l;for(n[0]^=l,n[1]^=d,n[2]^=u,n[3]^=p,n[4]^=l,n[5]^=d,n[6]^=u,n[7]^=p,a=0;a<4;a++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)a[n]=16711935&(a[n]<<8|a[n]>>>24)|4278255360&(a[n]<<24|a[n]>>>8),e[t+n]^=a[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],a=65535&n,s=n>>>16,c=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);o[r]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),n.RabbitLegacy)},4454:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,a=[],i=[],o=[],s=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)a[r]^=n[r+4&7];if(t){var i=t.words,o=i[0],s=i[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,p=u<<16|65535&l;for(a[0]^=l,a[1]^=d,a[2]^=u,a[3]^=p,a[4]^=l,a[5]^=d,a[6]^=u,a[7]^=p,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)a[n]=16711935&(a[n]<<8|a[n]>>>24)|4278255360&(a[n]<<24|a[n]>>>8),e[t+n]^=a[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],a=65535&n,s=n>>>16,c=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);o[r]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),n.Rabbit)},1857:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,a=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],a=0;a<256;a++)n[a]=a;a=0;for(var i=0;a<256;a++){var o=a%r,s=t[o>>>2]>>>24-o%4*8&255;i=(i+n[a]+s)%256;var c=n[a];n[a]=n[i],n[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,r=this._j,n=0,a=0;a<4;a++){r=(r+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[r],e[r]=i,n|=e[(e[t]+e[r])%256]<<24-8*a}return this._i=t,this._j=r,n}e.RC4=t._createHelper(a);var o=r.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(o)}(),n.RC4)},706:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=a.create([0,1518500249,1859775393,2400959708,2840853838]),p=a.create([1352829926,1548603684,1836072691,2053994217,0]),f=o.RIPEMD160=i.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,a=e[n];e[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i,o,f,b,w,S,E,P,k,T,R,C=this._hash.words,O=d.words,x=p.words,D=s.words,I=c.words,L=l.words,M=u.words;for(S=i=C[0],E=o=C[1],P=f=C[2],k=b=C[3],T=w=C[4],r=0;r<80;r+=1)R=i+e[t+D[r]]|0,R+=r<16?h(o,f,b)+O[0]:r<32?m(o,f,b)+O[1]:r<48?y(o,f,b)+O[2]:r<64?v(o,f,b)+O[3]:g(o,f,b)+O[4],R=(R=_(R|=0,L[r]))+w|0,i=w,w=b,b=_(f,10),f=o,o=R,R=S+e[t+I[r]]|0,R+=r<16?g(E,P,k)+x[0]:r<32?v(E,P,k)+x[1]:r<48?y(E,P,k)+x[2]:r<64?m(E,P,k)+x[3]:h(E,P,k)+x[4],R=(R=_(R|=0,M[r]))+T|0,S=T,T=k,k=_(P,10),P=E,E=R;R=C[1]+f+k|0,C[1]=C[2]+b+T|0,C[2]=C[3]+w+S|0,C[3]=C[4]+i+E|0,C[4]=C[0]+o+P|0,C[0]=R},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,i=a.words,o=0;o<5;o++){var s=i[o];i[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,r){return e^t^r}function m(e,t,r){return e&t|~e&r}function y(e,t,r){return(e|~t)^r}function v(e,t,r){return e&r|t&~r}function g(e,t,r){return e^(t|~r)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(f),t.HmacRIPEMD160=i._createHmacHelper(f)}(Math),n.RIPEMD160)},2783:function(e,t,r){var n,a,i,o,s,c,l,u;e.exports=(a=(n=u=r(8249)).lib,i=a.WordArray,o=a.Hasher,s=n.algo,c=[],l=s.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var d=(n<<5|n>>>27)+s+c[l];d+=l<20?1518500249+(a&i|~a&o):l<40?1859775393+(a^i^o):l<60?(a&i|a&o|i&o)-1894007588:(a^i^o)-899497514,s=o,o=i,i=a<<30|a>>>2,a=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(l),n.HmacSHA1=o._createHmacHelper(l),u.SHA1)},7792:function(e,t,r){var n,a,i,o,s,c;e.exports=(c=r(8249),r(2153),a=(n=c).lib.WordArray,i=n.algo,o=i.SHA256,s=i.SHA224=o.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=o._createHelper(s),n.HmacSHA224=o._createHmacHelper(s),c.SHA224)},2153:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,a=0;a<64;)t(n)&&(a<8&&(s[a]=r(e.pow(n,.5))),c[a]=r(e.pow(n,1/3)),a++),n++}();var l=[],u=o.SHA256=i.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],d=r[6],p=r[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var h=l[f-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,y=l[f-2],v=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=m+l[f-7]+v+l[f-16]}var g=n&a^n&i^a&i,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[f]+l[f];p=d,d=u,u=s,s=o+b|0,o=i,i=a,a=n,n=b+(_+g)|0}r[0]=r[0]+n|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0,r[5]=r[5]+u|0,r[6]=r[6]+d|0,r[7]=r[7]+p|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;return r[a>>>5]|=128<<24-a%32,r[14+(a+64>>>9<<4)]=e.floor(n/4294967296),r[15+(a+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(u),t.HmacSHA256=i._createHmacHelper(u)}(Math),n.SHA256)},3327:function(e,t,r){var n;e.exports=(n=r(8249),r(4938),function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.x64.Word,s=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,i=0;i<24;i++){for(var s=0,d=0,p=0;p<7;p++){if(1&a){var f=(1<<p)-1;f<32?d^=1<<f:s^=1<<f-32}128&a?a=a<<1^113:a<<=1}u[i]=o.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=o.create()}();var p=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,a=0;a<n;a++){var i=e[t+2*a],o=e[t+2*a+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(C=r[a]).high^=o,C.low^=i}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var f=0,h=0,m=0;m<5;m++)f^=(C=r[p+5*m]).high,h^=C.low;var y=d[p];y.high=f,y.low=h}for(p=0;p<5;p++){var v=d[(p+4)%5],g=d[(p+1)%5],_=g.high,b=g.low;for(f=v.high^(_<<1|b>>>31),h=v.low^(b<<1|_>>>31),m=0;m<5;m++)(C=r[p+5*m]).high^=f,C.low^=h}for(var w=1;w<25;w++){var S=(C=r[w]).high,E=C.low,P=c[w];P<32?(f=S<<P|E>>>32-P,h=E<<P|S>>>32-P):(f=E<<P-32|S>>>64-P,h=S<<P-32|E>>>64-P);var k=d[l[w]];k.high=f,k.low=h}var T=d[0],R=r[0];for(T.high=R.high,T.low=R.low,p=0;p<5;p++)for(m=0;m<5;m++){var C=r[w=p+5*m],O=d[w],x=d[(p+1)%5+5*m],D=d[(p+2)%5+5*m];C.high=O.high^~x.high&D.high,C.low=O.low^~x.low&D.low}C=r[0];var I=u[s];C.high^=I.high,C.low^=I.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=o[u],p=d.high,f=d.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(p)}return new a.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=i._createHelper(p),t.HmacSHA3=i._createHmacHelper(p)}(Math),n.SHA3)},7460:function(e,t,r){var n,a,i,o,s,c,l,u;e.exports=(u=r(8249),r(4938),r(34),a=(n=u).x64,i=a.Word,o=a.WordArray,s=n.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l),u.SHA384)},34:function(e,t,r){var n;e.exports=(n=r(8249),r(4938),function(){var e=n,t=e.lib.Hasher,r=e.x64,a=r.Word,i=r.WordArray,o=e.algo;function s(){return a.create.apply(a,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=o.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],d=r[6],p=r[7],f=n.high,h=n.low,m=a.high,y=a.low,v=i.high,g=i.low,_=o.high,b=o.low,w=s.high,S=s.low,E=u.high,P=u.low,k=d.high,T=d.low,R=p.high,C=p.low,O=f,x=h,D=m,I=y,L=v,M=g,A=_,j=b,N=w,F=S,B=E,U=P,z=k,V=T,H=R,W=C,Z=0;Z<80;Z++){var G,q,$=l[Z];if(Z<16)q=$.high=0|e[t+2*Z],G=$.low=0|e[t+2*Z+1];else{var K=l[Z-15],Q=K.high,X=K.low,J=(Q>>>1|X<<31)^(Q>>>8|X<<24)^Q>>>7,Y=(X>>>1|Q<<31)^(X>>>8|Q<<24)^(X>>>7|Q<<25),ee=l[Z-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ae=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ie=l[Z-7],oe=ie.high,se=ie.low,ce=l[Z-16],le=ce.high,ue=ce.low;q=(q=(q=J+oe+((G=Y+se)>>>0<Y>>>0?1:0))+ne+((G+=ae)>>>0<ae>>>0?1:0))+le+((G+=ue)>>>0<ue>>>0?1:0),$.high=q,$.low=G}var de,pe=N&B^~N&z,fe=F&U^~F&V,he=O&D^O&L^D&L,me=x&I^x&M^I&M,ye=(O>>>28|x<<4)^(O<<30|x>>>2)^(O<<25|x>>>7),ve=(x>>>28|O<<4)^(x<<30|O>>>2)^(x<<25|O>>>7),ge=(N>>>14|F<<18)^(N>>>18|F<<14)^(N<<23|F>>>9),_e=(F>>>14|N<<18)^(F>>>18|N<<14)^(F<<23|N>>>9),be=c[Z],we=be.high,Se=be.low,Ee=H+ge+((de=W+_e)>>>0<W>>>0?1:0),Pe=ve+me;H=z,W=V,z=B,V=U,B=N,U=F,N=A+(Ee=(Ee=(Ee=Ee+pe+((de+=fe)>>>0<fe>>>0?1:0))+we+((de+=Se)>>>0<Se>>>0?1:0))+q+((de+=G)>>>0<G>>>0?1:0))+((F=j+de|0)>>>0<j>>>0?1:0)|0,A=L,j=M,L=D,M=I,D=O,I=x,O=Ee+(ye+he+(Pe>>>0<ve>>>0?1:0))+((x=de+Pe|0)>>>0<de>>>0?1:0)|0}h=n.low=h+x,n.high=f+O+(h>>>0<x>>>0?1:0),y=a.low=y+I,a.high=m+D+(y>>>0<I>>>0?1:0),g=i.low=g+M,i.high=v+L+(g>>>0<M>>>0?1:0),b=o.low=b+j,o.high=_+A+(b>>>0<j>>>0?1:0),S=s.low=S+F,s.high=w+N+(S>>>0<F>>>0?1:0),P=u.low=P+U,u.high=E+B+(P>>>0<U>>>0?1:0),T=d.low=T+V,d.high=k+z+(T>>>0<V>>>0?1:0),C=p.low=C+W,p.high=R+H+(C>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),n.SHA512)},4253:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib,r=t.WordArray,a=t.BlockCipher,i=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=o[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var a=this._subKeys=[],i=0;i<16;i++){var l=a[i]=[],u=c[i];for(r=0;r<24;r++)l[r/6|0]|=t[(s[r]-1+u)%28]<<31-r%6,l[4+(r/6|0)]|=t[28+(s[r+24]-1+u)%28]<<31-r%6;for(l[0]=l[0]<<1|l[0]>>>31,r=1;r<7;r++)l[r]=l[r]>>>4*(r-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(r=0;r<16;r++)d[r]=a[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),p.call(this,1,1431655765);for(var n=0;n<16;n++){for(var a=r[n],i=this._lBlock,o=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((o^a[c])&u[c])>>>0];this._lBlock=o,this._rBlock=i^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,p.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=a._createHelper(d);var h=i.TripleDES=a.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),a=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(n)),this._des3=d.createEncryptor(r.create(a))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=a._createHelper(h)}(),n.TripleDES)},4938:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,a=r.Base,i=r.WordArray,o=t.x64={};o.Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var a=e[n];r.push(a.high),r.push(a.low)}return i.create(r,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),n)},1227:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,r)=>{e.exports=function(e){function t(e){let r,a,i,o=null;function s(...e){if(!s.enabled)return;const n=s,a=Number(new Date),i=a-(r||a);n.diff=i,n.prev=r,n.curr=a,r=a,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,a)=>{if("%%"===r)return"%";o++;const i=t.formatters[a];if("function"==typeof i){const t=e[o];r=i.call(n,t),e.splice(o,1),o--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(a!==t.namespaces&&(a=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(a),...t.skips.map(a).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},284:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},7187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,a)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var a,i,o,l;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=c(e))>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=u.bind(n);return a.listener=r,n.wrapFn=a,a}function p(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=h(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,o;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7855:(e,t,r)=>{const n=r(1227)("h264-profile-level-id");n.log=console.info.bind(console),t.ProfileConstrainedBaseline=1,t.ProfileBaseline=2,t.ProfileMain=3,t.ProfileConstrainedHigh=4,t.ProfileHigh=5,t.Level1_b=0,t.Level1=10,t.Level1_1=11,t.Level1_2=12,t.Level1_3=13,t.Level2=20,t.Level2_1=21,t.Level2_2=22,t.Level3=30,t.Level3_1=31,t.Level3_2=32,t.Level4=40,t.Level4_1=41,t.Level4_2=42,t.Level5=50,t.Level5_1=51,t.Level5_2=52;class a{constructor(e,t){this.profile=e,this.level=t}}t.ProfileLevelId=a;const i=new a(1,31);class o{constructor(e){this._mask=~l("x",e),this._maskedValue=l("1",e)}isMatch(e){return this._maskedValue===(e&this._mask)}}class s{constructor(e,t,r){this.profile_idc=e,this.profile_iop=t,this.profile=r}}const c=[new s(66,new o("x1xx0000"),1),new s(77,new o("1xxx0000"),1),new s(88,new o("11xx0000"),1),new s(66,new o("x0xx0000"),2),new s(88,new o("10xx0000"),2),new s(77,new o("0x0x0000"),3),new s(100,new o("00000000"),5),new s(100,new o("00001100"),4)];function l(e,t){return(t[0]===e)<<7|(t[1]===e)<<6|(t[2]===e)<<5|(t[3]===e)<<4|(t[4]===e)<<3|(t[5]===e)<<2|(t[6]===e)<<1|(t[7]===e)<<0}function u(e={}){const t=e["level-asymmetry-allowed"];return 1===t||"1"===t}t.parseProfileLevelId=function(e){if("string"!=typeof e||6!==e.length)return null;const t=parseInt(e,16);if(0===t)return null;const r=255&t,i=t>>8&255,o=t>>16&255;let s;switch(r){case 11:s=0!=(16&i)?0:11;break;case 10:case 12:case 13:case 20:case 21:case 22:case 30:case 31:case 32:case 40:case 41:case 42:case 50:case 51:case 52:s=r;break;default:return n("parseProfileLevelId() | unrecognized level_idc:%s",r),null}for(const e of c)if(o===e.profile_idc&&e.profile_iop.isMatch(i))return new a(e.profile,s);return n("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(e){if(0==e.level)switch(e.profile){case 1:return"42f00b";case 2:return"42100b";case 3:return"4d100b";default:return n("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",e.profile),null}let t;switch(e.profile){case 1:t="42e0";break;case 2:t="4200";break;case 3:t="4d00";break;case 4:t="640c";break;case 5:t="6400";break;default:return n("profileLevelIdToString() | unrecognized profile:%s",e.profile),null}let r=e.level.toString(16);return 1===r.length&&(r=`0${r}`),`${t}${r}`},t.parseSdpProfileLevelId=function(e={}){const r=e["profile-level-id"];return r?t.parseProfileLevelId(r):i},t.isSameProfile=function(e={},r={}){const n=t.parseSdpProfileLevelId(e),a=t.parseSdpProfileLevelId(r);return Boolean(n&&a&&n.profile===a.profile)},t.generateProfileLevelIdForAnswer=function(e={},r={}){if(!e["profile-level-id"]&&!r["profile-level-id"])return n("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const i=t.parseSdpProfileLevelId(e),o=t.parseSdpProfileLevelId(r);if(!i)throw new TypeError("invalid local_profile_level_id");if(!o)throw new TypeError("invalid remote_profile_level_id");if(i.profile!==o.profile)throw new TypeError("H264 Profile mismatch");const s=u(e)&&u(r),c=i.level,l=function(e,t){return 0===e?10!==t&&0!==t:0===t?10!==e:e<t}(d=c,p=o.level)?d:p;var d,p;const f=s?c:l;return n("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",i.profile,f),t.profileLevelIdToString(new a(i.profile,f))}},6808:(e,t,r)=>{var n,a,i;i=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function a(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},a.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+s}}function o(e,r){if("undefined"!=typeof document){for(var a={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var s=i[o].split("="),c=s.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(n.read||n)(c,l)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(a[l]=c,e===l)break}catch(e){}}return e?a[e]:a}}return a.set=i,a.get=function(e){return o(e,!1)},a.getJSON=function(e){return o(e,!0)},a.remove=function(t,r){i(t,"",e(r,{expires:-1}))},a.defaults={},a.withConverter=r,a}((function(){}))},void 0===(a="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=a),e.exports=i()},9514:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=void 0;const n=r(8562),a=r(4493),i=r(9992),o=new n.Logger("Consumer");class s extends a.EnhancedEventEmitter{constructor({id:e,localId:t,producerId:r,rtpReceiver:n,track:i,rtpParameters:s,appData:c}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,o.debug("constructor()"),this._id=e,this._localId=t,this._producerId=r,this._rtpReceiver=n,this._track=i,this._rtpParameters=s,this._paused=!i.enabled,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new i.InvalidStateError("closed");return new Promise(((e,t)=>{this.safeEmit("@getstats",e,t)}))}pause(){o.debug("pause()"),this._closed?o.error("pause() | Consumer closed"):this._paused?o.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){o.debug("resume()"),this._closed?o.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):o.debug("resume() | Consumer is already resumed")}onTrackEnded(){o.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch(e){}}}t.Consumer=s},1623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsumer=void 0;const n=r(8562),a=r(4493),i=new n.Logger("DataConsumer");class o extends a.EnhancedEventEmitter{constructor({id:e,dataProducerId:t,dataChannel:r,sctpStreamParameters:n,appData:o}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,i.debug("constructor()"),this._id=e,this._dataProducerId=t,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=o||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(i.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(i.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",(()=>{this._closed||(i.debug('DataChannel "open" event'),this.safeEmit("open"))})),this._dataChannel.addEventListener("error",(e=>{if(this._closed)return;let{error:t}=e;t||(t=new Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?i.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):i.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)})),this._dataChannel.addEventListener("close",(()=>{this._closed||(i.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))})),this._dataChannel.addEventListener("message",(e=>{this._closed||this.safeEmit("message",e.data)}))}}t.DataConsumer=o},5504:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProducer=void 0;const n=r(8562),a=r(4493),i=r(9992),o=new n.Logger("DataProducer");class s extends a.EnhancedEventEmitter{constructor({id:e,dataChannel:t,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,o.debug("constructor()"),this._id=e,this._dataChannel=t,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(o.debug("send()"),this._closed)throw new i.InvalidStateError("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",(()=>{this._closed||(o.debug('DataChannel "open" event'),this.safeEmit("open"))})),this._dataChannel.addEventListener("error",(e=>{if(this._closed)return;let{error:t}=e;t||(t=new Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?o.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):o.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)})),this._dataChannel.addEventListener("close",(()=>{this._closed||(o.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))})),this._dataChannel.addEventListener("message",(()=>{this._closed||o.warn('DataChannel "message" event in a DataProducer, message discarded')})),this._dataChannel.addEventListener("bufferedamountlow",(()=>{this._closed||this.safeEmit("bufferedamountlow")}))}}t.DataProducer=s},3120:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Device=t.detectDevice=void 0;const s=o(r(1206)),c=r(8562),l=r(4493),u=r(9992),d=i(r(3347)),p=i(r(5280)),f=r(5202),h=r(2960),m=r(6656),y=r(5372),v=r(5697),g=r(564),_=r(1419),b=r(9862),w=r(2205),S=r(7392),E=r(3433),P=r(4770),k=new c.Logger("Device");function T(){if("object"==typeof navigator&&"ReactNative"===navigator.product)return"undefined"==typeof RTCPeerConnection?void k.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):"undefined"!=typeof RTCRtpTransceiver?(k.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(k.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if("object"!=typeof navigator||"string"!=typeof navigator.userAgent)k.warn("this._detectDevice() | unknown device");else{const e=navigator.userAgent,t=s.default.getParser(e),r=t.getEngine();if(t.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(t.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}}))return"Safari12";if(t.satisfies({safari:">=12.0"})&&"undefined"!=typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(r.name&&"blink"===r.name.toLowerCase()){const t=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(t){const e=Number(t[1]);return e>=111?"Chrome111":e>=74?"Chrome74":e>=70?"Chrome70":e>=67?"Chrome67":"Chrome55"}return"Chrome111"}k.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion())}}t.detectDevice=T,t.Device=class{constructor({handlerName:e,handlerFactory:t,Handler:r}={}){if(this._loaded=!1,this._observer=new l.EnhancedEventEmitter,k.debug("constructor()"),r){if(k.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"!=typeof r)throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");e=r}if(e&&t)throw new TypeError("just one of handlerName or handlerInterface can be given");if(t)this._handlerFactory=t;else{if(e)k.debug("constructor() | handler given: %s",e);else{if(!(e=T()))throw new u.UnsupportedError("device not supported");k.debug("constructor() | detected handler: %s",e)}switch(e){case"Chrome111":this._handlerFactory=h.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=m.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=y.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=v.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=g.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=_.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=b.Safari12.createFactory();break;case"Safari11":this._handlerFactory=w.Safari11.createFactory();break;case"Edge11":this._handlerFactory=S.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=E.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=P.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){let t;k.debug("load() [routerRtpCapabilities:%o]",e),e=d.clone(e,void 0);try{if(this._loaded)throw new u.InvalidStateError("already loaded");p.validateRtpCapabilities(e),t=this._handlerFactory();const r=await t.getNativeRtpCapabilities();k.debug("load() | got native RTP capabilities:%o",r),p.validateRtpCapabilities(r),this._extendedRtpCapabilities=p.getExtendedRtpCapabilities(r,e),k.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=p.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=p.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=p.getRecvRtpCapabilities(this._extendedRtpCapabilities),p.validateRtpCapabilities(this._recvRtpCapabilities),k.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await t.getNativeSctpCapabilities(),k.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),p.validateSctpCapabilities(this._sctpCapabilities),k.debug("load() succeeded"),this._loaded=!0,t.close()}catch(e){throw t&&t.close(),e}}canProduce(e){if(!this._loaded)throw new u.InvalidStateError("not loaded");if("audio"!==e&&"video"!==e)throw new TypeError(`invalid kind "${e}"`);return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,appData:l}){return k.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,appData:l})}createRecvTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,appData:l}){return k.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,appData:l})}createTransport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:o,iceTransportPolicy:s,additionalSettings:c,proprietaryConstraints:l,appData:d}){if(!this._loaded)throw new u.InvalidStateError("not loaded");if("string"!=typeof t)throw new TypeError("missing id");if("object"!=typeof r)throw new TypeError("missing iceParameters");if(!Array.isArray(n))throw new TypeError("missing iceCandidates");if("object"!=typeof a)throw new TypeError("missing dtlsParameters");if(i&&"object"!=typeof i)throw new TypeError("wrong sctpParameters");if(d&&"object"!=typeof d)throw new TypeError("if given, appData must be an object");const p=new f.Transport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:o,iceTransportPolicy:s,additionalSettings:c,proprietaryConstraints:l,appData:d,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",p),p}}},4493:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancedEventEmitter=void 0;const n=r(7187),a=new(r(8562).Logger)("EnhancedEventEmitter");class i extends n.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...t){return super.emit(e,...t)}safeEmit(e,...t){const r=super.listenerCount(e);try{return super.emit(e,...t)}catch(t){return a.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,t),Boolean(r)}}on(e,t){return super.on(e,t),this}off(e,t){return super.off(e,t),this}addListener(e,t){return super.on(e,t),this}prependListener(e,t){return super.prependListener(e,t),this}once(e,t){return super.once(e,t),this}prependOnceListener(e,t){return super.prependOnceListener(e,t),this}removeListener(e,t){return super.off(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}}t.EnhancedEventEmitter=i},8562:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const a=n(r(388)),i="mediasoup-client";t.Logger=class{constructor(e){e?(this._debug=(0,a.default)(`${i}:${e}`),this._warn=(0,a.default)(`${i}:WARN:${e}`),this._error=(0,a.default)(`${i}:ERROR:${e}`)):(this._debug=(0,a.default)(i),this._warn=(0,a.default)(`${i}:WARN`),this._error=(0,a.default)(`${i}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Producer=void 0;const n=r(8562),a=r(4493),i=r(9992),o=new n.Logger("Producer");class s extends a.EnhancedEventEmitter{constructor({id:e,localId:t,rtpSender:r,track:n,rtpParameters:i,stopTracks:s,disableTrackOnPause:c,zeroRtpOnPause:l,appData:u}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,o.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=r,this._track=n,this._kind=n.kind,this._rtpParameters=i,this._paused=!!c&&!n.enabled,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=c,this._zeroRtpOnPause=l,this._appData=u||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new i.InvalidStateError("closed");return new Promise(((e,t)=>{this.safeEmit("@getstats",e,t)}))}pause(){o.debug("pause()"),this._closed?o.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise(((e,t)=>{this.safeEmit("@pause",e,t)})).catch((()=>{})),this._observer.safeEmit("pause"))}resume(){o.debug("resume()"),this._closed?o.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise(((e,t)=>{this.safeEmit("@resume",e,t)})).catch((()=>{})),this._observer.safeEmit("resume"))}async replaceTrack({track:e}){if(o.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(e){}throw new i.InvalidStateError("closed")}if(e&&"ended"===e.readyState)throw new i.InvalidStateError("track ended");e!==this._track?(await new Promise(((t,r)=>{this.safeEmit("@replacetrack",e,t,r)})),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):o.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(e){if(this._closed)throw new i.InvalidStateError("closed");if("video"!==this._kind)throw new i.UnsupportedError("not a video Producer");if("number"!=typeof e)throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise(((t,r)=>{this.safeEmit("@setmaxspatiallayer",e,t,r)})).catch((()=>{})),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new i.InvalidStateError("closed");if("object"!=typeof e)throw new TypeError("invalid params");await new Promise(((t,r)=>{this.safeEmit("@setrtpencodingparameters",e,t,r)}))}onTrackEnded(){o.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){}}}t.Producer=s},4879:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5202:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const s=r(2186),c=o(r(4375)),l=r(8562),u=r(4493),d=r(9992),p=i(r(3347)),f=i(r(5280)),h=r(6569),m=r(9514),y=r(5504),v=r(1623),g=new l.Logger("Transport");class _{constructor(e){this.consumerOptions=e,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class b extends u.EnhancedEventEmitter{constructor({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:o,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:d,appData:f,handlerFactory:h,extendedRtpCapabilities:m,canProduceByKind:y}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new s.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new u.EnhancedEventEmitter,g.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=m,this._canProduceByKind=y,this._maxSctpMessageSize=i?i.maxMessageSize:null,delete(l=p.clone(l,{})).iceServers,delete l.iceTransportPolicy,delete l.bundlePolicy,delete l.rtcpMuxPolicy,delete l.sdpSemantics,this._handler=h(),this._handler.run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:o,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:d,extendedRtpCapabilities:m}),this._appData=f||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){if(!this._closed){g.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new d.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(g.debug("restartIce()"),this._closed)throw new d.InvalidStateError("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push((async()=>this._handler.restartIce(e)),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(g.debug("updateIceServers()"),this._closed)throw new d.InvalidStateError("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push((async()=>this._handler.updateIceServers(e)),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:r,codec:n,stopTracks:a=!0,disableTrackOnPause:i=!0,zeroRtpOnPause:o=!1,appData:s={}}={}){if(g.debug("produce() [track:%o]",e),this._closed)throw new d.InvalidStateError("closed");if(!e)throw new TypeError("missing track");if("send"!==this._direction)throw new d.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[e.kind])throw new d.UnsupportedError(`cannot produce ${e.kind}`);if("ended"===e.readyState)throw new d.InvalidStateError("track ended");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("produce"))throw new TypeError('no "produce" listener set into this transport');if(s&&"object"!=typeof s)throw new TypeError("if given, appData must be an object");return this._awaitQueue.push((async()=>{let c;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&0===t.length?c=void 0:t&&(c=t.map((e=>{const t={active:!0};return!1===e.active&&(t.active=!1),"boolean"==typeof e.dtx&&(t.dtx=e.dtx),"string"==typeof e.scalabilityMode&&(t.scalabilityMode=e.scalabilityMode),"number"==typeof e.scaleResolutionDownBy&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),"number"==typeof e.maxBitrate&&(t.maxBitrate=e.maxBitrate),"number"==typeof e.maxFramerate&&(t.maxFramerate=e.maxFramerate),"boolean"==typeof e.adaptivePtime&&(t.adaptivePtime=e.adaptivePtime),"string"==typeof e.priority&&(t.priority=e.priority),"string"==typeof e.networkPriority&&(t.networkPriority=e.networkPriority),t})));const{localId:l,rtpParameters:u,rtpSender:d}=await this._handler.send({track:e,encodings:c,codecOptions:r,codec:n});try{f.validateRtpParameters(u);const{id:t}=await new Promise(((t,r)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:u,appData:s},t,r)})),r=new h.Producer({id:t,localId:l,rtpSender:d,track:e,rtpParameters:u,stopTracks:a,disableTrackOnPause:i,zeroRtpOnPause:o,appData:s});return this._producers.set(r.id,r),this.handleProducer(r),this._observer.safeEmit("newproducer",r),r}catch(e){throw this._handler.stopSending(l).catch((()=>{})),e}}),"transport.produce()").catch((t=>{if(a)try{e.stop()}catch(e){}throw t}))}async consume({id:e,producerId:t,kind:r,rtpParameters:n,streamId:a,appData:i={}}){if(g.debug("consume()"),n=p.clone(n,void 0),this._closed)throw new d.InvalidStateError("closed");if("recv"!==this._direction)throw new d.UnsupportedError("not a receiving Transport");if("string"!=typeof e)throw new TypeError("missing id");if("string"!=typeof t)throw new TypeError("missing producerId");if("audio"!==r&&"video"!==r)throw new TypeError(`invalid kind '${r}'`);if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(i&&"object"!=typeof i)throw new TypeError("if given, appData must be an object");if(!f.canReceive(n,this._extendedRtpCapabilities))throw new d.UnsupportedError("cannot consume this Producer");const o=new _({id:e,producerId:t,kind:r,rtpParameters:n,streamId:a,appData:i});return this._pendingConsumerTasks.push(o),(0,c.default)((()=>{this._closed||!1===this._consumerCreationInProgress&&this.createPendingConsumers()})),o.promise}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:r,label:n="",protocol:a="",appData:i={}}={}){if(g.debug("produceData()"),this._closed)throw new d.InvalidStateError("closed");if("send"!==this._direction)throw new d.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new d.UnsupportedError("SCTP not enabled by remote Transport");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("producedata"))throw new TypeError('no "producedata" listener set into this transport');if(i&&"object"!=typeof i)throw new TypeError("if given, appData must be an object");return(t||r)&&(e=!1),this._awaitQueue.push((async()=>{const{dataChannel:o,sctpStreamParameters:s}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a});f.validateSctpStreamParameters(s);const{id:c}=await new Promise(((e,t)=>{this.safeEmit("producedata",{sctpStreamParameters:s,label:n,protocol:a,appData:i},e,t)})),l=new y.DataProducer({id:c,dataChannel:o,sctpStreamParameters:s,appData:i});return this._dataProducers.set(l.id,l),this.handleDataProducer(l),this._observer.safeEmit("newdataproducer",l),l}),"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:r,label:n="",protocol:a="",appData:i={}}){if(g.debug("consumeData()"),r=p.clone(r,void 0),this._closed)throw new d.InvalidStateError("closed");if("recv"!==this._direction)throw new d.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new d.UnsupportedError("SCTP not enabled by remote Transport");if("string"!=typeof e)throw new TypeError("missing id");if("string"!=typeof t)throw new TypeError("missing dataProducerId");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(i&&"object"!=typeof i)throw new TypeError("if given, appData must be an object");return f.validateSctpStreamParameters(r),this._awaitQueue.push((async()=>{const{dataChannel:o}=await this._handler.receiveDataChannel({sctpStreamParameters:r,label:n,protocol:a}),s=new v.DataConsumer({id:e,dataProducerId:t,dataChannel:o,sctpStreamParameters:r,appData:i});return this._dataConsumers.set(s.id,s),this.handleDataConsumer(s),this._observer.safeEmit("newdataconsumer",s),s}),"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingConsumerTasks.length)return void g.debug("createPendingConsumers() | there is no Consumer to be created");const e=[...this._pendingConsumerTasks];let t;this._pendingConsumerTasks=[];const r=[];for(const t of e){const{id:e,kind:n,rtpParameters:a,streamId:i}=t.consumerOptions;r.push({trackId:e,kind:n,rtpParameters:a,streamId:i})}try{const n=await this._handler.receive(r);for(let r=0;r<n.length;++r){const a=e[r],i=n[r],{id:o,producerId:s,kind:c,rtpParameters:l,appData:u}=a.consumerOptions,{localId:d,rtpReceiver:p,track:f}=i,h=new m.Consumer({id:o,localId:d,producerId:s,rtpReceiver:p,track:f,rtpParameters:l,appData:u});this._consumers.set(h.id,h),this.handleConsumer(h),this._probatorConsumerCreated||t||"video"!==c||(t=h),this._observer.safeEmit("newconsumer",h),a.resolve(h)}}catch(t){for(const r of e)r.reject(t)}if(t)try{const e=f.generateProbatorRtpParameters(t.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:e}]),g.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(e){g.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",e)}}),"transport.createPendingConsumers()").then((()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()})).catch((()=>{}))}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingPauseConsumers.size)return void g.debug("pausePendingConsumers() | there is no Consumer to be paused");const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const t=e.map((e=>e.localId));await this._handler.pauseReceiving(t)}catch(e){g.error("pausePendingConsumers() | failed to pause Consumers:",e)}}),"transport.pausePendingConsumers").then((()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()})).catch((()=>{}))}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingResumeConsumers.size)return void g.debug("resumePendingConsumers() | there is no Consumer to be resumed");const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const t=e.map((e=>e.localId));await this._handler.resumeReceiving(t)}catch(e){g.error("resumePendingConsumers() | failed to resume Consumers:",e)}}),"transport.resumePendingConsumers").then((()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()})).catch((()=>{}))}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingCloseConsumers.size)return void g.debug("closePendingConsumers() | there is no Consumer to be closed");const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map((e=>e.localId)))}catch(e){g.error("closePendingConsumers() | failed to close Consumers:",e)}}),"transport.closePendingConsumers").then((()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()})).catch((()=>{}))}handleHandler(){const e=this._handler;e.on("@connect",(({dtlsParameters:e},t,r)=>{this._closed?r(new d.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:e},t,r)})),e.on("@connectionstatechange",(e=>{e!==this._connectionState&&(g.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))}))}handleProducer(e){e.on("@close",(()=>{this._producers.delete(e.id),this._closed||this._awaitQueue.push((async()=>this._handler.stopSending(e.localId)),"producer @close event").catch((e=>g.warn("producer.close() failed:%o",e)))})),e.on("@pause",((t,r)=>{this._awaitQueue.push((async()=>this._handler.pauseSending(e.localId)),"producer @pause event").then(t).catch(r)})),e.on("@resume",((t,r)=>{this._awaitQueue.push((async()=>this._handler.resumeSending(e.localId)),"producer @resume event").then(t).catch(r)})),e.on("@replacetrack",((t,r,n)=>{this._awaitQueue.push((async()=>this._handler.replaceTrack(e.localId,t)),"producer @replacetrack event").then(r).catch(n)})),e.on("@setmaxspatiallayer",((t,r,n)=>{this._awaitQueue.push((async()=>this._handler.setMaxSpatialLayer(e.localId,t)),"producer @setmaxspatiallayer event").then(r).catch(n)})),e.on("@setrtpencodingparameters",((t,r,n)=>{this._awaitQueue.push((async()=>this._handler.setRtpEncodingParameters(e.localId,t)),"producer @setrtpencodingparameters event").then(r).catch(n)})),e.on("@getstats",((t,r)=>{if(this._closed)return r(new d.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(t).catch(r)}))}handleConsumer(e){e.on("@close",(()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),this._closed||(this._pendingCloseConsumers.set(e.id,e),!1===this._consumerCloseInProgress&&this.closePendingConsumers())})),e.on("@pause",(()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),(0,c.default)((()=>{this._closed||!1===this._consumerPauseInProgress&&this.pausePendingConsumers()}))})),e.on("@resume",(()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),(0,c.default)((()=>{this._closed||!1===this._consumerResumeInProgress&&this.resumePendingConsumers()}))})),e.on("@getstats",((t,r)=>{if(this._closed)return r(new d.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(r)}))}handleDataProducer(e){e.on("@close",(()=>{this._dataProducers.delete(e.id)}))}handleDataConsumer(e){e.on("@close",(()=>{this._dataConsumers.delete(e.id)}))}}t.Transport=b},9992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidStateError=t.UnsupportedError=void 0;class r extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,r):this.stack=new Error(e).stack}}t.UnsupportedError=r;class n extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,n):this.stack=new Error(e).stack}}t.InvalidStateError=n},2960:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome111=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9072)),p=i(r(8954)),f=r(9316),h=r(7910),m=r(2770),y=new s.Logger("Chrome111"),v={OS:1024,MIS:1024};class g extends f.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(y.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const t=await e.createOffer();try{e.close()}catch(e){}const r=o.parse(t.sdp),n=u.extractRtpCapabilities({sdpObject:r});return p.addNackSuppportForOpus(n),n}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){y.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})))}async updateIceServers(e){y.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;if(this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1){t.forEach(((e,t)=>{e.rid=`r${t}`}));let e=1,r=1;for(const e of t){const t=e.scalabilityMode?(0,m.parse)(e.scalabilityMode).temporalLayers:3;t>r&&(r=t)}for(const n of t)n.rid="r"+e++,n.scalabilityMode=`L1T${r}`}const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=l.reduceCodecs(s.codecs,n);const p=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t}),h=await this._pc.createOffer();let v=o.parse(h.sdp);this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:v}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const g=f.mid;i.mid=g,v=o.parse(this._pc.localDescription.sdp);const _=v.media[p.idx];if(i.rtcp.cname=u.getCname({offerMediaObject:_}),t)if(1===t.length){const e=d.getRtpEncodings({offerMediaObject:_});Object.assign(e[0],t[0]),i.encodings=e}else i.encodings=t;else i.encodings=d.getRtpEncodings({offerMediaObject:_});this._remoteSdp.send({offerMediaObject:_,reuseMid:p.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r,extmapAllowMixed:!0});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(g,f),{localId:g,rtpParameters:i,rtpSender:f.sender}}async stopSending(e){this.assertSendDirection(),y.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");if(t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(e){}const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly";const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};y.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[],n=new Map;for(const t of e){const{trackId:e,kind:r,rtpParameters:a,streamId:i}=t;y.debug("receive() [trackId:%s, kind:%s]",e,r);const o=a.mid||String(this._mapMidTransceiver.size);n.set(e,o),this._remoteSdp.receive({mid:o,kind:r,offerRtpParameters:a,streamId:i||a.rtcp.cname,trackId:e})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let i=await this._pc.createAnswer();const s=o.parse(i.sdp);for(const t of e){const{trackId:e,rtpParameters:r}=t,a=n.get(e),i=s.media.find((e=>String(e.mid)===a));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:i})}i={type:"answer",sdp:o.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:s}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const t of e){const{trackId:e}=t,a=n.get(e),i=this._pc.getTransceivers().find((e=>e.mid===a));if(!i)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(a,i),r.push({localId:a,track:i.receiver.track,rtpReceiver:i.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("stopReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const t of e)this._mapMidTransceiver.delete(t)}async pauseReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("pauseReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("resumeReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome111=g},564:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome55=void 0;const o=i(r(766)),s=r(8562),c=r(9992),l=i(r(3347)),u=i(r(5280)),d=i(r(2267)),p=i(r(9875)),f=r(9316),h=r(7910),m=new s.Logger("Chrome55"),y={OS:1024,MIS:1024};class v extends f.HandlerInterface{static createFactory(){return()=>new v}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(e){}const r=o.parse(t.sdp);return d.extractRtpCapabilities({sdpObject:r})}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:l}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",l),video:u.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",l),video:u.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let i,s=await this._pc.createOffer(),c=o.parse(s.sdp);const f=l.clone(this._sendingRtpParametersByKind[e.kind],{});f.codecs=u.reduceCodecs(f.codecs);const h=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=u.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:c}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),c=o.parse(s.sdp),i=c.media.find((e=>"video"===e.type)),p.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(c)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),c=o.parse(this._pc.localDescription.sdp),i=c.media.find((t=>t.type===e.kind)),f.rtcp.cname=d.getCname({offerMediaObject:i}),f.encodings=p.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let e=0;e<f.encodings.length;++e)t[e]&&Object.assign(f.encodings[e],t[e]);if(f.encodings.length>1&&"video/vp8"===f.codecs[0].mimeType.toLowerCase())for(const e of f.encodings)e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:f,answerRtpParameters:h,codecOptions:r});const y={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);const v=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(v,e),{localId:v,rtpParameters:f}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdTrack.get(e);if(!t)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(e){if(0===this._sendStream.getTracks().length)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.toString());throw e}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){throw new c.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new c.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,t){throw new c.UnsupportedError("not supported")}async getSenderStats(e){throw new c.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};m.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[];for(const t of e){const{trackId:e,kind:r,rtpParameters:n,streamId:a}=t;m.debug("receive() [trackId:%s, kind:%s]",e,r);const i=r;this._remoteSdp.receive({mid:i,kind:r,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=o.parse(a.sdp);for(const t of e){const{kind:e,rtpParameters:r}=t,n=e,a=i.media.find((e=>String(e.mid)===n));d.applyCodecParameters({offerRtpParameters:r,answerMediaObject:a})}a={type:"answer",sdp:o.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:i}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const t of e){const{kind:e,trackId:n,rtpParameters:a}=t,i=e,o=n,s=t.streamId||a.rtcp.cname,c=this._pc.getRemoteStreams().find((e=>e.id===s)).getTrackById(o);if(!c)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(o,{mid:i,rtpParameters:a}),r.push({localId:o,track:c})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){m.debug("stopReceiving() [localId:%s]",t);const{mid:e,rtpParameters:r}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:r})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new c.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:c,protocol:r};m.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=d.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome55=v},5697:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome67=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9875)),p=r(9316),f=r(7910),h=new s.Logger("Chrome67"),m={OS:1024,MIS:1024};class y extends p.HandlerInterface{static createFactory(){return()=>new y}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(e){}const r=o.parse(t.sdp);return u.extractRtpCapabilities({sdpObject:r})}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){h.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(h.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){h.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let i,s=await this._pc.createOffer(),p=o.parse(s.sdp);const f=c.clone(this._sendingRtpParametersByKind[e.kind],{});f.codecs=l.reduceCodecs(f.codecs);const m=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(m.codecs=l.reduceCodecs(m.codecs),this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:p}),"video"===e.kind&&t&&t.length>1&&(h.debug("send() | enabling simulcast"),p=o.parse(s.sdp),i=p.media.find((e=>"video"===e.type)),d.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(p)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),p=o.parse(this._pc.localDescription.sdp),i=p.media.find((t=>t.type===e.kind)),f.rtcp.cname=u.getCname({offerMediaObject:i}),f.encodings=d.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let e=0;e<f.encodings.length;++e)t[e]&&Object.assign(f.encodings[e],t[e]);if(f.encodings.length>1&&"video/vp8"===f.codecs[0].mimeType.toLowerCase())for(const e of f.encodings)e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:f,answerRtpParameters:m,codecOptions:r});const y={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);const v=String(this._nextSendLocalId);this._nextSendLocalId++;const g=this._pc.getSenders().find((t=>t.track===e));return this._mapSendLocalIdRtpSender.set(v,g),{localId:v,rtpParameters:f,rtpSender:g}}async stopSending(e){this.assertSendDirection(),h.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(t),t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);const r=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(e){if(0===this._sendStream.getTracks().length)return void h.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.toString());throw e}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?h.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):h.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.setParameters(n)}async getSenderStats(e){this.assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};h.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[];for(const t of e){const{trackId:e,kind:r,rtpParameters:n,streamId:a}=t;h.debug("receive() [trackId:%s, kind:%s]",e,r);const i=r;this._remoteSdp.receive({mid:i,kind:r,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=o.parse(a.sdp);for(const t of e){const{kind:e,rtpParameters:r}=t,n=e,a=i.media.find((e=>String(e.mid)===n));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:a})}a={type:"answer",sdp:o.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:i}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const t of e){const{kind:e,trackId:n,rtpParameters:a}=t,i=n,o=e,s=this._pc.getReceivers().find((e=>e.track&&e.track.id===i));if(!s)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(i,{mid:o,rtpParameters:a,rtpReceiver:s}),r.push({localId:i,track:s.track,rtpReceiver:s})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){h.debug("stopReceiving() [localId:%s]",t);const{mid:e,rtpParameters:r}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:r})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw new Error("associated RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:c,protocol:r};h.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome67=y},5372:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome70=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9072)),p=r(9316),f=r(7910),h=r(2770),m=new s.Logger("Chrome70"),y={OS:1024,MIS:1024};class v extends p.HandlerInterface{static createFactory(){return()=>new v}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const t=await e.createOffer();try{e.close()}catch(e){}const r=o.parse(t.sdp);return u.extractRtpCapabilities({sdpObject:r})}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){m.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=l.reduceCodecs(s.codecs,n);const p=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let y,v=await this._pc.createOffer(),g=o.parse(v.sdp);this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:g}),t&&t.length>1&&(m.debug("send() | enabling legacy simulcast"),g=o.parse(v.sdp),y=g.media[p.idx],d.addLegacySimulcast({offerMediaObject:y,numStreams:t.length}),v={type:"offer",sdp:o.write(g)});let _=!1;const b=(0,h.parse)((t||[{}])[0].scalabilityMode);if(t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===i.codecs[0].mimeType.toLowerCase()&&(m.debug("send() | enabling legacy simulcast for VP9 SVC"),_=!0,g=o.parse(v.sdp),y=g.media[p.idx],d.addLegacySimulcast({offerMediaObject:y,numStreams:b.spatialLayers}),v={type:"offer",sdp:o.write(g)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),t){m.debug("send() | applying given encodings");const e=f.sender.getParameters();for(let r=0;r<(e.encodings||[]).length;++r){const n=e.encodings[r],a=t[r];if(!a)break;e.encodings[r]=Object.assign(n,a)}await f.sender.setParameters(e)}const w=f.mid;if(i.mid=w,g=o.parse(this._pc.localDescription.sdp),y=g.media[p.idx],i.rtcp.cname=u.getCname({offerMediaObject:y}),i.encodings=d.getRtpEncodings({offerMediaObject:y}),t)for(let e=0;e<i.encodings.length;++e)t[e]&&Object.assign(i.encodings[e],t[e]);if(_&&(i.encodings=[i.encodings[0]]),i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const e of i.encodings)e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:y,reuseMid:p.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(w,f),{localId:w,rtpParameters:i,rtpSender:f.sender}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");if(t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(e){}const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();m.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();m.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};m.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[],n=new Map;for(const t of e){const{trackId:e,kind:r,rtpParameters:a,streamId:i}=t;m.debug("receive() [trackId:%s, kind:%s]",e,r);const o=a.mid||String(this._mapMidTransceiver.size);n.set(e,o),this._remoteSdp.receive({mid:o,kind:r,offerRtpParameters:a,streamId:i||a.rtcp.cname,trackId:e})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let i=await this._pc.createAnswer();const s=o.parse(i.sdp);for(const t of e){const{trackId:e,rtpParameters:r}=t,a=n.get(e),i=s.media.find((e=>String(e.mid)===a));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:i})}i={type:"answer",sdp:o.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:s}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const t of e){const{trackId:e}=t,a=n.get(e),i=this._pc.getTransceivers().find((e=>e.mid===a));if(!i)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(a,i),r.push({localId:a,track:i.receiver.track,rtpReceiver:i.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){m.debug("stopReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const t of e)this._mapMidTransceiver.delete(t)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:c,protocol:r};m.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome70=v},6656:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome74=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9072)),p=i(r(8954)),f=r(9316),h=r(7910),m=r(2770),y=new s.Logger("Chrome74"),v={OS:1024,MIS:1024};class g extends f.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(y.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const t=await e.createOffer();try{e.close()}catch(e){}const r=o.parse(t.sdp),n=u.extractRtpCapabilities({sdpObject:r});return p.addNackSuppportForOpus(n),n}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){y.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})))}async updateIceServers(e){y.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach(((e,t)=>{e.rid=`r${t}`}));const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=l.reduceCodecs(s.codecs,n);const p=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t});let h,v=await this._pc.createOffer(),g=o.parse(v.sdp);this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:g});let _=!1;const b=(0,m.parse)((t||[{}])[0].scalabilityMode);t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===i.codecs[0].mimeType.toLowerCase()&&(y.debug("send() | enabling legacy simulcast for VP9 SVC"),_=!0,g=o.parse(v.sdp),h=g.media[p.idx],d.addLegacySimulcast({offerMediaObject:h,numStreams:b.spatialLayers}),v={type:"offer",sdp:o.write(g)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const w=f.mid;if(i.mid=w,g=o.parse(this._pc.localDescription.sdp),h=g.media[p.idx],i.rtcp.cname=u.getCname({offerMediaObject:h}),t)if(1===t.length){let e=d.getRtpEncodings({offerMediaObject:h});Object.assign(e[0],t[0]),_&&(e=[e[0]]),i.encodings=e}else i.encodings=t;else i.encodings=d.getRtpEncodings({offerMediaObject:h});if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const e of i.encodings)e.scalabilityMode?e.scalabilityMode=`L1T${b.temporalLayers}`:e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:p.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r,extmapAllowMixed:!0});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(w,f),{localId:w,rtpParameters:i,rtpSender:f.sender}}async stopSending(e){this.assertSendDirection(),y.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");if(t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(e){}const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly";const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};y.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[],n=new Map;for(const t of e){const{trackId:e,kind:r,rtpParameters:a,streamId:i}=t;y.debug("receive() [trackId:%s, kind:%s]",e,r);const o=a.mid||String(this._mapMidTransceiver.size);n.set(e,o),this._remoteSdp.receive({mid:o,kind:r,offerRtpParameters:a,streamId:i||a.rtcp.cname,trackId:e})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let i=await this._pc.createAnswer();const s=o.parse(i.sdp);for(const t of e){const{trackId:e,rtpParameters:r}=t,a=n.get(e),i=s.media.find((e=>String(e.mid)===a));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:i})}i={type:"answer",sdp:o.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:s}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const t of e){const{trackId:e}=t,a=n.get(e),i=this._pc.getTransceivers().find((e=>e.mid===a));if(!i)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(a,i),r.push({localId:a,track:i.receiver.track,rtpReceiver:i.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("stopReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const t of e)this._mapMidTransceiver.delete(t)}async pauseReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("pauseReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("resumeReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome74=g},7392:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Edge11=void 0;const o=r(8562),s=r(9992),c=i(r(3347)),l=i(r(5280)),u=i(r(3635)),d=r(9316),p=new o.Logger("Edge11");class f extends d.HandlerInterface{static createFactory(){return()=>new f}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){p.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(e){}try{this._dtlsTransport.stop()}catch(e){}for(const e of this._rtpSenders.values())try{e.stop()}catch(e){}for(const e of this._rtpReceivers.values())try{e.stop()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){return p.debug("getNativeRtpCapabilities()"),u.getCapabilities()}async getNativeSctpCapabilities(){return p.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:u,extendedRtpCapabilities:d}){p.debug("run()"),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",d),video:l.getSendingRtpParameters("video",d)},this._remoteIceParameters=t,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname=`CNAME-${c.generateRandomNumber()}`,this.setIceGatherer({iceServers:i,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new s.UnsupportedError("not supported")}async restartIce(e){if(p.debug("restartIce()"),this._remoteIceParameters=e,this._transportReady){p.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const e of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(e);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){p.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),p.debug("send() | calling new RTCRtpSender()");const a=new RTCRtpSender(e,this._dtlsTransport),i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const o=i.codecs.some((e=>/.+\/rtx$/i.test(e.mimeType)));t||(t=[{}]);for(const e of t)e.ssrc=c.generateRandomNumber(),o&&(e.rtx={ssrc:c.generateRandomNumber()});i.encodings=t,i.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const s=u.mangleRtpParameters(i);p.debug("send() | calling rtpSender.send() [params:%o]",s),await a.send(s);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(d,a),{localId:d,rtpParameters:i,rtpSender:a}}async stopSending(e){p.debug("stopSending() [localId:%s]",e);const t=this._rtpSenders.get(e);if(!t)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{p.debug("stopSending() | calling rtpSender.stop()"),t.stop()}catch(e){throw p.warn("stopSending() | rtpSender.stop() failed:%o",e),e}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){t?p.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):p.debug("replaceTrack() [localId:%s, no track]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(t)}async setMaxSpatialLayer(e,t){p.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.setParameters(n)}async setRtpEncodingParameters(e,t){p.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.setParameters(n)}async getSenderStats(e){const t=this._rtpSenders.get(e);if(!t)throw new Error("RTCRtpSender not found");return t.getStats()}async sendDataChannel(e){throw new s.UnsupportedError("not implemented")}async receive(e){const t=[];for(const t of e){const{trackId:e,kind:r}=t;p.debug("receive() [trackId:%s, kind:%s]",e,r)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of e){const{trackId:e,kind:n,rtpParameters:a}=r;p.debug("receive() | calling new RTCRtpReceiver()");const i=new RTCRtpReceiver(this._dtlsTransport,n);i.addEventListener("error",(e=>{p.error('rtpReceiver "error" event [event:%o]',e)}));const o=u.mangleRtpParameters(a);p.debug("receive() | calling rtpReceiver.receive() [params:%o]",o),await i.receive(o);const s=e;this._rtpReceivers.set(s,i),t.push({localId:s,track:i.track,rtpReceiver:i})}return t}async stopReceiving(e){for(const t of e){p.debug("stopReceiving() [localId:%s]",t);const r=this._rtpReceivers.get(t);if(!r)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(t);try{p.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(e){p.warn("stopReceiving() | rtpReceiver.stop() failed:%o",e)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const t=this._rtpReceivers.get(e);if(!t)throw new Error("RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel(e){throw new s.UnsupportedError("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:t}){const r=new RTCIceGatherer({iceServers:e||[],gatherPolicy:t||"all"});r.addEventListener("error",(e=>{p.error('iceGatherer "error" event [event:%o]',e)}));try{r.gather()}catch(e){p.debug("setIceGatherer() | iceGatherer.gather() failed: %s",e.toString())}this._iceGatherer=r}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",(()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})),e.addEventListener("icestatechange",(()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})),e.addEventListener("candidatepairchange",(e=>{p.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)})),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",(()=>{p.debug('dtlsTransport "statechange" event [state:%s]',e.state)})),e.addEventListener("dtlsstatechange",(()=>{p.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),"closed"===e.state&&this.emit("@connectionstatechange","closed")})),e.addEventListener("error",(e=>{p.error('dtlsTransport "error" event [event:%o]',e)})),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){p.debug("setupTransport()");const t=this._dtlsTransport.getLocalParameters();t.role=e,await new Promise(((e,r)=>{this.safeEmit("@connect",{dtlsParameters:t},e,r)})),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const e of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(e);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter((e=>"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm)),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}t.Edge11=f},1419:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox60=void 0;const o=i(r(766)),s=r(8562),c=r(9992),l=i(r(3347)),u=i(r(5280)),d=i(r(2267)),p=i(r(9072)),f=r(9316),h=r(7910),m=r(2770),y=new s.Logger("Firefox60"),v={OS:16,MIS:2048};class g extends f.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(y.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");const r=t.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const n=e.addTransceiver(r,{direction:"sendrecv"}),a=n.sender.getParameters(),i=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];a.encodings=i,await n.sender.setParameters(a);const s=await e.createOffer();try{t.remove()}catch(e){}try{r.stop()}catch(e){}try{e.close()}catch(e){}const c=o.parse(s.sdp);return d.extractRtpCapabilities({sdpObject:c})}catch(n){try{t.remove()}catch(e){}try{r.stop()}catch(e){}try{e.close()}catch(e){}throw n}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:l}){y.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",l),video:u.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",l),video:u.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){throw new c.UnsupportedError("not supported")}async restartIce(e){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&(t=l.clone(t,[])).length>1&&(t.forEach(((e,t)=>{e.rid=`r${t}`})),t.reverse());const a=l.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=u.reduceCodecs(a.codecs,n);const i=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=u.reduceCodecs(i.codecs,n);const s=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(t){const e=s.sender.getParameters();e.encodings=t,await s.sender.setParameters(e)}const c=await this._pc.createOffer();let f=o.parse(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:f});const h=(0,m.parse)((t||[{}])[0].scalabilityMode);y.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const v=s.mid;a.mid=v,f=o.parse(this._pc.localDescription.sdp);const g=f.media[f.media.length-1];if(a.rtcp.cname=d.getCname({offerMediaObject:g}),t)if(1===t.length){const e=p.getRtpEncodings({offerMediaObject:g});Object.assign(e[0],t[0]),a.encodings=e}else a.encodings=t.reverse();else a.encodings=p.getRtpEncodings({offerMediaObject:g});if(a.encodings.length>1&&("video/vp8"===a.codecs[0].mimeType.toLowerCase()||"video/h264"===a.codecs[0].mimeType.toLowerCase()))for(const e of a.encodings)e.scalabilityMode?e.scalabilityMode=`L1T${h.temporalLayers}`:e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r,extmapAllowMixed:!0});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(v,s),{localId:v,rtpParameters:a,rtpSender:s.sender}}async stopSending(e){y.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated transceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.disableMediaSection(t.mid);const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");const n=r.sender.getParameters();t=n.encodings.length-1-t,n.encodings.forEach(((e,r)=>{e.active=r>=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};y.debug("sendDataChannel() [options:%o]",i);const s=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:t}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:s,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertRecvDirection();const t=[],r=new Map;for(const t of e){const{trackId:e,kind:n,rtpParameters:a,streamId:i}=t;y.debug("receive() [trackId:%s, kind:%s]",e,n);const o=a.mid||String(this._mapMidTransceiver.size);r.set(e,o),this._remoteSdp.receive({mid:o,kind:n,offerRtpParameters:a,streamId:i||a.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=o.parse(a.sdp);for(const t of e){const{trackId:e,rtpParameters:n}=t,s=r.get(e),c=i.media.find((e=>String(e.mid)===s));d.applyCodecParameters({offerRtpParameters:n,answerMediaObject:c}),a={type:"answer",sdp:o.write(i)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:i}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const n of e){const{trackId:e}=n,a=r.get(e),i=this._pc.getTransceivers().find((e=>e.mid===a));if(!i)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(a,i),t.push({localId:a,track:i.receiver.track,rtpReceiver:i.receiver})}return t}async stopReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("stopReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const t of e)this._mapMidTransceiver.delete(t)}async pauseReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("pauseReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("resumeReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:s}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:s,protocol:r};y.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:e})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=d.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Firefox60=g},9316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerInterface=void 0;const n=r(4493);class a extends n.EnhancedEventEmitter{constructor(){super()}}t.HandlerInterface=a},4770:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNative=void 0;const o=i(r(766)),s=r(8562),c=r(9992),l=i(r(3347)),u=i(r(5280)),d=i(r(2267)),p=i(r(9875)),f=r(9316),h=r(7910),m=new s.Logger("ReactNative"),y={OS:1024,MIS:1024};class v extends f.HandlerInterface{static createFactory(){return()=>new v}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(m.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(e){}const r=o.parse(t.sdp);return d.extractRtpCapabilities({sdpObject:r})}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:l}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",l),video:u.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",l),video:u.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let i,s=await this._pc.createOffer(),c=o.parse(s.sdp);const f=l.clone(this._sendingRtpParametersByKind[e.kind],{});f.codecs=u.reduceCodecs(f.codecs);const h=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=u.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:c}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),c=o.parse(s.sdp),i=c.media.find((e=>"video"===e.type)),p.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(c)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),c=o.parse(this._pc.localDescription.sdp),i=c.media.find((t=>t.type===e.kind)),f.rtcp.cname=d.getCname({offerMediaObject:i}),f.encodings=p.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let e=0;e<f.encodings.length;++e)t[e]&&Object.assign(f.encodings[e],t[e]);if(f.encodings.length>1&&("video/vp8"===f.codecs[0].mimeType.toLowerCase()||"video/h264"===f.codecs[0].mimeType.toLowerCase()))for(const e of f.encodings)e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:f,answerRtpParameters:h,codecOptions:r});const y={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);const v=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(v,e),{localId:v,rtpParameters:f}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdTrack.get(e);if(!t)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(e){if(0===this._sendStream.getTracks().length)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.toString());throw e}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){throw new c.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new c.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,t){throw new c.UnsupportedError("not implemented")}async getSenderStats(e){throw new c.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};m.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[],n=new Map;for(const t of e){const{trackId:e,kind:r,rtpParameters:a}=t;m.debug("receive() [trackId:%s, kind:%s]",e,r);const i=r;let o=t.streamId||a.rtcp.cname;m.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),o+=`-hack-${l.generateRandomNumber()}`,n.set(e,o),this._remoteSdp.receive({mid:i,kind:r,offerRtpParameters:a,streamId:o,trackId:e})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let i=await this._pc.createAnswer();const s=o.parse(i.sdp);for(const t of e){const{kind:e,rtpParameters:r}=t,n=e,a=s.media.find((e=>String(e.mid)===n));d.applyCodecParameters({offerRtpParameters:r,answerMediaObject:a})}i={type:"answer",sdp:o.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:s}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const t of e){const{kind:e,trackId:a,rtpParameters:i}=t,o=a,s=e,c=n.get(a),l=this._pc.getRemoteStreams().find((e=>e.id===c)).getTrackById(o);if(!l)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(o,{mid:s,rtpParameters:i}),r.push({localId:o,track:l})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){m.debug("stopReceiving() [localId:%s]",t);const{mid:e,rtpParameters:r}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:r})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new c.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:c,protocol:r};m.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=d.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.ReactNative=v},3433:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeUnifiedPlan=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9072)),p=i(r(8954)),f=r(9316),h=r(7910),m=r(2770),y=new s.Logger("ReactNativeUnifiedPlan"),v={OS:1024,MIS:1024};class g extends f.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(y.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const t=await e.createOffer();try{e.close()}catch(e){}const r=o.parse(t.sdp),n=u.extractRtpCapabilities({sdpObject:r});return p.addNackSuppportForOpus(n),n}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){y.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){y.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach(((e,t)=>{e.rid=`r${t}`}));const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=l.reduceCodecs(s.codecs,n);const p=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t});let h,v=await this._pc.createOffer(),g=o.parse(v.sdp);this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:g});let _=!1;const b=(0,m.parse)((t||[{}])[0].scalabilityMode);t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===i.codecs[0].mimeType.toLowerCase()&&(y.debug("send() | enabling legacy simulcast for VP9 SVC"),_=!0,g=o.parse(v.sdp),h=g.media[p.idx],d.addLegacySimulcast({offerMediaObject:h,numStreams:b.spatialLayers}),v={type:"offer",sdp:o.write(g)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const w=f.mid;if(i.mid=w,g=o.parse(this._pc.localDescription.sdp),h=g.media[p.idx],i.rtcp.cname=u.getCname({offerMediaObject:h}),t)if(1===t.length){let e=d.getRtpEncodings({offerMediaObject:h});Object.assign(e[0],t[0]),_&&(e=[e[0]]),i.encodings=e}else i.encodings=t;else i.encodings=d.getRtpEncodings({offerMediaObject:h});if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const e of i.encodings)e.scalabilityMode?e.scalabilityMode=`L1T${b.temporalLayers}`:e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:p.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r,extmapAllowMixed:!0});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(w,f),{localId:w,rtpParameters:i,rtpSender:f.sender}}async stopSending(e){this.assertSendDirection(),y.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");if(t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(e){}const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly";const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};y.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[],n=new Map;for(const t of e){const{trackId:e,kind:r,rtpParameters:a,streamId:i}=t;y.debug("receive() [trackId:%s, kind:%s]",e,r);const o=a.mid||String(this._mapMidTransceiver.size);n.set(e,o),this._remoteSdp.receive({mid:o,kind:r,offerRtpParameters:a,streamId:i||a.rtcp.cname,trackId:e})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let i=await this._pc.createAnswer();const s=o.parse(i.sdp);for(const t of e){const{trackId:e,rtpParameters:r}=t,a=n.get(e),i=s.media.find((e=>String(e.mid)===a));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:i})}i={type:"answer",sdp:o.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:s}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const t of e){const{trackId:e}=t,a=n.get(e),i=this._pc.getTransceivers().find((e=>e.mid===a));if(!i)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(a,i),r.push({localId:a,track:i.receiver.track,rtpReceiver:i.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("stopReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const t of e)this._mapMidTransceiver.delete(t)}async pauseReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("pauseReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("resumeReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.ReactNativeUnifiedPlan=g},2205:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari11=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9875)),p=r(9316),f=r(7910),h=new s.Logger("Safari11"),m={OS:1024,MIS:1024};class y extends p.HandlerInterface{static createFactory(){return()=>new y}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(e){}const r=o.parse(t.sdp);return u.extractRtpCapabilities({sdpObject:r})}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){h.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(h.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){h.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let i,s=await this._pc.createOffer(),p=o.parse(s.sdp);const f=c.clone(this._sendingRtpParametersByKind[e.kind],{});f.codecs=l.reduceCodecs(f.codecs);const m=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(m.codecs=l.reduceCodecs(m.codecs),this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:p}),"video"===e.kind&&t&&t.length>1&&(h.debug("send() | enabling simulcast"),p=o.parse(s.sdp),i=p.media.find((e=>"video"===e.type)),d.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(p)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),p=o.parse(this._pc.localDescription.sdp),i=p.media.find((t=>t.type===e.kind)),f.rtcp.cname=u.getCname({offerMediaObject:i}),f.encodings=d.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let e=0;e<f.encodings.length;++e)t[e]&&Object.assign(f.encodings[e],t[e]);if(f.encodings.length>1&&"video/vp8"===f.codecs[0].mimeType.toLowerCase())for(const e of f.encodings)e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:f,answerRtpParameters:m,codecOptions:r});const y={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);const v=String(this._nextSendLocalId);this._nextSendLocalId++;const g=this._pc.getSenders().find((t=>t.track===e));return this._mapSendLocalIdRtpSender.set(v,g),{localId:v,rtpParameters:f,rtpSender:g}}async stopSending(e){this.assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);const r=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(e){if(0===this._sendStream.getTracks().length)return void h.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.toString());throw e}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?h.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):h.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.setParameters(n)}async getSenderStats(e){this.assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};h.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[];for(const t of e){const{trackId:e,kind:r,rtpParameters:n,streamId:a}=t;h.debug("receive() [trackId:%s, kind:%s]",e,r);const i=r;this._remoteSdp.receive({mid:i,kind:r,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=o.parse(a.sdp);for(const t of e){const{kind:e,rtpParameters:r}=t,n=e,a=i.media.find((e=>String(e.mid)===n));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:a})}a={type:"answer",sdp:o.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:i}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const t of e){const{kind:e,trackId:n,rtpParameters:a}=t,i=e,o=n,s=this._pc.getReceivers().find((e=>e.track&&e.track.id===o));if(!s)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(o,{mid:i,rtpParameters:a,rtpReceiver:s}),r.push({localId:o,track:s.track,rtpReceiver:s})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){h.debug("stopReceiving() [localId:%s]",t);const{mid:e,rtpParameters:r}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:r})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw new Error("associated RTCRtpReceiver not found");return t.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c,protocol:r};h.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Safari11=y},9862:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari12=void 0;const o=i(r(766)),s=r(8562),c=i(r(3347)),l=i(r(5280)),u=i(r(2267)),d=i(r(9072)),p=i(r(8954)),f=r(9316),h=r(7910),m=r(2770),y=new s.Logger("Safari12"),v={OS:1024,MIS:1024};class g extends f.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(y.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const t=await e.createOffer();try{e.close()}catch(e){}const r=o.parse(t.sdp),n=u.extractRtpCapabilities({sdpObject:r});return p.addNackSuppportForOpus(n),n}catch(t){try{e.close()}catch(e){}throw t}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:o,additionalSettings:s,proprietaryConstraints:c,extendedRtpCapabilities:u}){y.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",u),video:l.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",u),video:l.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},c),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){y.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){var a;this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=l.reduceCodecs(s.codecs,n);const p=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let h,v=await this._pc.createOffer(),g=o.parse(v.sdp);this._transportReady||await this.setupTransport({localDtlsRole:null!==(a=this._forcedLocalDtlsRole)&&void 0!==a?a:"client",localSdpObject:g});const _=(0,m.parse)((t||[{}])[0].scalabilityMode);t&&t.length>1&&(y.debug("send() | enabling legacy simulcast"),g=o.parse(v.sdp),h=g.media[p.idx],d.addLegacySimulcast({offerMediaObject:h,numStreams:t.length}),v={type:"offer",sdp:o.write(g)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const b=f.mid;if(i.mid=b,g=o.parse(this._pc.localDescription.sdp),h=g.media[p.idx],i.rtcp.cname=u.getCname({offerMediaObject:h}),i.encodings=d.getRtpEncodings({offerMediaObject:h}),t)for(let e=0;e<i.encodings.length;++e)t[e]&&Object.assign(i.encodings[e],t[e]);if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const e of i.encodings)e.scalabilityMode?e.scalabilityMode=`L1T${_.temporalLayers}`:e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:p.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(b,f),{localId:b,rtpParameters:i,rtpSender:f.sender}}async stopSending(e){this.assertSendDirection(),y.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");if(t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(e){}const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){var i;this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};y.debug("sendDataChannel() [options:%o]",s);const c=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:null!==(i=this._forcedLocalDtlsRole)&&void 0!==i?i:"client",localSdpObject:t}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:c,sctpStreamParameters:{streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits}}}async receive(e){var t;this.assertRecvDirection();const r=[],n=new Map;for(const t of e){const{trackId:e,kind:r,rtpParameters:a,streamId:i}=t;y.debug("receive() [trackId:%s, kind:%s]",e,r);const o=a.mid||String(this._mapMidTransceiver.size);n.set(e,o),this._remoteSdp.receive({mid:o,kind:r,offerRtpParameters:a,streamId:i||a.rtcp.cname,trackId:e})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let i=await this._pc.createAnswer();const s=o.parse(i.sdp);for(const t of e){const{trackId:e,rtpParameters:r}=t,a=n.get(e),i=s.media.find((e=>String(e.mid)===a));u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:i})}i={type:"answer",sdp:o.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:null!==(t=this._forcedLocalDtlsRole)&&void 0!==t?t:"client",localSdpObject:s}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const t of e){const{trackId:e}=t,a=n.get(e),i=this._pc.getTransceivers().find((e=>e.mid===a));if(!i)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(a,i),r.push({localId:a,track:i.receiver.track,rtpReceiver:i.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("stopReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const t of e)this._mapMidTransceiver.delete(t)}async pauseReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("pauseReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const t of e){y.debug("resumeReceiving() [localId:%s]",t);const e=this._mapMidTransceiver.get(t);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){var n;this.assertRecvDirection();const{streamId:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c}=e,l={negotiated:!0,id:a,ordered:i,maxPacketLifeTime:s,maxRetransmits:c,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);const u=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this.setupTransport({localDtlsRole:null!==(n=this._forcedLocalDtlsRole)&&void 0!==n?n:"client",localSdpObject:e})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Safari12=g},3635:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.mangleRtpParameters=t.getCapabilities=void 0;const o=i(r(3347));t.getCapabilities=function(){const e=RTCRtpReceiver.getCapabilities(),t=o.clone(e,{});for(const e of t.codecs){if(e.channels=e.numChannels,delete e.numChannels,e.mimeType=e.mimeType||`${e.kind}/${e.name}`,e.parameters){const t=e.parameters;t.apt&&(t.apt=Number(t.apt)),t["packetization-mode"]&&(t["packetization-mode"]=Number(t["packetization-mode"]))}for(const t of e.rtcpFeedback||[])t.parameter||(t.parameter="")}return t},t.mangleRtpParameters=function(e){const t=o.clone(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);for(const e of t.codecs)e.channels&&(e.numChannels=e.channels,delete e.channels),e.mimeType&&!e.name&&(e.name=e.mimeType.split("/")[1]),delete e.mimeType;return t}},8954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNackSuppportForOpus=void 0,t.addNackSuppportForOpus=function(e){var t;for(const r of e.codecs||[])"audio/opus"!==r.mimeType.toLowerCase()&&"audio/multiopus"!==r.mimeType.toLowerCase()||(null===(t=r.rtcpFeedback)||void 0===t?void 0:t.some((e=>"nack"===e.type&&!e.parameter)))||(r.rtcpFeedback||(r.rtcpFeedback=[]),r.rtcpFeedback.push({type:"nack"}))}},6698:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OfferMediaSection=t.AnswerMediaSection=t.MediaSection=void 0;const o=i(r(766)),s=i(r(3347));class c{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,e&&this.setIceParameters(e),t){this._mediaObject.candidates=[];for(const e of t){const t={component:1};t.foundation=e.foundation,t.ip=e.ip,t.port=e.port,t.priority=e.priority,t.transport=e.protocol,t.type=e.type,e.tcpType&&(t.tcptype=e.tcpType),this._mediaObject.candidates.push(t)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return 0===this._mediaObject.port}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}function l(e){const t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}t.MediaSection=c,t.AnswerMediaSection=class extends c{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:a,planB:i=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:u,codecOptions:d,extmapAllowMixed:p=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:i}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,a?(this._mediaObject.connection={ip:a.ip,version:a.ipVersion},this._mediaObject.port=a.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const e of u.codecs){const t={payload:e.payloadType,codec:l(e),rate:e.clockRate};e.channels>1&&(t.encoding=e.channels),this._mediaObject.rtp.push(t);const r=s.clone(e.parameters,{});let n=s.clone(e.rtcpFeedback,[]);if(d){const{opusStereo:t,opusFec:a,opusDtx:i,opusMaxPlaybackRate:o,opusMaxAverageBitrate:s,opusPtime:l,opusNack:u,videoGoogleStartBitrate:p,videoGoogleMaxBitrate:f,videoGoogleMinBitrate:h}=d,m=c.codecs.find((t=>t.payloadType===e.payloadType));switch(e.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":void 0!==t&&(m.parameters["sprop-stereo"]=t?1:0,r.stereo=t?1:0),void 0!==a&&(m.parameters.useinbandfec=a?1:0,r.useinbandfec=a?1:0),void 0!==i&&(m.parameters.usedtx=i?1:0,r.usedtx=i?1:0),void 0!==o&&(r.maxplaybackrate=o),void 0!==s&&(r.maxaveragebitrate=s),void 0!==l&&(m.parameters.ptime=l,r.ptime=l),u||(m.rtcpFeedback=m.rtcpFeedback.filter((e=>"nack"!==e.type||e.parameter)),n=n.filter((e=>"nack"!==e.type||e.parameter)));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":void 0!==p&&(r["x-google-start-bitrate"]=p),void 0!==f&&(r["x-google-max-bitrate"]=f),void 0!==h&&(r["x-google-min-bitrate"]=h)}}const a={payload:e.payloadType,config:""};for(const e of Object.keys(r))a.config&&(a.config+=";"),a.config+=`${e}=${r[e]}`;a.config&&this._mediaObject.fmtp.push(a);for(const t of n)this._mediaObject.rtcpFb.push({payload:e.payloadType,type:t.type,subtype:t.parameter})}this._mediaObject.payloads=u.codecs.map((e=>e.payloadType)).join(" "),this._mediaObject.ext=[];for(const e of u.headerExtensions)(o.ext||[]).some((t=>t.uri===e.uri))&&this._mediaObject.ext.push({uri:e.uri,value:e.id});if(p&&"extmap-allow-mixed"===o.extmapAllowMixed&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const e of o.rids||[])"send"===e.direction&&this._mediaObject.rids.push({id:e.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const e of o.rids||[])"send"===e.direction&&this._mediaObject.rids.push({id:e.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&"video"===this._mediaObject.type&&(this._mediaObject.xGoogleFlag="conference");break;case"application":"number"==typeof o.sctpPort?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize})}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){var t;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const t of e)t.rid&&(r[t.rid]=t);const n=this._mediaObject.simulcast.list1,a=o.parseSimulcastStreamList(n);for(const e of a)for(const n of e)n.paused=!(null===(t=r[n.scid])||void 0===t?void 0:t.active);this._mediaObject.simulcast.list1=a.map((e=>e.map((e=>`${e.paused?"~":""}${e.scid}`)).join(","))).join(";")}},t.OfferMediaSection=class extends c{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:a,planB:i=!1,mid:o,kind:s,offerRtpParameters:c,streamId:u,trackId:d,oldDataChannelSpec:p=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:i}),this._mediaObject.mid=String(o),this._mediaObject.type=s,a?(this._mediaObject.connection={ip:a.ip,version:a.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=a.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=n?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),s){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${u||"-"} ${d}`);for(const e of c.codecs){const t={payload:e.payloadType,codec:l(e),rate:e.clockRate};e.channels>1&&(t.encoding=e.channels),this._mediaObject.rtp.push(t);const r={payload:e.payloadType,config:""};for(const t of Object.keys(e.parameters))r.config&&(r.config+=";"),r.config+=`${t}=${e.parameters[t]}`;r.config&&this._mediaObject.fmtp.push(r);for(const t of e.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:e.payloadType,type:t.type,subtype:t.parameter})}this._mediaObject.payloads=c.codecs.map((e=>e.payloadType)).join(" "),this._mediaObject.ext=[];for(const e of c.headerExtensions)this._mediaObject.ext.push({uri:e.uri,value:e.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const e=c.encodings[0],t=e.ssrc,r=e.rtx&&e.rtx.ssrc?e.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],c.rtcp.cname&&this._mediaObject.ssrcs.push({id:t,attribute:"cname",value:c.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:t,attribute:"msid",value:`${u||"-"} ${d}`}),r&&(c.rtcp.cname&&this._mediaObject.ssrcs.push({id:r,attribute:"cname",value:c.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:r,attribute:"msid",value:`${u||"-"} ${d}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${t} ${r}`}));break}case"application":p?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize)}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:t,trackId:r}){const n=e.encodings[0],a=n.ssrc,i=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const t of e.codecs){if(o.includes(String(t.payloadType)))continue;const e={payload:t.payloadType,codec:l(t),rate:t.clockRate};t.channels>1&&(e.encoding=t.channels),this._mediaObject.rtp.push(e);const r={payload:t.payloadType,config:""};for(const e of Object.keys(t.parameters))r.config&&(r.config+=";"),r.config+=`${e}=${t.parameters[e]}`;r.config&&this._mediaObject.fmtp.push(r);for(const e of t.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:t.payloadType,type:e.type,subtype:e.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter((e=>!this._mediaObject.payloads.includes(e.payloadType))).map((e=>e.payloadType)).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${t||"-"} ${r}`}),i&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:i,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:i,attribute:"msid",value:`${t||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${a} ${i}`}))}planBStopReceiving({offerRtpParameters:e}){const t=e.encodings[0],r=t.ssrc,n=t.rtx&&t.rtx.ssrc?t.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter((e=>e.id!==r&&e.id!==n)),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter((e=>e.ssrcs!==`${r} ${n}`)))}}},7910:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSdp=void 0;const o=i(r(766)),s=r(8562),c=r(6698),l=new s.Logger("RemoteSdp");t.RemoteSdp=class{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:a,planB:i=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=t,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=a,this._planB=i,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const e=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[e-1].algorithm,hash:r.fingerprints[e-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}a&&(this._sdpObject.origin.address=a.ip,this._sdpObject.origin.ipVer=a.ipVersion)}updateIceParameters(e){l.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const t of this._mediaSections)t.setIceParameters(e)}updateDtlsRole(e){l.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const t of this._mediaSections)t.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const t=this._mediaSections[e];if(t.closed)return{idx:e,reuseMid:t.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:a,extmapAllowMixed:i=!1}){const o=new c.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:r,answerRtpParameters:n,codecOptions:a,extmapAllowMixed:i});t?this._replaceMediaSection(o,t):this._midToIndex.has(o.mid)?this._replaceMediaSection(o):this._addMediaSection(o)}receive({mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:a}){const i=this._midToIndex.get(e);let o;if(void 0!==i&&(o=this._mediaSections[i]),o)o.planBReceive({offerRtpParameters:r,streamId:n,trackId:a}),this._replaceMediaSection(o);else{o=new c.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:a});const i=this._mediaSections.find((e=>e.closed));i?this._replaceMediaSection(o,i.mid):this._addMediaSection(o)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const t=this._findMediaSection(e);return e===this._firstMid?(l.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(t.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,t){const r=this._findMediaSection(e);r.muxSimulcastStreams(t),this._replaceMediaSection(r)}planBStopReceiving({mid:e,offerRtpParameters:t}){const r=this._findMediaSection(e);r.planBStopReceiving({offerRtpParameters:t}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:e}){const t=new c.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(t)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const t=new c.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(t)}getSdp(){return this._sdpObject.origin.sessionVersion++,o.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,t){if("string"==typeof t){const r=this._midToIndex.get(t);if(void 0===r)throw new Error(`no media section found for reuseMid '${t}'`);const n=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(n.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{const t=this._midToIndex.get(e.mid);if(void 0===t)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[t]=e,this._sdpObject.media[t]=e.getObject()}}_findMediaSection(e){const t=this._midToIndex.get(e);if(void 0===t)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[t]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter((e=>!e.closed)).map((e=>e.mid)).join(" "))}}},2267:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCodecParameters=t.getCname=t.extractDtlsParameters=t.extractRtpCapabilities=void 0;const o=i(r(766));t.extractRtpCapabilities=function({sdpObject:e}){const t=new Map,r=[];let n=!1,a=!1;for(const i of e.media){const e=i.type;switch(e){case"audio":if(n)continue;n=!0;break;case"video":if(a)continue;a=!0;break;default:continue}for(const r of i.rtp){const n={kind:e,mimeType:`${e}/${r.codec}`,preferredPayloadType:r.payload,clockRate:r.rate,channels:r.encoding,parameters:{},rtcpFeedback:[]};t.set(n.preferredPayloadType,n)}for(const e of i.fmtp||[]){const r=o.parseParams(e.config),n=t.get(e.payload);n&&(r&&r.hasOwnProperty("profile-level-id")&&(r["profile-level-id"]=String(r["profile-level-id"])),n.parameters=r)}for(const r of i.rtcpFb||[]){const n={type:r.type,parameter:r.subtype};if(n.parameter||delete n.parameter,"*"!==r.payload){const e=t.get(r.payload);if(!e)continue;e.rtcpFeedback.push(n)}else for(const r of t.values())r.kind!==e||/.+\/rtx$/i.test(r.mimeType)||r.rtcpFeedback.push(n)}for(const t of i.ext||[]){if(t["encrypt-uri"])continue;const n={kind:e,uri:t.uri,preferredId:t.value};r.push(n)}}return{codecs:Array.from(t.values()),headerExtensions:r}},t.extractDtlsParameters=function({sdpObject:e}){const t=(e.media||[]).find((e=>e.iceUfrag&&0!==e.port));if(!t)throw new Error("no active media section found");const r=t.fingerprint||e.fingerprint;let n;switch(t.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto"}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}},t.getCname=function({offerMediaObject:e}){const t=(e.ssrcs||[]).find((e=>"cname"===e.attribute));return t?t.value:""},t.applyCodecParameters=function({offerRtpParameters:e,answerMediaObject:t}){for(const r of e.codecs){const e=r.mimeType.toLowerCase();if("audio/opus"!==e)continue;if(!(t.rtp||[]).find((e=>e.payload===r.payloadType)))continue;t.fmtp=t.fmtp||[];let n=t.fmtp.find((e=>e.payload===r.payloadType));n||(n={payload:r.payloadType,config:""},t.fmtp.push(n));const a=o.parseParams(n.config);switch(e){case"audio/opus":{const e=r.parameters["sprop-stereo"];void 0!==e&&(a.stereo=e?1:0);break}}n.config="";for(const e of Object.keys(a))n.config&&(n.config+=";"),n.config+=`${e}=${a[e]}`}}},9875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=function({offerMediaObject:e,track:t}){let r;const n=new Set;for(const a of e.ssrcs||[])if("msid"===a.attribute&&a.value.split(" ")[1]===t.id){const e=a.id;n.add(e),r||(r=e)}if(0===n.size)throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);const a=new Map;for(const t of e.ssrcGroups||[]){if("FID"!==t.semantics)continue;let[e,r]=t.ssrcs.split(/\s+/);e=Number(e),r=Number(r),n.has(e)&&(n.delete(e),n.delete(r),a.set(e,r))}for(const e of n)a.set(e,null);const i=[];for(const[e,t]of a){const r={ssrc:e};t&&(r.rtx={ssrc:t}),i.push(r)}return i},t.addLegacySimulcast=function({offerMediaObject:e,track:t,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let n,a,i;if(!(e.ssrcs||[]).find((e=>"msid"===e.attribute&&e.value.split(" ")[1]===t.id&&(n=e.id,i=e.value.split(" ")[0],!0))))throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);(e.ssrcGroups||[]).some((e=>{if("FID"!==e.semantics)return!1;const t=e.ssrcs.split(/\s+/);return Number(t[0])===n&&(a=Number(t[1]),!0)}));const o=e.ssrcs.find((e=>"cname"===e.attribute&&e.id===n));if(!o)throw new Error(`a=ssrc line with cname information not found [track.id:${t.id}]`);const s=o.value,c=[],l=[];for(let e=0;e<r;++e)c.push(n+e),a&&l.push(a+e);e.ssrcGroups=e.ssrcGroups||[],e.ssrcs=e.ssrcs||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:c.join(" ")});for(let r=0;r<c.length;++r){const n=c[r];e.ssrcs.push({id:n,attribute:"cname",value:s}),e.ssrcs.push({id:n,attribute:"msid",value:`${i} ${t.id}`})}for(let r=0;r<l.length;++r){const n=c[r],a=l[r];e.ssrcs.push({id:a,attribute:"cname",value:s}),e.ssrcs.push({id:a,attribute:"msid",value:`${i} ${t.id}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${n} ${a}`})}}},9072:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=function({offerMediaObject:e}){const t=new Set;for(const r of e.ssrcs||[]){const e=r.id;t.add(e)}if(0===t.size)throw new Error("no a=ssrc lines found");const r=new Map;for(const n of e.ssrcGroups||[]){if("FID"!==n.semantics)continue;let[e,a]=n.ssrcs.split(/\s+/);e=Number(e),a=Number(a),t.has(e)&&(t.delete(e),t.delete(a),r.set(e,a))}for(const e of t)r.set(e,null);const n=[];for(const[e,t]of r){const r={ssrc:e};t&&(r.rtx={ssrc:t}),n.push(r)}return n},t.addLegacySimulcast=function({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const r=(e.ssrcs||[]).find((e=>"msid"===e.attribute));if(!r)throw new Error("a=ssrc line with msid information not found");const[n,a]=r.value.split(" "),i=r.id;let o;(e.ssrcGroups||[]).some((e=>{if("FID"!==e.semantics)return!1;const t=e.ssrcs.split(/\s+/);return Number(t[0])===i&&(o=Number(t[1]),!0)}));const s=e.ssrcs.find((e=>"cname"===e.attribute));if(!s)throw new Error("a=ssrc line with cname information not found");const c=s.value,l=[],u=[];for(let e=0;e<t;++e)l.push(i+e),o&&u.push(o+e);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let t=0;t<l.length;++t){const r=l[t];e.ssrcs.push({id:r,attribute:"cname",value:c}),e.ssrcs.push({id:r,attribute:"msid",value:`${n} ${a}`})}for(let t=0;t<u.length;++t){const r=l[t],i=u[t];e.ssrcs.push({id:i,attribute:"cname",value:c}),e.ssrcs.push({id:i,attribute:"msid",value:`${n} ${a}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${r} ${i}`})}}},960:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.parseScalabilityMode=t.detectDevice=t.Device=t.version=t.types=void 0;const s=o(r(388));t.debug=s.default;const c=r(3120);Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return c.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return c.detectDevice}});const l=i(r(53));t.types=l,t.version="3.6.84";var u=r(2770);Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return u.parse}})},5280:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.canReceive=t.canSend=t.generateProbatorRtpParameters=t.reduceCodecs=t.getSendingRemoteRtpParameters=t.getSendingRtpParameters=t.getRecvRtpCapabilities=t.getExtendedRtpCapabilities=t.validateSctpStreamParameters=t.validateSctpParameters=t.validateNumSctpStreams=t.validateSctpCapabilities=t.validateRtcpParameters=t.validateRtpEncodingParameters=t.validateRtpHeaderExtensionParameters=t.validateRtpCodecParameters=t.validateRtpParameters=t.validateRtpHeaderExtension=t.validateRtcpFeedback=t.validateRtpCodecCapability=t.validateRtpCapabilities=void 0;const o=i(r(7855)),s=i(r(3347));function c(e){const t=new RegExp("^(audio|video)/(.+)","i");if("object"!=typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw new TypeError("missing codec.mimeType");const r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(e.kind=r[1].toLowerCase(),e.preferredPayloadType&&"number"!=typeof e.preferredPayloadType)throw new TypeError("invalid codec.preferredPayloadType");if("number"!=typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===e.kind?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==typeof e.parameters||(e.parameters={});for(const t of Object.keys(e.parameters)){let r=e.parameters[t];if(void 0===r&&(e.parameters[t]="",r=""),"string"!=typeof r&&"number"!=typeof r)throw new TypeError(`invalid codec parameter [key:${t}s, value:${r}]`);if("apt"===t&&"number"!=typeof r)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);for(const t of e.rtcpFeedback)l(t)}function l(e){if("object"!=typeof e)throw new TypeError("fb is not an object");if(!e.type||"string"!=typeof e.type)throw new TypeError("missing fb.type");e.parameter&&"string"==typeof e.parameter||(e.parameter="")}function u(e){if("object"!=typeof e)throw new TypeError("ext is not an object");if("audio"!==e.kind&&"video"!==e.kind)throw new TypeError("invalid ext.kind");if(!e.uri||"string"!=typeof e.uri)throw new TypeError("missing ext.uri");if("number"!=typeof e.preferredId)throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&"boolean"!=typeof e.preferredEncrypt)throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&"string"!=typeof e.direction)throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function d(e){if("object"!=typeof e)throw new TypeError("params is not an object");if(e.mid&&"string"!=typeof e.mid)throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)p(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)f(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)h(t);if(e.rtcp&&"object"!=typeof e.rtcp)throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),m(e.rtcp)}function p(e){const t=new RegExp("^(audio|video)/(.+)","i");if("object"!=typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw new TypeError("missing codec.mimeType");const r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if("number"!=typeof e.payloadType)throw new TypeError("missing codec.payloadType");if("number"!=typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===r[1].toLowerCase()?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==typeof e.parameters||(e.parameters={});for(const t of Object.keys(e.parameters)){let r=e.parameters[t];if(void 0===r&&(e.parameters[t]="",r=""),"string"!=typeof r&&"number"!=typeof r)throw new TypeError(`invalid codec parameter [key:${t}s, value:${r}]`);if("apt"===t&&"number"!=typeof r)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);for(const t of e.rtcpFeedback)l(t)}function f(e){if("object"!=typeof e)throw new TypeError("ext is not an object");if(!e.uri||"string"!=typeof e.uri)throw new TypeError("missing ext.uri");if("number"!=typeof e.id)throw new TypeError("missing ext.id");if(e.encrypt&&"boolean"!=typeof e.encrypt)throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),e.parameters&&"object"==typeof e.parameters||(e.parameters={});for(const t of Object.keys(e.parameters)){let r=e.parameters[t];if(void 0===r&&(e.parameters[t]="",r=""),"string"!=typeof r&&"number"!=typeof r)throw new TypeError("invalid header extension parameter")}}function h(e){if("object"!=typeof e)throw new TypeError("encoding is not an object");if(e.ssrc&&"number"!=typeof e.ssrc)throw new TypeError("invalid encoding.ssrc");if(e.rid&&"string"!=typeof e.rid)throw new TypeError("invalid encoding.rid");if(e.rtx&&"object"!=typeof e.rtx)throw new TypeError("invalid encoding.rtx");if(e.rtx&&"number"!=typeof e.rtx.ssrc)throw new TypeError("missing encoding.rtx.ssrc");if(e.dtx&&"boolean"==typeof e.dtx||(e.dtx=!1),e.scalabilityMode&&"string"!=typeof e.scalabilityMode)throw new TypeError("invalid encoding.scalabilityMode")}function m(e){if("object"!=typeof e)throw new TypeError("rtcp is not an object");if(e.cname&&"string"!=typeof e.cname)throw new TypeError("invalid rtcp.cname");e.reducedSize&&"boolean"==typeof e.reducedSize||(e.reducedSize=!0)}function y(e){if("object"!=typeof e)throw new TypeError("numStreams is not an object");if("number"!=typeof e.OS)throw new TypeError("missing numStreams.OS");if("number"!=typeof e.MIS)throw new TypeError("missing numStreams.MIS")}function v(e){return!!e&&/.+\/rtx$/i.test(e.mimeType)}function g(e,t,{strict:r=!1,modify:n=!1}={}){const a=e.mimeType.toLowerCase();if(a!==t.mimeType.toLowerCase())return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;switch(a){case"video/h264":if(r){if((e.parameters["packetization-mode"]||0)!==(t.parameters["packetization-mode"]||0))return!1;if(!o.isSameProfile(e.parameters,t.parameters))return!1;let r;try{r=o.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch(e){return!1}n&&(r?(e.parameters["profile-level-id"]=r,t.parameters["profile-level-id"]=r):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break;case"video/vp9":if(r&&(e.parameters["profile-id"]||0)!==(t.parameters["profile-id"]||0))return!1}return!0}function _(e,t){return!(e.kind&&t.kind&&e.kind!==t.kind||e.uri!==t.uri)}function b(e,t){const r=[];for(const n of e.rtcpFeedback||[]){const e=(t.rtcpFeedback||[]).find((e=>e.type===n.type&&(e.parameter===n.parameter||!e.parameter&&!n.parameter)));e&&r.push(e)}return r}t.validateRtpCapabilities=function(e){if("object"!=typeof e)throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)c(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)u(t)},t.validateRtpCodecCapability=c,t.validateRtcpFeedback=l,t.validateRtpHeaderExtension=u,t.validateRtpParameters=d,t.validateRtpCodecParameters=p,t.validateRtpHeaderExtensionParameters=f,t.validateRtpEncodingParameters=h,t.validateRtcpParameters=m,t.validateSctpCapabilities=function(e){if("object"!=typeof e)throw new TypeError("caps is not an object");if(!e.numStreams||"object"!=typeof e.numStreams)throw new TypeError("missing caps.numStreams");y(e.numStreams)},t.validateNumSctpStreams=y,t.validateSctpParameters=function(e){if("object"!=typeof e)throw new TypeError("params is not an object");if("number"!=typeof e.port)throw new TypeError("missing params.port");if("number"!=typeof e.OS)throw new TypeError("missing params.OS");if("number"!=typeof e.MIS)throw new TypeError("missing params.MIS");if("number"!=typeof e.maxMessageSize)throw new TypeError("missing params.maxMessageSize")},t.validateSctpStreamParameters=function(e){if("object"!=typeof e)throw new TypeError("params is not an object");if("number"!=typeof e.streamId)throw new TypeError("missing params.streamId");let t=!1;if("boolean"==typeof e.ordered?t=!0:e.ordered=!0,e.maxPacketLifeTime&&"number"!=typeof e.maxPacketLifeTime)throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&"number"!=typeof e.maxRetransmits)throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(t||!e.maxPacketLifeTime&&!e.maxRetransmits||(e.ordered=!1),e.label&&"string"!=typeof e.label)throw new TypeError("invalid params.label");if(e.protocol&&"string"!=typeof e.protocol)throw new TypeError("invalid params.protocol")},t.getExtendedRtpCapabilities=function(e,t){const r={codecs:[],headerExtensions:[]};for(const n of t.codecs||[]){if(v(n))continue;const t=(e.codecs||[]).find((e=>g(e,n,{strict:!0,modify:!0})));if(!t)continue;const a={mimeType:t.mimeType,kind:t.kind,clockRate:t.clockRate,channels:t.channels,localPayloadType:t.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:t.parameters,remoteParameters:n.parameters,rtcpFeedback:b(t,n)};r.codecs.push(a)}for(const n of r.codecs){const r=e.codecs.find((e=>v(e)&&e.parameters.apt===n.localPayloadType)),a=t.codecs.find((e=>v(e)&&e.parameters.apt===n.remotePayloadType));r&&a&&(n.localRtxPayloadType=r.preferredPayloadType,n.remoteRtxPayloadType=a.preferredPayloadType)}for(const n of t.headerExtensions){const t=e.headerExtensions.find((e=>_(e,n)));if(!t)continue;const a={kind:n.kind,uri:n.uri,sendId:t.preferredId,recvId:n.preferredId,encrypt:t.preferredEncrypt,direction:"sendrecv"};switch(n.direction){case"sendrecv":a.direction="sendrecv";break;case"recvonly":a.direction="sendonly";break;case"sendonly":a.direction="recvonly";break;case"inactive":a.direction="inactive"}r.headerExtensions.push(a)}return r},t.getRecvRtpCapabilities=function(e){const t={codecs:[],headerExtensions:[]};for(const r of e.codecs){const e={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(t.codecs.push(e),!r.remoteRtxPayloadType)continue;const n={mimeType:`${r.kind}/rtx`,kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};t.codecs.push(n)}for(const r of e.headerExtensions){if("sendrecv"!==r.direction&&"recvonly"!==r.direction)continue;const e={kind:r.kind,uri:r.uri,preferredId:r.recvId,preferredEncrypt:r.encrypt,direction:r.direction};t.headerExtensions.push(e)}return t},t.getSendingRtpParameters=function(e,t){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const t={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(t),n.localRtxPayloadType){const e={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(e)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||"sendrecv"!==n.direction&&"sendonly"!==n.direction)continue;const t={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(t)}return r},t.getSendingRemoteRtpParameters=function(e,t){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const t={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(t),n.localRtxPayloadType){const e={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(e)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||"sendrecv"!==n.direction&&"sendonly"!==n.direction)continue;const t={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(t)}if(r.headerExtensions.some((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.uri)))for(const e of r.codecs)e.rtcpFeedback=(e.rtcpFeedback||[]).filter((e=>"goog-remb"!==e.type));else if(r.headerExtensions.some((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.uri)))for(const e of r.codecs)e.rtcpFeedback=(e.rtcpFeedback||[]).filter((e=>"transport-cc"!==e.type));else for(const e of r.codecs)e.rtcpFeedback=(e.rtcpFeedback||[]).filter((e=>"transport-cc"!==e.type&&"goog-remb"!==e.type));return r},t.reduceCodecs=function(e,t){const r=[];if(t){for(let n=0;n<e.length;++n)if(g(e[n],t)){r.push(e[n]),v(e[n+1])&&r.push(e[n+1]);break}if(0===r.length)throw new TypeError("no matching codec found")}else r.push(e[0]),v(e[1])&&r.push(e[1]);return r},t.generateProbatorRtpParameters=function(e){d(e=s.clone(e,{}));const t={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=127,t.headerExtensions=e.headerExtensions,t},t.canSend=function(e,t){return t.codecs.some((t=>t.kind===e))},t.canReceive=function(e,t){if(d(e),0===e.codecs.length)return!1;const r=e.codecs[0];return t.codecs.some((e=>e.remotePayloadType===r.payloadType))}},2770:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;const r=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");t.parse=function(e){const t=r.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}},53:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(3120),t),a(r(5202),t),a(r(6569),t),a(r(9514),t),a(r(5504),t),a(r(1623),t),a(r(4879),t),a(r(7669),t),a(r(9316),t),a(r(9992),t)},3347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomNumber=t.clone=void 0,t.clone=function(e,t){return void 0===e?t:JSON.parse(JSON.stringify(e))},t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},388:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(4455)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4455:(e,t,r)=>{e.exports=function(e){function t(e){let r,a,i,o=null;function s(...e){if(!s.enabled)return;const n=s,a=Number(new Date),i=a-(r||a);n.diff=i,n.prev=r,n.curr=a,r=a,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,a)=>{if("%%"===r)return"%";o++;const i=t.formatters[a];if("function"==typeof i){const t=e[o];r=i.call(n,t),e.splice(o,1),o--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(a!==t.namespaces&&(a=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(a),...t.skips.map(a).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7824:e=>{var t=1e3,r=60*t,n=60*r,a=24*n;function i(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,o){o=o||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*n;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===s&&isFinite(e))return o.long?function(e){var o=Math.abs(e);return o>=a?i(e,o,a,"day"):o>=n?i(e,o,n,"hour"):o>=r?i(e,o,r,"minute"):o>=t?i(e,o,t,"second"):e+" ms"}(e):function(e){var i=Math.abs(e);return i>=a?Math.round(e/a)+"d":i>=n?Math.round(e/n)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7576:(e,t,r)=>{const{EventEmitter:n}=r(7187),a=r(3417);e.exports=class extends n{constructor(e){super(),this.setMaxListeners(1/0),this._logger=e||new a("EnhancedEventEmitter")}safeEmit(e,...t){try{this.emit(e,...t)}catch(t){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",e,t)}}async safeEmitAsPromise(e,...t){return new Promise(((r,n)=>{this.safeEmit(e,...t,r,n)}))}}},3417:(e,t,r)=>{const n=r(1227),a="protoo-client";e.exports=class{constructor(e){e?(this._debug=n(`${a}:${e}`),this._warn=n(`${a}:WARN:${e}`),this._error=n(`${a}:ERROR:${e}`)):(this._debug=n(a),this._warn=n(`${a}:WARN`),this._error=n(`${a}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6508:(e,t,r)=>{const n=r(3417),{generateRandomNumber:a}=r(5654),i=new n("Message");e.exports=class{static parse(e){let t;const r={};try{t=JSON.parse(e)}catch(e){return void i.error("parse() | invalid JSON: %s",e)}if("object"==typeof t&&!Array.isArray(t)){if(t.request){if(r.request=!0,"string"!=typeof t.method)return void i.error("parse() | missing/invalid method field");if("number"!=typeof t.id)return void i.error("parse() | missing/invalid id field");r.id=t.id,r.method=t.method,r.data=t.data||{}}else if(t.response){if(r.response=!0,"number"!=typeof t.id)return void i.error("parse() | missing/invalid id field");r.id=t.id,t.ok?(r.ok=!0,r.data=t.data||{}):(r.ok=!1,r.errorCode=t.errorCode,r.errorReason=t.errorReason)}else{if(!t.notification)return void i.error("parse() | missing request/response field");if(r.notification=!0,"string"!=typeof t.method)return void i.error("parse() | missing/invalid method field");r.method=t.method,r.data=t.data||{}}return r}i.error("parse() | not an object")}static createRequest(e,t){return{request:!0,id:a(),method:e,data:t||{}}}static createSuccessResponse(e,t){return{response:!0,id:e.id,ok:!0,data:t||{}}}static createErrorResponse(e,t,r){return{response:!0,id:e.id,ok:!1,errorCode:t,errorReason:r}}static createNotification(e,t){return{notification:!0,method:e,data:t||{}}}}},7502:(e,t,r)=>{const n=r(3417),a=r(7576),i=r(6508),o=new n("Peer");e.exports=class extends a{constructor(e){super(o),o.debug("constructor()"),this._closed=!1,this._transport=e,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(e){throw new Error("cannot override data object")}close(){if(!this._closed){o.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const e of this._sents.values())e.close();this.safeEmit("close")}}async request(e,t){const r=i.createRequest(e,t);return this._logger.debug("request() [method:%s, id:%s]",e,r.id),await this._transport.send(r),new Promise(((e,t)=>{const n=1500*(15+.1*this._sents.size),a={id:r.id,method:r.method,resolve:t=>{this._sents.delete(r.id)&&(clearTimeout(a.timer),e(t))},reject:e=>{this._sents.delete(r.id)&&(clearTimeout(a.timer),t(e))},timer:setTimeout((()=>{this._sents.delete(r.id)&&t(new Error("request timeout"))}),n),close:()=>{clearTimeout(a.timer),t(new Error("peer closed"))}};this._sents.set(r.id,a)}))}async notify(e,t){const r=i.createNotification(e,t);this._logger.debug("notify() [method:%s]",e),await this._transport.send(r)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout((()=>{this._closed||(this._connected=!1,this.safeEmit("close"))}));this._transport.on("open",(()=>{this._closed||(o.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))})),this._transport.on("disconnected",(()=>{this._closed||(o.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))})),this._transport.on("failed",(e=>{this._closed||(o.debug('emit "failed" [currentAttempt:%s]',e),this._connected=!1,this.safeEmit("failed",e))})),this._transport.on("close",(()=>{this._closed||(this._closed=!0,o.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))})),this._transport.on("message",(e=>{e.request?this._handleRequest(e):e.response?this._handleResponse(e):e.notification&&this._handleNotification(e)}))}_handleRequest(e){try{this.emit("request",e,(t=>{const r=i.createSuccessResponse(e,t);this._transport.send(r).catch((()=>{}))}),((t,r)=>{t instanceof Error?(r=t.message,t=500):"number"==typeof t&&r instanceof Error&&(r=r.message);const n=i.createErrorResponse(e,t,r);this._transport.send(n).catch((()=>{}))}))}catch(t){const r=i.createErrorResponse(e,500,String(t));this._transport.send(r).catch((()=>{}))}}_handleResponse(e){const t=this._sents.get(e.id);if(t)if(e.ok)t.resolve(e.data);else{const r=new Error(e.errorReason);r.code=e.errorCode,t.reject(r)}else o.error("received response does not match any sent request [id:%s]",e.id)}_handleNotification(e){this.safeEmit("notification",e)}}},9293:(e,t,r)=>{const{version:n}=r(7002),a=r(7502),i=r(2165);t._z=a,t.qo=i},2165:(e,t,r)=>{const n=r(5840).w3cwebsocket,a=r(9353),i=r(3417),o=r(7576),s=r(6508),c={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},l=new i("WebSocketTransport");e.exports=class extends o{constructor(e,t){super(l),l.debug("constructor() [url:%s, options:%o]",e,t),this._closed=!1,this._url=e,this._options=t||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){l.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){l.error("close() | error closing the WebSocket: %o",e)}}}async send(e){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(e))}catch(e){throw l.warn("send() failed:%o",e),e}}_runWebSocket(){const e=a.operation(this._options.retry||c);let t=!1;e.attempt((r=>{this._closed?e.stop():(l.debug("_runWebSocket() [currentAttempt:%s]",r),this._ws=new n(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(t=!0,this.safeEmit("open"))},this._ws.onclose=n=>{if(!this._closed){if(l.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',n.wasClean,n.code,n.reason),4e3!==n.code){if(t){if(e.stop(),this.safeEmit("disconnected"),this._closed)return;return void this._runWebSocket()}if(this.safeEmit("failed",r),this._closed)return;if(e.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||l.error('WebSocket "error" event')},this._ws.onmessage=e=>{if(this._closed)return;const t=s.parse(e.data);t&&(0!==this.listenerCount("message")?this.safeEmit("message",t):l.error('no listeners for WebSocket "message" event, ignoring received message'))})}))}}},5654:(e,t)=>{t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},4375:(e,t,r)=>{let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},3196:e=>{"use strict";e.exports=function(e){var t,r,n="",a=(e=function(e){return e||(e={}),{length:e.length||8,numeric:"boolean"!=typeof e.numeric||e.numeric,letters:"boolean"!=typeof e.letters||e.letters,special:"boolean"==typeof e.special&&e.special,exclude:Array.isArray(e.exclude)?e.exclude:[]}}(e)).length,i=(e.exclude,function(e){var t="";e.numeric&&(t+="0123456789"),e.letters&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),e.special&&(t+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var r=0;r<=e.exclude.length;r++)t=t.replace(e.exclude[r],"");return t}(e));for(t=1;t<=a;t++)n+=i.substring(r=Math.floor(Math.random()*i.length),r+1);return n}},5666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),o=new C(n||[]);return i._invoke=function(e,t,r){var n=d;return function(a,i){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw i;return x()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=k(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?h:p,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(O([])));w&&w!==r&&n.call(w,i)&&(_=w);var S=g.prototype=y.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(a,i,o,s){var c=u(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=u(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function O(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:x}}function x(){return{value:t,done:!0}}return v.prototype=g,c(S,"constructor",g),c(g,"constructor",v),v.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},E(P.prototype),c(P.prototype,o,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new P(l(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),c(S,s,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},9353:(e,t,r)=>{e.exports=r(1846)},1846:(e,t,r)=>{var n=r(1960);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],a=0;a<t.retries;a++)n.push(this.createTimeout(a,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(a,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var a in n=[],e)"function"==typeof e[a]&&n.push(a);for(var i=0;i<n.length;i++){var o=n[i],s=e[o];e[o]=function(n){var a=t.operation(r),i=Array.prototype.slice.call(arguments,1),o=i.pop();i.push((function(e){a.retry(e)||(e&&(arguments[0]=a.mainError()),o.apply(this,arguments))})),a.attempt((function(){n.apply(e,i)}))}.bind(e,s),e[o].options=r}}},1960:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,a=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r);return this._options.unref&&a.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var a=this._errors[n],i=a.message,o=(e[i]||0)+1;e[i]=o,o>=r&&(t=a,r=o)}return t}},6692:e=>{var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},766:(e,t,r)=>{var n=r(962),a=r(5776);t.write=a,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},962:(e,t,r)=>{var n=function(e){return String(Number(e))===e?Number(e):e},a=function(e,t,r){var a=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:a&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:a?t[e.name]:t;!function(e,t,r,a){if(a&&!r)t[a]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))}(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=r(6692),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(i[t]||[]).length;s+=1){var c=i[t][s];if(c.reg.test(o))return a(c,n,o)}})),t.media=r,t};var s=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),a=0;a<r.length;a+=3)t.push({component:r[a],ip:r[a+1],port:r[a+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}},5776:(e,t,r)=>{var n=r(6692),a=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(a,(function(e){if(t>=n)return e;var a=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(a);case"%d":return Number(a);case"%v":return""}}))},o=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var a=0;a<t.names.length;a+=1){var o=t.names[a];t.name?n.push(r[t.name][o]):n.push(r[t.names[a]])}else n.push(r[t.name]);return i.apply(null,n)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||s,a=t.innerOrder||c,i=[];return r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(o(t,r,e))}))}))})),e.media.forEach((function(e){i.push(o("m",n.m[0],e)),a.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(o(t,r,e))}))}))}))})),i.join("\r\n")+"\r\n"}},5840:(e,t,r)=>{var n;if("object"==typeof globalThis)n=globalThis;else try{n=r(284)}catch(e){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var a=n.WebSocket||n.MozWebSocket,i=r(9387);function o(e,t){return t?new a(e,t):new a(e)}a&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return a[e]}})})),e.exports={w3cwebsocket:a?o:null,version:i}},9387:(e,t,r)=>{e.exports=r(9794).version},6037:(e,t,r)=>{"use strict";!function(e){const t=e.performance;function r(e){t&&t.mark&&t.mark(e)}function n(e,r){t&&t.measure&&t.measure(e,r)}r("Zone");const a=e.__Zone_symbol_prefix||"__zone_symbol__";function i(e){return a+e}const o=!0===e[i("forceDuplicateZoneCheck")];if(e.Zone){if(o||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}class s{constructor(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,t)}static assertZonePatched(){if(e.Promise!==x.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let e=s.current;for(;e.parent;)e=e.parent;return e}static get current(){return I.zone}static get currentTask(){return L}static __load_patch(t,a,i=!1){if(x.hasOwnProperty(t)){if(!i&&o)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const i="Zone:"+t;r(i),x[t]=a(e,s,D),n(i,i)}}get parent(){return this._parent}get name(){return this._name}get(e){const t=this.getZoneWith(e);if(t)return t._properties[e]}getZoneWith(e){let t=this;for(;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}fork(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}wrap(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);const r=this._zoneDelegate.intercept(this,e,t),n=this;return function(){return n.runGuarded(r,this,arguments,t)}}run(e,t,r,n){I={parent:I,zone:this};try{return this._zoneDelegate.invoke(this,e,t,r,n)}finally{I=I.parent}}runGuarded(e,t=null,r,n){I={parent:I,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,r,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{I=I.parent}}runTask(e,t,r){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||b).name+"; Execution: "+this.name+")");if(e.state===w&&(e.type===O||e.type===C))return;const n=e.state!=P;n&&e._transitionTo(P,E),e.runCount++;const a=L;L=e,I={parent:I,zone:this};try{e.type==C&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==w&&e.state!==T&&(e.type==O||e.data&&e.data.isPeriodic?n&&e._transitionTo(E,P):(e.runCount=0,this._updateTaskCount(e,-1),n&&e._transitionTo(w,P,w))),I=I.parent,L=a}}scheduleTask(e){if(e.zone&&e.zone!==this){let t=this;for(;t;){if(t===e.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${e.zone.name}`);t=t.parent}}e._transitionTo(S,w);const t=[];e._zoneDelegates=t,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(T,S,w),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===t&&this._updateTaskCount(e,1),e.state==S&&e._transitionTo(E,S),e}scheduleMicroTask(e,t,r,n){return this.scheduleTask(new u(R,e,t,r,n,void 0))}scheduleMacroTask(e,t,r,n,a){return this.scheduleTask(new u(C,e,t,r,n,a))}scheduleEventTask(e,t,r,n,a){return this.scheduleTask(new u(O,e,t,r,n,a))}cancelTask(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||b).name+"; Execution: "+this.name+")");e._transitionTo(k,E,P);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(T,k),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(w,k),e.runCount=0,e}_updateTaskCount(e,t){const r=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(let n=0;n<r.length;n++)r[n]._updateTaskCount(e.type,t)}}s.__symbol__=i;const c={name:"",onHasTask:(e,t,r,n)=>e.hasTask(r,n),onScheduleTask:(e,t,r,n)=>e.scheduleTask(r,n),onInvokeTask:(e,t,r,n,a,i)=>e.invokeTask(r,n,a,i),onCancelTask:(e,t,r,n)=>e.cancelTask(r,n)};class l{constructor(e,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const n=r&&r.onHasTask,a=t&&t._hasTaskZS;(n||a)&&(this._hasTaskZS=n?r:c,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,r.onScheduleTask||(this._scheduleTaskZS=c,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=c,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=c,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new s(e,t)}intercept(e,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,r):t}invoke(e,t,r,n,a){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,r,n,a):t.apply(r,n)}handleError(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}scheduleTask(e,t){let r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),r||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=R)throw new Error("Task is missing scheduleFn.");g(t)}return r}invokeTask(e,t,r,n){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,r,n):t.callback.apply(r,n)}cancelTask(e,t){let r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r}hasTask(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}}_updateTaskCount(e,t){const r=this._taskCounts,n=r[e],a=r[e]=n+t;if(a<0)throw new Error("More tasks executed then were scheduled.");if(0==n||0==a){const t={microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:e};this.hasTask(this.zone,t)}}}class u{constructor(t,r,n,a,i,o){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=t,this.source=r,this.data=a,this.scheduleFn=i,this.cancelFn=o,!n)throw new Error("callback is not defined");this.callback=n;const s=this;t===O&&a&&a.useG?this.invoke=u.invokeTask:this.invoke=function(){return u.invokeTask.call(e,s,this,arguments)}}static invokeTask(e,t,r){e||(e=this),M++;try{return e.runCount++,e.zone.runTask(e,t,r)}finally{1==M&&_(),M--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(w,S)}_transitionTo(e,t,r){if(this._state!==t&&this._state!==r)throw new Error(`${this.type} '${this.source}': can not transition to '${e}', expecting state '${t}'${r?" or '"+r+"'":""}, was '${this._state}'.`);this._state=e,e==w&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const d=i("setTimeout"),p=i("Promise"),f=i("then");let h,m=[],y=!1;function v(t){if(h||e[p]&&(h=e[p].resolve(0)),h){let e=h[f];e||(e=h.then),e.call(h,t)}else e[d](t,0)}function g(e){0===M&&0===m.length&&v(_),e&&m.push(e)}function _(){if(!y){for(y=!0;m.length;){const e=m;m=[];for(let t=0;t<e.length;t++){const r=e[t];try{r.zone.runTask(r,null,null)}catch(e){D.onUnhandledError(e)}}}D.microtaskDrainDone(),y=!1}}const b={name:"NO ZONE"},w="notScheduled",S="scheduling",E="scheduled",P="running",k="canceling",T="unknown",R="microTask",C="macroTask",O="eventTask",x={},D={symbol:i,currentZoneFrame:()=>I,onUnhandledError:A,microtaskDrainDone:A,scheduleMicroTask:g,showUncaughtError:()=>!s[i("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:A,patchMethod:()=>A,bindArguments:()=>[],patchThen:()=>A,patchMacroTask:()=>A,patchEventPrototype:()=>A,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>A,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>A,wrapWithCurrentZone:()=>A,filterProperties:()=>[],attachOriginToPatched:()=>A,_redefineProperty:()=>A,patchCallbacks:()=>A,nativeScheduleMicroTask:v};let I={parent:null,zone:new s(null,null)},L=null,M=0;function A(){}n("Zone","Zone"),e.Zone=s}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||r.g);const n=Object.getOwnPropertyDescriptor,a=Object.defineProperty,i=Object.getPrototypeOf,o=Object.create,s=Array.prototype.slice,c="addEventListener",l="removeEventListener",u=Zone.__symbol__(c),d=Zone.__symbol__(l),p="true",f="false",h=Zone.__symbol__("");function m(e,t){return Zone.current.wrap(e,t)}function y(e,t,r,n,a){return Zone.current.scheduleMacroTask(e,t,r,n,a)}const v=Zone.__symbol__,g="undefined"!=typeof window,_=g?window:void 0,b=g&&_||"object"==typeof self&&self||r.g;function w(e,t){for(let r=e.length-1;r>=0;r--)"function"==typeof e[r]&&(e[r]=m(e[r],t+"_"+r));return e}function S(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const E="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,P=!("nw"in b)&&void 0!==b.process&&"[object process]"==={}.toString.call(b.process),k=!P&&!E&&!(!g||!_.HTMLElement),T=void 0!==b.process&&"[object process]"==={}.toString.call(b.process)&&!E&&!(!g||!_.HTMLElement),R={},C=function(e){if(!(e=e||b.event))return;let t=R[e.type];t||(t=R[e.type]=v("ON_PROPERTY"+e.type));const r=this||e.target||b,n=r[t];let a;if(k&&r===_&&"error"===e.type){const t=e;a=n&&n.call(this,t.message,t.filename,t.lineno,t.colno,t.error),!0===a&&e.preventDefault()}else a=n&&n.apply(this,arguments),null==a||a||e.preventDefault();return a};function O(e,t,r){let i=n(e,t);if(!i&&r&&n(r,t)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;const o=v("on"+t+"patched");if(e.hasOwnProperty(o)&&e[o])return;delete i.writable,delete i.value;const s=i.get,c=i.set,l=t.slice(2);let u=R[l];u||(u=R[l]=v("ON_PROPERTY"+l)),i.set=function(t){let r=this;r||e!==b||(r=b),r&&("function"==typeof r[u]&&r.removeEventListener(l,C),c&&c.call(r,null),r[u]=t,"function"==typeof t&&r.addEventListener(l,C,!1))},i.get=function(){let r=this;if(r||e!==b||(r=b),!r)return null;const n=r[u];if(n)return n;if(s){let e=s.call(this);if(e)return i.set.call(this,e),"function"==typeof r.removeAttribute&&r.removeAttribute(t),e}return null},a(e,t,i),e[o]=!0}function x(e,t,r){if(t)for(let n=0;n<t.length;n++)O(e,"on"+t[n],r);else{const t=[];for(const r in e)"on"==r.slice(0,2)&&t.push(r);for(let n=0;n<t.length;n++)O(e,t[n],r)}}const D=v("originalInstance");function I(e){const t=b[e];if(!t)return;b[v(e)]=t,b[e]=function(){const r=w(arguments,e);switch(r.length){case 0:this[D]=new t;break;case 1:this[D]=new t(r[0]);break;case 2:this[D]=new t(r[0],r[1]);break;case 3:this[D]=new t(r[0],r[1],r[2]);break;case 4:this[D]=new t(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},A(b[e],t);const r=new t((function(){}));let n;for(n in r)"XMLHttpRequest"===e&&"responseBlob"===n||function(t){"function"==typeof r[t]?b[e].prototype[t]=function(){return this[D][t].apply(this[D],arguments)}:a(b[e].prototype,t,{set:function(r){"function"==typeof r?(this[D][t]=m(r,e+"."+t),A(this[D][t],r)):this[D][t]=r},get:function(){return this[D][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(b[e][n]=t[n])}function L(e,t,r){let a=e;for(;a&&!a.hasOwnProperty(t);)a=i(a);!a&&e[t]&&(a=e);const o=v(t);let s=null;if(a&&(!(s=a[o])||!a.hasOwnProperty(o))&&(s=a[o]=a[t],S(a&&n(a,t)))){const e=r(s,o,t);a[t]=function(){return e(this,arguments)},A(a[t],s)}return s}function M(e,t,r){let n=null;function a(e){const t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},n.apply(t.target,t.args),e}n=L(e,t,(e=>function(t,n){const i=r(t,n);return i.cbIdx>=0&&"function"==typeof n[i.cbIdx]?y(i.name,n[i.cbIdx],i,a):e.apply(t,n)}))}function A(e,t){e[v("OriginalDelegate")]=t}let j=!1,N=!1;function F(){if(j)return N;j=!0;try{const e=_.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(N=!0)}catch(e){}return N}Zone.__load_patch("ZoneAwarePromise",((e,t,r)=>{const n=Object.getOwnPropertyDescriptor,a=Object.defineProperty,i=r.symbol,o=[],s=!0===e[i("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],c=i("Promise"),l=i("then");r.onUnhandledError=e=>{if(r.showUncaughtError()){const t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},r.microtaskDrainDone=()=>{for(;o.length;){const e=o.shift();try{e.zone.runGuarded((()=>{if(e.throwOriginal)throw e.rejection;throw e}))}catch(e){d(e)}}};const u=i("unhandledPromiseRejectionHandler");function d(e){r.onUnhandledError(e);try{const r=t[u];"function"==typeof r&&r.call(this,e)}catch(e){}}function p(e){return e&&e.then}function f(e){return e}function h(e){return I.reject(e)}const m=i("state"),y=i("value"),v=i("finally"),g=i("parentPromiseValue"),_=i("parentPromiseState"),b=null,w=!0,S=!1;function E(e,t){return r=>{try{T(e,t,r)}catch(t){T(e,!1,t)}}}const P=function(){let e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},k=i("currentTaskTrace");function T(e,n,i){const c=P();if(e===i)throw new TypeError("Promise resolved with itself");if(e[m]===b){let l=null;try{"object"!=typeof i&&"function"!=typeof i||(l=i&&i.then)}catch(t){return c((()=>{T(e,!1,t)}))(),e}if(n!==S&&i instanceof I&&i.hasOwnProperty(m)&&i.hasOwnProperty(y)&&i[m]!==b)C(i),T(e,i[m],i[y]);else if(n!==S&&"function"==typeof l)try{l.call(i,c(E(e,n)),c(E(e,!1)))}catch(t){c((()=>{T(e,!1,t)}))()}else{e[m]=n;const c=e[y];if(e[y]=i,e[v]===v&&n===w&&(e[m]=e[_],e[y]=e[g]),n===S&&i instanceof Error){const e=t.currentTask&&t.currentTask.data&&t.currentTask.data.__creationTrace__;e&&a(i,k,{configurable:!0,enumerable:!1,writable:!0,value:e})}for(let t=0;t<c.length;)O(e,c[t++],c[t++],c[t++],c[t++]);if(0==c.length&&n==S){e[m]=0;let n=i;try{throw new Error("Uncaught (in promise): "+function(e){return e&&e.toString===Object.prototype.toString?(e.constructor&&e.constructor.name||"")+": "+JSON.stringify(e):e?e.toString():Object.prototype.toString.call(e)}(i)+(i&&i.stack?"\n"+i.stack:""))}catch(e){n=e}s&&(n.throwOriginal=!0),n.rejection=i,n.promise=e,n.zone=t.current,n.task=t.currentTask,o.push(n),r.scheduleMicroTask()}}}return e}const R=i("rejectionHandledHandler");function C(e){if(0===e[m]){try{const r=t[R];r&&"function"==typeof r&&r.call(this,{rejection:e[y],promise:e})}catch(e){}e[m]=S;for(let t=0;t<o.length;t++)e===o[t].promise&&o.splice(t,1)}}function O(e,t,r,n,a){C(e);const i=e[m],o=i?"function"==typeof n?n:f:"function"==typeof a?a:h;t.scheduleMicroTask("Promise.then",(()=>{try{const n=e[y],a=!!r&&v===r[v];a&&(r[g]=n,r[_]=i);const s=t.run(o,void 0,a&&o!==h&&o!==f?[]:[n]);T(r,!0,s)}catch(e){T(r,!1,e)}}),r)}const x=function(){},D=e.AggregateError;class I{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(e){return T(new this(null),w,e)}static reject(e){return T(new this(null),S,e)}static any(e){if(!e||"function"!=typeof e[Symbol.iterator])return Promise.reject(new D([],"All promises were rejected"));const t=[];let r=0;try{for(let n of e)r++,t.push(I.resolve(n))}catch(e){return Promise.reject(new D([],"All promises were rejected"))}if(0===r)return Promise.reject(new D([],"All promises were rejected"));let n=!1;const a=[];return new I(((e,i)=>{for(let o=0;o<t.length;o++)t[o].then((t=>{n||(n=!0,e(t))}),(e=>{a.push(e),r--,0===r&&(n=!0,i(new D(a,"All promises were rejected")))}))}))}static race(e){let t,r,n=new this(((e,n)=>{t=e,r=n}));function a(e){t(e)}function i(e){r(e)}for(let t of e)p(t)||(t=this.resolve(t)),t.then(a,i);return n}static all(e){return I.allWithCallback(e)}static allSettled(e){return(this&&this.prototype instanceof I?this:I).allWithCallback(e,{thenCallback:e=>({status:"fulfilled",value:e}),errorCallback:e=>({status:"rejected",reason:e})})}static allWithCallback(e,t){let r,n,a=new this(((e,t)=>{r=e,n=t})),i=2,o=0;const s=[];for(let a of e){p(a)||(a=this.resolve(a));const c=o;try{a.then((e=>{s[c]=t?t.thenCallback(e):e,i--,0===i&&r(s)}),(e=>{t?(s[c]=t.errorCallback(e),i--,0===i&&r(s)):n(e)}))}catch(e){n(e)}i++,o++}return i-=2,0===i&&r(s),a}constructor(e){const t=this;if(!(t instanceof I))throw new Error("Must be an instanceof Promise.");t[m]=b,t[y]=[];try{const r=P();e&&e(r(E(t,w)),r(E(t,S)))}catch(e){T(t,!1,e)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return I}then(e,r){var n;let a=null===(n=this.constructor)||void 0===n?void 0:n[Symbol.species];a&&"function"==typeof a||(a=this.constructor||I);const i=new a(x),o=t.current;return this[m]==b?this[y].push(o,i,e,r):O(this,o,i,e,r),i}catch(e){return this.then(null,e)}finally(e){var r;let n=null===(r=this.constructor)||void 0===r?void 0:r[Symbol.species];n&&"function"==typeof n||(n=I);const a=new n(x);a[v]=v;const i=t.current;return this[m]==b?this[y].push(i,a,e,e):O(this,i,a,e,e),a}}I.resolve=I.resolve,I.reject=I.reject,I.race=I.race,I.all=I.all;const M=e[c]=e.Promise;e.Promise=I;const A=i("thenPatched");function j(e){const t=e.prototype,r=n(t,"then");if(r&&(!1===r.writable||!r.configurable))return;const a=t.then;t[l]=a,e.prototype.then=function(e,t){return new I(((e,t)=>{a.call(this,e,t)})).then(e,t)},e[A]=!0}return r.patchThen=j,M&&(j(M),L(e,"fetch",(e=>{return t=e,function(e,r){let n=t.apply(e,r);if(n instanceof I)return n;let a=n.constructor;return a[A]||j(a),n};var t}))),Promise[t.__symbol__("uncaughtPromiseErrors")]=o,I})),Zone.__load_patch("toString",(e=>{const t=Function.prototype.toString,r=v("OriginalDelegate"),n=v("Promise"),a=v("Error"),i=function(){if("function"==typeof this){const i=this[r];if(i)return"function"==typeof i?t.call(i):Object.prototype.toString.call(i);if(this===Promise){const r=e[n];if(r)return t.call(r)}if(this===Error){const r=e[a];if(r)return t.call(r)}}return t.call(this)};i[r]=t,Function.prototype.toString=i;const o=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":o.call(this)}}));let B=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){B=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){B=!1}const U={useG:!0},z={},V={},H=new RegExp("^"+h+"(\\w+)(true|false)$"),W=v("propagationStopped");function Z(e,t){const r=(t?t(e):e)+f,n=(t?t(e):e)+p,a=h+r,i=h+n;z[e]={},z[e].false=a,z[e].true=i}function G(e,t,r,n){const a=n&&n.add||c,o=n&&n.rm||l,s=n&&n.listeners||"eventListeners",u=n&&n.rmAll||"removeAllListeners",d=v(a),m="."+a+":",y=function(e,t,r){if(e.isRemoved)return;const n=e.callback;let a;"object"==typeof n&&n.handleEvent&&(e.callback=e=>n.handleEvent(e),e.originalDelegate=n);try{e.invoke(e,t,[r])}catch(e){a=e}const i=e.options;if(i&&"object"==typeof i&&i.once){const n=e.originalDelegate?e.originalDelegate:e.callback;t[o].call(t,r.type,n,i)}return a};function g(r,n,a){if(!(n=n||e.event))return;const i=r||n.target||e,o=i[z[n.type][a?p:f]];if(o){const e=[];if(1===o.length){const t=y(o[0],i,n);t&&e.push(t)}else{const t=o.slice();for(let r=0;r<t.length&&(!n||!0!==n[W]);r++){const a=y(t[r],i,n);a&&e.push(a)}}if(1===e.length)throw e[0];for(let r=0;r<e.length;r++){const n=e[r];t.nativeScheduleMicroTask((()=>{throw n}))}}}const _=function(e){return g(this,e,!1)},b=function(e){return g(this,e,!0)};function w(t,r){if(!t)return!1;let n=!0;r&&void 0!==r.useG&&(n=r.useG);const c=r&&r.vh;let l=!0;r&&void 0!==r.chkDup&&(l=r.chkDup);let y=!1;r&&void 0!==r.rt&&(y=r.rt);let g=t;for(;g&&!g.hasOwnProperty(a);)g=i(g);if(!g&&t[a]&&(g=t),!g)return!1;if(g[d])return!1;const w=r&&r.eventNameToString,S={},E=g[d]=g[a],k=g[v(o)]=g[o],T=g[v(s)]=g[s],R=g[v(u)]=g[u];let C;function O(e,t){return!B&&"object"==typeof e&&e?!!e.capture:B&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?Object.assign(Object.assign({},e),{passive:!0}):e:{passive:!0}:e}r&&r.prepend&&(C=g[v(r.prepend)]=g[r.prepend]);const x=n?function(e){if(!S.isExisting)return E.call(S.target,S.eventName,S.capture?b:_,S.options)}:function(e){return E.call(S.target,S.eventName,e.invoke,S.options)},D=n?function(e){if(!e.isRemoved){const t=z[e.eventName];let r;t&&(r=t[e.capture?p:f]);const n=r&&e.target[r];if(n)for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1),e.isRemoved=!0,0===n.length&&(e.allRemoved=!0,e.target[r]=null);break}}if(e.allRemoved)return k.call(e.target,e.eventName,e.capture?b:_,e.options)}:function(e){return k.call(e.target,e.eventName,e.invoke,e.options)},I=r&&r.diff?r.diff:function(e,t){const r=typeof t;return"function"===r&&e.callback===t||"object"===r&&e.originalDelegate===t},L=Zone[v("UNPATCHED_EVENTS")],M=e[v("PASSIVE_EVENTS")],j=function(t,a,i,o,s=!1,u=!1){return function(){const d=this||e;let h=arguments[0];r&&r.transferEventName&&(h=r.transferEventName(h));let m=arguments[1];if(!m)return t.apply(this,arguments);if(P&&"uncaughtException"===h)return t.apply(this,arguments);let y=!1;if("function"!=typeof m){if(!m.handleEvent)return t.apply(this,arguments);y=!0}if(c&&!c(t,m,d,arguments))return;const v=B&&!!M&&-1!==M.indexOf(h),g=O(arguments[2],v);if(L)for(let e=0;e<L.length;e++)if(h===L[e])return v?t.call(d,h,m,g):t.apply(this,arguments);const _=!!g&&("boolean"==typeof g||g.capture),b=!(!g||"object"!=typeof g)&&g.once,E=Zone.current;let k=z[h];k||(Z(h,w),k=z[h]);const T=k[_?p:f];let R,C=d[T],x=!1;if(C){if(x=!0,l)for(let e=0;e<C.length;e++)if(I(C[e],m))return}else C=d[T]=[];const D=d.constructor.name,A=V[D];A&&(R=A[h]),R||(R=D+a+(w?w(h):h)),S.options=g,b&&(S.options.once=!1),S.target=d,S.capture=_,S.eventName=h,S.isExisting=x;const j=n?U:void 0;j&&(j.taskData=S);const N=E.scheduleEventTask(R,m,j,i,o);return S.target=null,j&&(j.taskData=null),b&&(g.once=!0),(B||"boolean"!=typeof N.options)&&(N.options=g),N.target=d,N.capture=_,N.eventName=h,y&&(N.originalDelegate=m),u?C.unshift(N):C.push(N),s?d:void 0}};return g[a]=j(E,m,x,D,y),C&&(g.prependListener=j(C,".prependListener:",(function(e){return C.call(S.target,S.eventName,e.invoke,S.options)}),D,y,!0)),g[o]=function(){const t=this||e;let n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));const a=arguments[2],i=!!a&&("boolean"==typeof a||a.capture),o=arguments[1];if(!o)return k.apply(this,arguments);if(c&&!c(k,o,t,arguments))return;const s=z[n];let l;s&&(l=s[i?p:f]);const u=l&&t[l];if(u)for(let e=0;e<u.length;e++){const r=u[e];if(I(r,o))return u.splice(e,1),r.isRemoved=!0,0===u.length&&(r.allRemoved=!0,t[l]=null,"string"==typeof n)&&(t[h+"ON_PROPERTY"+n]=null),r.zone.cancelTask(r),y?t:void 0}return k.apply(this,arguments)},g[s]=function(){const t=this||e;let n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));const a=[],i=q(t,w?w(n):n);for(let e=0;e<i.length;e++){const t=i[e];let r=t.originalDelegate?t.originalDelegate:t.callback;a.push(r)}return a},g[u]=function(){const t=this||e;let n=arguments[0];if(n){r&&r.transferEventName&&(n=r.transferEventName(n));const e=z[n];if(e){const r=e.false,a=e.true,i=t[r],s=t[a];if(i){const e=i.slice();for(let t=0;t<e.length;t++){const r=e[t];let a=r.originalDelegate?r.originalDelegate:r.callback;this[o].call(this,n,a,r.options)}}if(s){const e=s.slice();for(let t=0;t<e.length;t++){const r=e[t];let a=r.originalDelegate?r.originalDelegate:r.callback;this[o].call(this,n,a,r.options)}}}}else{const e=Object.keys(t);for(let t=0;t<e.length;t++){const r=e[t],n=H.exec(r);let a=n&&n[1];a&&"removeListener"!==a&&this[u].call(this,a)}this[u].call(this,"removeListener")}if(y)return this},A(g[a],E),A(g[o],k),R&&A(g[u],R),T&&A(g[s],T),!0}let S=[];for(let e=0;e<r.length;e++)S[e]=w(r[e],n);return S}function q(e,t){if(!t){const r=[];for(let n in e){const a=H.exec(n);let i=a&&a[1];if(i&&(!t||i===t)){const t=e[n];if(t)for(let e=0;e<t.length;e++)r.push(t[e])}}return r}let r=z[t];r||(Z(t),r=z[t]);const n=e[r.false],a=e[r.true];return n?a?n.concat(a):n.slice():a?a.slice():[]}function $(e,t){const r=e.Event;r&&r.prototype&&t.patchMethod(r.prototype,"stopImmediatePropagation",(e=>function(t,r){t[W]=!0,e&&e.apply(t,r)}))}function K(e,t,r,n,a){const i=Zone.__symbol__(n);if(t[i])return;const o=t[i]=t[n];t[n]=function(i,s,c){return s&&s.prototype&&a.forEach((function(t){const a=`${r}.${n}::`+t,i=s.prototype;try{if(i.hasOwnProperty(t)){const r=e.ObjectGetOwnPropertyDescriptor(i,t);r&&r.value?(r.value=e.wrapWithCurrentZone(r.value,a),e._redefineProperty(s.prototype,t,r)):i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],a))}else i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],a))}catch(e){}})),o.call(t,i,s,c)},e.attachOriginToPatched(t[n],o)}function Q(e,t,r){if(!r||0===r.length)return t;const n=r.filter((t=>t.target===e));if(!n||0===n.length)return t;const a=n[0].ignoreProperties;return t.filter((e=>-1===a.indexOf(e)))}function X(e,t,r,n){e&&x(e,Q(e,t,r),n)}function J(e){return Object.getOwnPropertyNames(e).filter((e=>e.startsWith("on")&&e.length>2)).map((e=>e.substring(2)))}Zone.__load_patch("util",((e,t,r)=>{const i=J(e);r.patchOnProperties=x,r.patchMethod=L,r.bindArguments=w,r.patchMacroTask=M;const u=t.__symbol__("BLACK_LISTED_EVENTS"),d=t.__symbol__("UNPATCHED_EVENTS");e[d]&&(e[u]=e[d]),e[u]&&(t[u]=t[d]=e[u]),r.patchEventPrototype=$,r.patchEventTarget=G,r.isIEOrEdge=F,r.ObjectDefineProperty=a,r.ObjectGetOwnPropertyDescriptor=n,r.ObjectCreate=o,r.ArraySlice=s,r.patchClass=I,r.wrapWithCurrentZone=m,r.filterProperties=Q,r.attachOriginToPatched=A,r._redefineProperty=Object.defineProperty,r.patchCallbacks=K,r.getGlobalObjects=()=>({globalSources:V,zoneSymbolEventNames:z,eventNames:i,isBrowser:k,isMix:T,isNode:P,TRUE_STR:p,FALSE_STR:f,ZONE_SYMBOL_PREFIX:h,ADD_EVENT_LISTENER_STR:c,REMOVE_EVENT_LISTENER_STR:l})}));const Y=v("zoneTask");function ee(e,t,r,n){let a=null,i=null;r+=n;const o={};function s(t){const r=t.data;return r.args[0]=function(){return t.invoke.apply(this,arguments)},r.handleId=a.apply(e,r.args),t}function c(t){return i.call(e,t.data.handleId)}a=L(e,t+=n,(r=>function(a,i){if("function"==typeof i[0]){const e={isPeriodic:"Interval"===n,delay:"Timeout"===n||"Interval"===n?i[1]||0:void 0,args:i},r=i[0];i[0]=function(){try{return r.apply(this,arguments)}finally{e.isPeriodic||("number"==typeof e.handleId?delete o[e.handleId]:e.handleId&&(e.handleId[Y]=null))}};const a=y(t,i[0],e,s,c);if(!a)return a;const l=a.data.handleId;return"number"==typeof l?o[l]=a:l&&(l[Y]=a),l&&l.ref&&l.unref&&"function"==typeof l.ref&&"function"==typeof l.unref&&(a.ref=l.ref.bind(l),a.unref=l.unref.bind(l)),"number"==typeof l||l?l:a}return r.apply(e,i)})),i=L(e,r,(t=>function(r,n){const a=n[0];let i;"number"==typeof a?i=o[a]:(i=a&&a[Y],i||(i=a)),i&&"string"==typeof i.type?"notScheduled"!==i.state&&(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&("number"==typeof a?delete o[a]:a&&(a[Y]=null),i.zone.cancelTask(i)):t.apply(e,n)}))}Zone.__load_patch("legacy",(e=>{const t=e[Zone.__symbol__("legacyPatch")];t&&t()})),Zone.__load_patch("queueMicrotask",((e,t,r)=>{r.patchMethod(e,"queueMicrotask",(e=>function(e,r){t.current.scheduleMicroTask("queueMicrotask",r[0])}))})),Zone.__load_patch("timers",(e=>{const t="set",r="clear";ee(e,t,r,"Timeout"),ee(e,t,r,"Interval"),ee(e,t,r,"Immediate")})),Zone.__load_patch("requestAnimationFrame",(e=>{ee(e,"request","cancel","AnimationFrame"),ee(e,"mozRequest","mozCancel","AnimationFrame"),ee(e,"webkitRequest","webkitCancel","AnimationFrame")})),Zone.__load_patch("blocking",((e,t)=>{const r=["alert","prompt","confirm"];for(let n=0;n<r.length;n++)L(e,r[n],((r,n,a)=>function(n,i){return t.current.run(r,e,i,a)}))})),Zone.__load_patch("EventTarget",((e,t,r)=>{!function(e,t){t.patchEventPrototype(e,t)}(e,r),function(e,t){if(Zone[t.symbol("patchEventTarget")])return;const{eventNames:r,zoneSymbolEventNames:n,TRUE_STR:a,FALSE_STR:i,ZONE_SYMBOL_PREFIX:o}=t.getGlobalObjects();for(let e=0;e<r.length;e++){const t=r[e],s=o+(t+i),c=o+(t+a);n[t]={},n[t][i]=s,n[t][a]=c}const s=e.EventTarget;s&&s.prototype&&t.patchEventTarget(e,t,[s&&s.prototype])}(e,r);const n=e.XMLHttpRequestEventTarget;n&&n.prototype&&r.patchEventTarget(e,r,[n.prototype])})),Zone.__load_patch("MutationObserver",((e,t,r)=>{I("MutationObserver"),I("WebKitMutationObserver")})),Zone.__load_patch("IntersectionObserver",((e,t,r)=>{I("IntersectionObserver")})),Zone.__load_patch("FileReader",((e,t,r)=>{I("FileReader")})),Zone.__load_patch("on_property",((e,t,r)=>{!function(e,t){if(P&&!T)return;if(Zone[e.symbol("patchEvents")])return;const r=t.__Zone_ignore_on_properties;let n=[];if(k){const e=window;n=n.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const t=function(){try{const e=_.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}()?[{target:e,ignoreProperties:["error"]}]:[];X(e,J(e),r?r.concat(t):r,i(e))}n=n.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let e=0;e<n.length;e++){const a=t[n[e]];a&&a.prototype&&X(a.prototype,J(a.prototype),r)}}(r,e)})),Zone.__load_patch("customElements",((e,t,r)=>{!function(e,t){const{isBrowser:r,isMix:n}=t.getGlobalObjects();(r||n)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,r)})),Zone.__load_patch("XHR",((e,t)=>{!function(e){const c=e.XMLHttpRequest;if(!c)return;const l=c.prototype;let p=l[u],f=l[d];if(!p){const t=e.XMLHttpRequestEventTarget;if(t){const e=t.prototype;p=e[u],f=e[d]}}const h="readystatechange",m="scheduled";function g(e){const n=e.data,o=n.target;o[i]=!1,o[s]=!1;const c=o[a];p||(p=o[u],f=o[d]),c&&f.call(o,h,c);const l=o[a]=()=>{if(o.readyState===o.DONE)if(!n.aborted&&o[i]&&e.state===m){const r=o[t.__symbol__("loadfalse")];if(0!==o.status&&r&&r.length>0){const a=e.invoke;e.invoke=function(){const r=o[t.__symbol__("loadfalse")];for(let t=0;t<r.length;t++)r[t]===e&&r.splice(t,1);n.aborted||e.state!==m||a.call(e)},r.push(e)}else e.invoke()}else n.aborted||!1!==o[i]||(o[s]=!0)};return p.call(o,h,l),o[r]||(o[r]=e),P.apply(o,n.args),o[i]=!0,e}function _(){}function b(e){const t=e.data;return t.aborted=!0,k.apply(t.target,t.args)}const w=L(l,"open",(()=>function(e,t){return e[n]=0==t[2],e[o]=t[1],w.apply(e,t)})),S=v("fetchTaskAborting"),E=v("fetchTaskScheduling"),P=L(l,"send",(()=>function(e,r){if(!0===t.current[E])return P.apply(e,r);if(e[n])return P.apply(e,r);{const t={target:e,url:e[o],isPeriodic:!1,args:r,aborted:!1},n=y("XMLHttpRequest.send",_,t,g,b);e&&!0===e[s]&&!t.aborted&&n.state===m&&n.invoke()}})),k=L(l,"abort",(()=>function(e,n){const a=e[r];if(a&&"string"==typeof a.type){if(null==a.cancelFn||a.data&&a.data.aborted)return;a.zone.cancelTask(a)}else if(!0===t.current[S])return k.apply(e,n)}))}(e);const r=v("xhrTask"),n=v("xhrSync"),a=v("xhrListener"),i=v("xhrScheduled"),o=v("xhrURL"),s=v("xhrErrorBeforeScheduled")})),Zone.__load_patch("geolocation",(e=>{e.navigator&&e.navigator.geolocation&&function(e,t){const r=e.constructor.name;for(let a=0;a<t.length;a++){const i=t[a],o=e[i];if(o){if(!S(n(e,i)))continue;e[i]=(e=>{const t=function(){return e.apply(this,w(arguments,r+"."+i))};return A(t,e),t})(o)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),Zone.__load_patch("PromiseRejectionEvent",((e,t)=>{function r(t){return function(r){q(e,t).forEach((n=>{const a=e.PromiseRejectionEvent;if(a){const e=new a(t,{promise:r.promise,reason:r.rejection});n.invoke(e)}}))}}e.PromiseRejectionEvent&&(t[v("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[v("rejectionHandledHandler")]=r("rejectionhandled"))}))},2480:()=>{},907:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:()=>n})},5861:(e,t,r)=>{"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}r.d(t,{Z:()=>a})},5671:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>n})},3144:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,{Z:()=>a})},4942:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>n})},885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(181);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(907);function a(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}},7002:e=>{"use strict";e.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9794:e=>{"use strict";e.exports={version:"1.0.34"}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(710)})(),e.exports=t()},996:function(e){"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function a(e,t,r){return e.concat(t).map((function(e){return n(e,r)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function s(e,r,c){(c=c||{}).arrayMerge=c.arrayMerge||a,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=n;var l=Array.isArray(r);return l===Array.isArray(e)?l?c.arrayMerge(e,r,c):function(e,t,r){var a={};return r.isMergeableObject(e)&&i(e).forEach((function(t){a[t]=n(e[t],r)})),i(t).forEach((function(i){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(o(e,i)&&r.isMergeableObject(t[i])?a[i]=function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s}(i,r)(e[i],t[i],r):a[i]=n(t[i],r))})),a}(e,r,c):n(r,c)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return s(e,r,t)}),{})};var c=s;e.exports=c},187:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,a)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var a,i,o,l;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=c(e))>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=u.bind(n);return a.listener=r,n.wrapFn=a,a}function p(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=h(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,o;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},90:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function r(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,n,a){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof n&&(a=n,n={}),n=n||{},a=a||function(){},o.type=n.type||"text/javascript",o.charset=n.charset||"utf8",o.async=!("async"in n)||!!n.async,o.src=e,n.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(o,n.attrs),n.text&&(o.text=""+n.text),("onload"in o?t:r)(o,a),o.onload||t(o,a),i.appendChild(o)}},845:function(e,t,r){"use strict";r.r(t);var n=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function a(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!((a=e[r])===(i=t[r])||n(a)&&n(i)))return!1;var a,i;return!0}t.default=function(e,t){var r;void 0===t&&(t=a);var n,i=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&r===this&&t(a,i)||(n=e.apply(this,a),o=!0,r=this,i=a),n}}},703:function(e,t,r){"use strict";var n=r(414);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},697:function(e,t,r){e.exports=r(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},448:function(e,t,r){"use strict";var n=r(294),a=r(840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(e,t,r,n,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function _(e,t,r,n){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,g);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,g);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,g);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),R=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=M&&e[M]||e["@@iterator"])?e:null}var j,N=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),i=n.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var c="\n"+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 1:return U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case k:return"Profiler";case P:return"StrictMode";case O:return"Suspense";case x:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Z(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function $(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Y(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function ie(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(fe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Pe=null;function ke(e){if(e=_a(e)){if("function"!=typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),Se(e.stateNode,e.type,t))}}function Te(e){Ee?Pe?Pe.push(e):Pe=[e]:Ee=e}function Re(){if(Ee){var e=Ee,t=Pe;if(Pe=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Oe(){}var xe=!1;function De(e,t,r){if(xe)return e(t,r);xe=!0;try{return Ce(e,t,r)}finally{xe=!1,(null!==Ee||null!==Pe)&&(Oe(),Re())}}function Ie(e,t){var r=e.stateNode;if(null===r)return null;var n=wa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(i(231,t,typeof r));return r}var Le=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Le=!1}function Ae(e,t,r,n,a,i,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(e){this.onError(e)}}var je=!1,Ne=null,Fe=!1,Be=null,Ue={onError:function(e){je=!0,Ne=e}};function ze(e,t,r,n,a,i,o,s,c){je=!1,Ne=null,Ae.apply(Ue,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(i(188))}function Ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(n=a.return)){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return We(a),e;if(o===n)return We(a),t;o=o.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=o;else{for(var s=!1,c=a.child;c;){if(c===r){s=!0,r=a,n=o;break}if(c===n){s=!0,n=a,r=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===r){s=!0,r=o,n=a;break}if(c===n){s=!0,n=o,r=a;break}c=c.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Xe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ye=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,it=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2,lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&r;if(0!==o){var s=o&~a;0!==s?n=dt(s):0!=(i&=o)&&(n=dt(i))}else 0!=(o=r&~a)?n=dt(o):0!==i&&(n=dt(i));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&a)&&((a=n&-n)>=(i=t&-t)||16===a&&0!=(4194240&i)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-ot(t)),n|=e[r],t&=~a;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0==(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function gt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,St,Et,Pt,kt,Tt=!1,Rt=[],Ct=null,Ot=null,xt=null,Dt=new Map,It=new Map,Lt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function jt(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&null!==(t=_a(t))&&St(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Nt(e){var t=ga(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void kt(e.priority,(function(){Et(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=_a(r))&&St(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Bt(e,t,r){Ft(e)&&r.delete(t)}function Ut(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Ot&&Ft(Ot)&&(Ot=null),null!==xt&&Ft(xt)&&(xt=null),Dt.forEach(Bt),It.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return zt(t,e)}if(0<Rt.length){zt(Rt[0],e);for(var r=1;r<Rt.length;r++){var n=Rt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Ot&&zt(Ot,e),null!==xt&&zt(xt,e),Dt.forEach(t),It.forEach(t),r=0;r<Lt.length;r++)(n=Lt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Lt.length&&null===(r=Lt[0]).blockedOn;)Nt(r),null===r.blockedOn&&Lt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Zt(e,t,r,n){var a=_t,i=Ht.transition;Ht.transition=null;try{_t=1,qt(e,t,r,n)}finally{_t=a,Ht.transition=i}}function Gt(e,t,r,n){var a=_t,i=Ht.transition;Ht.transition=null;try{_t=4,qt(e,t,r,n)}finally{_t=a,Ht.transition=i}}function qt(e,t,r,n){if(Wt){var a=Kt(e,t,r,n);if(null===a)Wn(e,t,n,$t,r),At(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Ct=jt(Ct,e,t,r,n,a),!0;case"dragenter":return Ot=jt(Ot,e,t,r,n,a),!0;case"mouseover":return xt=jt(xt,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Dt.set(i,jt(Dt.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,It.set(i,jt(It.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(At(e,n),4&t&&-1<Mt.indexOf(e)){for(;null!==a;){var i=_a(a);if(null!==i&&wt(i),null===(i=Kt(e,t,r,n))&&Wn(e,t,n,$t,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var $t=null;function Kt(e,t,r,n){if($t=null,null!==(e=ga(e=we(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ye:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Yt=null;function er(){if(Yt)return Yt;var e,t,r=Jt,n=r.length,a="value"in Xt?Xt.value:Xt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[i-t];t++);return Yt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,or,sr,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=ar(cr),ur=N({},cr,{view:0,detail:0}),dr=ar(ur),pr=N({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ir=e.screenX-sr.screenX,or=e.screenY-sr.screenY):or=ir=0,sr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:or}}),fr=ar(pr),hr=ar(N({},pr,{dataTransfer:0})),mr=ar(N({},ur,{relatedTarget:0})),yr=ar(N({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=N({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gr=ar(vr),_r=ar(N({},cr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Er(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sr[e])&&!!t[e]}function Pr(){return Er}var kr=N({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tr=ar(kr),Rr=ar(N({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cr=ar(N({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr})),Or=ar(N({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),xr=N({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=ar(xr),Ir=[9,13,27,32],Lr=u&&"CompositionEvent"in window,Mr=null;u&&"documentMode"in document&&(Mr=document.documentMode);var Ar=u&&"TextEvent"in window&&!Mr,jr=u&&(!Lr||Mr&&8<Mr&&11>=Mr),Nr=String.fromCharCode(32),Fr=!1;function Br(e,t){switch(e){case"keyup":return-1!==Ir.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1,Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Wr(e,t,r,n){Te(n),0<(t=Gn(t,"onChange")).length&&(r=new lr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zr=null,Gr=null;function qr(e){Fn(e,0)}function $r(e){if(q(ba(e)))return e}function Kr(e,t){if("change"===e)return t}var Qr=!1;if(u){var Xr;if(u){var Jr="oninput"in document;if(!Jr){var Yr=document.createElement("div");Yr.setAttribute("oninput","return;"),Jr="function"==typeof Yr.oninput}Xr=Jr}else Xr=!1;Qr=Xr&&(!document.documentMode||9<document.documentMode)}function en(){Zr&&(Zr.detachEvent("onpropertychange",tn),Gr=Zr=null)}function tn(e){if("value"===e.propertyName&&$r(Gr)){var t=[];Wr(t,Gr,e,we(e)),De(qr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Zr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $r(Gr)}function an(e,t){if("click"===e)return $r(t)}function on(e,t){if("input"===e||"change"===e)return $r(t)}var sn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cn(e,t){if(sn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!d.call(t,a)||!sn(e[a],t[a]))return!1}return!0}function ln(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=ln(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ln(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hn(e){var t=pn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=void 0===n.end?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=un(r,i);var o=un(r,n);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,yn=null,vn=null,gn=null,_n=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;_n||null==yn||yn!==$(n)||(n="selectionStart"in(n=yn)&&fn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&cn(gn,n)||(gn=n,0<(n=Gn(vn,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Sn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},En={},Pn={};function kn(e){if(En[e])return En[e];if(!Sn[e])return e;var t,r=Sn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Pn)return En[e]=r[t];return e}u&&(Pn=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);var Tn=kn("animationend"),Rn=kn("animationiteration"),Cn=kn("animationstart"),On=kn("transitionend"),xn=new Map,Dn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,t){xn.set(e,t),c(t,[e])}for(var Ln=0;Ln<Dn.length;Ln++){var Mn=Dn[Ln];In(Mn.toLowerCase(),"on"+(Mn[0].toUpperCase()+Mn.slice(1)))}In(Tn,"onAnimationEnd"),In(Rn,"onAnimationIteration"),In(Cn,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(On,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var An="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jn=new Set("cancel close invalid load scroll toggle".split(" ").concat(An));function Nn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,o,s,c,l){if(ze.apply(this,arguments),je){if(!je)throw Error(i(198));var u=Ne;je=!1,Ne=null,Fe||(Fe=!0,Be=u)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&a.isPropagationStopped())break e;Nn(a,s,l),i=c}else for(o=0;o<n.length;o++){if(c=(s=n[o]).instance,l=s.currentTarget,s=s.listener,c!==i&&a.isPropagationStopped())break e;Nn(a,s,l),i=c}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Bn(e,t){var r=t[ma];void 0===r&&(r=t[ma]=new Set);var n=e+"__bubble";r.has(n)||(Hn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Hn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[zn]){e[zn]=!0,o.forEach((function(t){"selectionchange"!==t&&(jn.has(t)||Un(t,!1,e),Un(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Hn(e,t,r,n){switch(Qt(t)){case 1:var a=Zt;break;case 4:a=Gt;break;default:a=qt}r=a.bind(null,t,r,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,a){var i=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ga(s)))return;if(5===(c=o.tag)||6===c){n=i=o;continue e}s=s.parentNode}}n=n.return}De((function(){var n=i,a=we(r),o=[];e:{var s=xn.get(e);if(void 0!==s){var c=lr,l=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=Tr;break;case"focusin":l="focus",c=mr;break;case"focusout":l="blur",c=mr;break;case"beforeblur":case"afterblur":c=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Cr;break;case Tn:case Rn:case Cn:c=yr;break;case On:c=Or;break;case"scroll":c=dr;break;case"wheel":c=Dr;break;case"copy":case"cut":case"paste":c=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Rr}var u=0!=(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var f,h=n;null!==h;){var m=(f=h).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&null!=(m=Ie(h,p))&&u.push(Zn(h,m,f))),d)break;h=h.return}0<u.length&&(s=new c(s,l,null,r,a),o.push({event:s,listeners:u}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===be||!(l=r.relatedTarget||r.fromElement)||!ga(l)&&!l[ha])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=n,null!==(l=(l=r.relatedTarget||r.toElement)?ga(l):null)&&(l!==(d=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=n),c!==l)){if(u=fr,m="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rr,m="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==c?s:ba(c),f=null==l?s:ba(l),(s=new u(m,h+"leave",c,r,a)).target=d,s.relatedTarget=f,m=null,ga(a)===n&&((u=new u(p,h+"enter",l,r,a)).target=f,u.relatedTarget=d,m=u),d=m,c&&l)e:{for(p=l,h=0,f=u=c;f;f=qn(f))h++;for(f=0,m=p;m;m=qn(m))f++;for(;0<h-f;)u=qn(u),h--;for(;0<f-h;)p=qn(p),f--;for(;h--;){if(u===p||null!==p&&u===p.alternate)break e;u=qn(u),p=qn(p)}u=null}else u=null;null!==c&&$n(o,s,c,u,!1),null!==l&&null!==d&&$n(o,d,l,u,!0)}if("select"===(c=(s=n?ba(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Kr;else if(Hr(s))if(Qr)y=on;else{y=nn;var v=rn}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=an);switch(y&&(y=y(e,n))?Wr(o,y,r,a):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=n?ba(n):window,e){case"focusin":(Hr(v)||"true"===v.contentEditable)&&(yn=v,vn=n,gn=null);break;case"focusout":gn=vn=yn=null;break;case"mousedown":_n=!0;break;case"contextmenu":case"mouseup":case"dragend":_n=!1,bn(o,r,a);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":bn(o,r,a)}var g;if(Lr)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zr?Br(e,r)&&(_="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(_="onCompositionStart");_&&(jr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==_?"onCompositionEnd"===_&&zr&&(g=er()):(Jt="value"in(Xt=a)?Xt.value:Xt.textContent,zr=!0)),0<(v=Gn(n,_)).length&&(_=new _r(_,e,null,r,a),o.push({event:_,listeners:v}),(g||null!==(g=Ur(r)))&&(_.data=g))),(g=Ar?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,Nr);case"textInput":return(e=t.data)===Nr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Lr&&Br(e,t)?(e=er(),Yt=Jt=Xt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jr&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=Gn(n,"onBeforeInput")).length&&(a=new _r("onBeforeInput","beforeinput",null,r,a),o.push({event:a,listeners:n}),a.data=g)}Fn(o,t)}))}function Zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ie(e,r))&&n.unshift(Zn(e,i,a)),null!=(i=Ie(e,t))&&n.push(Zn(e,i,a))),e=e.return}return n}function qn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $n(e,t,r,n,a){for(var i=t._reactName,o=[];null!==r&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(null!==c&&c===n)break;5===s.tag&&null!==l&&(s=l,a?null!=(c=Ie(r,i))&&o.unshift(Zn(r,c,s)):a||null!=(c=Ie(r,i))&&o.push(Zn(r,c,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Kn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Xn(e){return("string"==typeof e?e:""+e).replace(Kn,"\n").replace(Qn,"")}function Jn(e,t,r){if(t=Xn(t),Xn(e)!==t&&r)throw Error(i(425))}function Yn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,ia="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==ia?function(e){return ia.resolve(null).then(e).catch(sa)}:na;function sa(e){setTimeout((function(){throw e}))}function ca(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);Vt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),pa="__reactFiber$"+da,fa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,ya="__reactListeners$"+da,va="__reactHandles$"+da;function ga(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ha]||r[pa]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ua(e);null!==e;){if(r=e[pa])return r;e=ua(e)}return t}r=(e=r).parentNode}return null}function _a(e){return!(e=e[pa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[fa]||null}var Sa=[],Ea=-1;function Pa(e){return{current:e}}function ka(e){0>Ea||(e.current=Sa[Ea],Sa[Ea]=null,Ea--)}function Ta(e,t){Ea++,Sa[Ea]=e.current,e.current=t}var Ra={},Ca=Pa(Ra),Oa=Pa(!1),xa=Ra;function Da(e,t){var r=e.type.contextTypes;if(!r)return Ra;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ia(e){return null!=e.childContextTypes}function La(){ka(Oa),ka(Ca)}function Ma(e,t,r){if(Ca.current!==Ra)throw Error(i(168));Ta(Ca,t),Ta(Oa,r)}function Aa(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(i(108,H(e)||"Unknown",a));return N({},r,n)}function ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ra,xa=Ca.current,Ta(Ca,e),Ta(Oa,Oa.current),!0}function Na(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Aa(e,t,xa),n.__reactInternalMemoizedMergedChildContext=e,ka(Oa),ka(Ca),Ta(Ca,e)):ka(Oa),Ta(Oa,r)}var Fa=null,Ba=!1,Ua=!1;function za(e){null===Fa?Fa=[e]:Fa.push(e)}function Va(){if(!Ua&&null!==Fa){Ua=!0;var e=0,t=_t;try{var r=Fa;for(_t=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fa=null,Ba=!1}catch(t){throw null!==Fa&&(Fa=Fa.slice(e+1)),qe(Ye,Va),t}finally{_t=t,Ua=!1}}return null}var Ha=[],Wa=0,Za=null,Ga=0,qa=[],$a=0,Ka=null,Qa=1,Xa="";function Ja(e,t){Ha[Wa++]=Ga,Ha[Wa++]=Za,Za=e,Ga=t}function Ya(e,t,r){qa[$a++]=Qa,qa[$a++]=Xa,qa[$a++]=Ka,Ka=e;var n=Qa;e=Xa;var a=32-ot(n)-1;n&=~(1<<a),r+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Qa=1<<32-ot(t)+a|r<<a|n,Xa=i+e}else Qa=1<<i|r<<a|n,Xa=e}function ei(e){null!==e.return&&(Ja(e,1),Ya(e,1,0))}function ti(e){for(;e===Za;)Za=Ha[--Wa],Ha[Wa]=null,Ga=Ha[--Wa],Ha[Wa]=null;for(;e===Ka;)Ka=qa[--$a],qa[$a]=null,Xa=qa[--$a],qa[$a]=null,Qa=qa[--$a],qa[$a]=null}var ri=null,ni=null,ai=!1,ii=null;function oi(e,t){var r=Dl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function si(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,ni=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ka?{id:Qa,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Dl(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ri=e,ni=null,!0);default:return!1}}function ci(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function li(e){if(ai){var t=ni;if(t){var r=t;if(!si(e,t)){if(ci(e))throw Error(i(418));t=la(r.nextSibling);var n=ri;t&&si(e,t)?oi(n,r):(e.flags=-4097&e.flags|2,ai=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ri=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function di(e){if(e!==ri)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ni)){if(ci(e))throw pi(),Error(i(418));for(;t;)oi(e,t),t=la(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=la(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=ri?la(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ni;e;)e=la(e.nextSibling)}function fi(){ni=ri=null,ai=!1}function hi(e){null===ii?ii=[e]:ii.push(e)}var mi=b.ReactCurrentBatchConfig;function yi(e,t){if(e&&e.defaultProps){for(var r in t=N({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var vi=Pa(null),gi=null,_i=null,bi=null;function wi(){bi=_i=gi=null}function Si(e){var t=vi.current;ka(vi),e._currentValue=t}function Ei(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pi(e,t){gi=e,bi=_i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(bs=!0),e.firstContext=null)}function ki(e){var t=e._currentValue;if(bi!==e)if(e={context:e,memoizedValue:t,next:null},null===_i){if(null===gi)throw Error(i(308));_i=e,gi.dependencies={lanes:0,firstContext:e}}else _i=_i.next=e;return t}var Ti=null;function Ri(e){null===Ti?Ti=[e]:Ti.push(e)}function Ci(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ri(t)):(r.next=a.next,a.next=r),t.interleaved=r,Oi(e,n)}function Oi(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var xi=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&Cc)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Oi(e,r)}return null===(a=n.interleaved)?(t.next=t,Ri(n)):(t.next=a.next,a.next=t),n.interleaved=t,Oi(e,r)}function Ai(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}function ji(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?a=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ni(e,t,r,n){var a=e.updateQueue;xi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===o?i=l:o.next=l,o=c;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c)}if(null!==i){var d=a.baseState;for(o=0,u=l=c=null,s=i;;){var p=s.lane,f=s.eventTime;if((n&p)===p){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(p=t,f=r,m.tag){case 1:if("function"==typeof(h=m.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(p="function"==typeof(h=m.payload)?h.call(f,d,p):h))break e;d=N({},d,p);break e;case 2:xi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=f,c=d):u=u.next=f,o|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===u&&(c=d),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);jc|=o,e.lanes=o,e.memoizedState=d}}function Fi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!=typeof a)throw Error(i(191,a));a.call(n)}}}var Bi=(new n.Component).refs;function Ui(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:N({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var zi={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=el(),a=tl(e),i=Li(n,a);i.payload=t,null!=r&&(i.callback=r),null!==(t=Mi(e,i,a))&&(rl(t,e,a,n),Ai(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=el(),a=tl(e),i=Li(n,a);i.tag=1,i.payload=t,null!=r&&(i.callback=r),null!==(t=Mi(e,i,a))&&(rl(t,e,a,n),Ai(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=el(),n=tl(e),a=Li(r,n);a.tag=2,null!=t&&(a.callback=t),null!==(t=Mi(e,a,n))&&(rl(t,e,n,r),Ai(t,e,n))}};function Vi(e,t,r,n,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&cn(r,n)&&cn(a,i))}function Hi(e,t,r){var n=!1,a=Ra,i=t.contextType;return"object"==typeof i&&null!==i?i=ki(i):(a=Ia(t)?xa:Ca.current,i=(n=null!=(n=t.contextTypes))?Da(e,a):Ra),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Wi(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&zi.enqueueReplaceState(t,t.state,null)}function Zi(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=Bi,Di(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=ki(i):(i=Ia(t)?xa:Ca.current,a.context=Da(e,i)),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Ui(e,t,i,r),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&zi.enqueueReplaceState(a,a.state,null),Ni(e,r,a,n),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function Gi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var a=n,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Bi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function qi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $i(e){return(0,e._init)(e._payload)}function Ki(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=Nl(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function l(e,t,r,n){var i=r.type;return i===E?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===I&&$i(i)===t.type)?((n=a(t,r.props)).ref=Gi(e,t,r),n.return=e,n):((n=Ml(r.type,r.key,r.props,null,e.mode,n)).ref=Gi(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fl(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Al(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function p(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Nl(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Ml(t.type,t.key,t.props,null,e.mode,r)).ref=Gi(e,null,t),r.return=e,r;case S:return(t=Fl(t,e.mode,r)).return=e,t;case I:return p(e,(0,t._init)(t._payload),r)}if(te(t)||A(t))return(t=Al(t,e.mode,r,null)).return=e,t;qi(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==a?null:c(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?l(e,t,r,n):null;case S:return r.key===a?u(e,t,r,n):null;case I:return f(e,t,(a=r._init)(r._payload),n)}if(te(r)||A(r))return null!==a?null:d(e,t,r,n,null);qi(e,r)}return null}function h(e,t,r,n,a){if("string"==typeof n&&""!==n||"number"==typeof n)return c(t,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return l(t,e=e.get(null===n.key?r:n.key)||null,n,a);case S:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case I:return h(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||A(n))return d(t,e=e.get(r)||null,n,a,null);qi(t,n)}return null}function m(a,i,s,c){for(var l=null,u=null,d=i,m=i=0,y=null;null!==d&&m<s.length;m++){d.index>m?(y=d,d=null):y=d.sibling;var v=f(a,d,s[m],c);if(null===v){null===d&&(d=y);break}e&&d&&null===v.alternate&&t(a,d),i=o(v,i,m),null===u?l=v:u.sibling=v,u=v,d=y}if(m===s.length)return r(a,d),ai&&Ja(a,m),l;if(null===d){for(;m<s.length;m++)null!==(d=p(a,s[m],c))&&(i=o(d,i,m),null===u?l=d:u.sibling=d,u=d);return ai&&Ja(a,m),l}for(d=n(a,d);m<s.length;m++)null!==(y=h(d,a,m,s[m],c))&&(e&&null!==y.alternate&&d.delete(null===y.key?m:y.key),i=o(y,i,m),null===u?l=y:u.sibling=y,u=y);return e&&d.forEach((function(e){return t(a,e)})),ai&&Ja(a,m),l}function y(a,s,c,l){var u=A(c);if("function"!=typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var d=u=null,m=s,y=s=0,v=null,g=c.next();null!==m&&!g.done;y++,g=c.next()){m.index>y?(v=m,m=null):v=m.sibling;var _=f(a,m,g.value,l);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(a,m),s=o(_,s,y),null===d?u=_:d.sibling=_,d=_,m=v}if(g.done)return r(a,m),ai&&Ja(a,y),u;if(null===m){for(;!g.done;y++,g=c.next())null!==(g=p(a,g.value,l))&&(s=o(g,s,y),null===d?u=g:d.sibling=g,d=g);return ai&&Ja(a,y),u}for(m=n(a,m);!g.done;y++,g=c.next())null!==(g=h(m,a,y,g.value,l))&&(e&&null!==g.alternate&&m.delete(null===g.key?y:g.key),s=o(g,s,y),null===d?u=g:d.sibling=g,d=g);return e&&m.forEach((function(e){return t(a,e)})),ai&&Ja(a,y),u}return function e(n,i,o,c){if("object"==typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,u=i;null!==u;){if(u.key===l){if((l=o.type)===E){if(7===u.tag){r(n,u.sibling),(i=a(u,o.props.children)).return=n,n=i;break e}}else if(u.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===I&&$i(l)===u.type){r(n,u.sibling),(i=a(u,o.props)).ref=Gi(n,u,o),i.return=n,n=i;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===E?((i=Al(o.props.children,n.mode,c,o.key)).return=n,n=i):((c=Ml(o.type,o.key,o.props,null,n.mode,c)).ref=Gi(n,i,o),c.return=n,n=c)}return s(n);case S:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){r(n,i.sibling),(i=a(i,o.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Fl(o,n.mode,c)).return=n,n=i}return s(n);case I:return e(n,i,(u=o._init)(o._payload),c)}if(te(o))return m(n,i,o,c);if(A(o))return y(n,i,o,c);qi(n,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==i&&6===i.tag?(r(n,i.sibling),(i=a(i,o)).return=n,n=i):(r(n,i),(i=Nl(o,n.mode,c)).return=n,n=i),s(n)):r(n,i)}}var Qi=Ki(!0),Xi=Ki(!1),Ji={},Yi=Pa(Ji),eo=Pa(Ji),to=Pa(Ji);function ro(e){if(e===Ji)throw Error(i(174));return e}function no(e,t){switch(Ta(to,t),Ta(eo,e),Ta(Yi,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Yi),Ta(Yi,t)}function ao(){ka(Yi),ka(eo),ka(to)}function io(e){ro(to.current);var t=ro(Yi.current),r=ce(t,e.type);t!==r&&(Ta(eo,e),Ta(Yi,r))}function oo(e){eo.current===e&&(ka(Yi),ka(eo))}var so=Pa(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var po=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,ho=0,mo=null,yo=null,vo=null,go=!1,_o=!1,bo=0,wo=0;function So(){throw Error(i(321))}function Eo(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function Po(e,t,r,n,a,o){if(ho=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,po.current=null===e||null===e.memoizedState?ss:cs,e=r(n,a),_o){o=0;do{if(_o=!1,bo=0,25<=o)throw Error(i(301));o+=1,vo=yo=null,t.updateQueue=null,po.current=ls,e=r(n,a)}while(_o)}if(po.current=os,t=null!==yo&&null!==yo.next,ho=0,vo=yo=mo=null,go=!1,t)throw Error(i(300));return e}function ko(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Ro(){if(null===yo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,yo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"==typeof t?t(e):t}function Oo(e){var t=Ro(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=yo,a=n.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}n.baseQueue=a=o,r.pending=null}if(null!==a){o=a.next,n=n.baseState;var c=s=null,l=null,u=o;do{var d=u.lane;if((ho&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=p,s=n):l=l.next=p,mo.lanes|=d,jc|=d}u=u.next}while(null!==u&&u!==o);null===l?s=n:l.next=c,sn(n,t.memoizedState)||(bs=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,jc|=o,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xo(e){var t=Ro(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sn(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Do(){}function Io(e,t){var r=mo,n=Ro(),a=t(),o=!sn(n.memoizedState,a);if(o&&(n.memoizedState=a,bs=!0),n=n.queue,Wo(Ao.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(r.flags|=2048,Bo(9,Mo.bind(null,r,n,a,t),void 0,null),null===Oc)throw Error(i(349));0!=(30&ho)||Lo(r,t,a)}return a}function Lo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Mo(e,t,r,n){t.value=r,t.getSnapshot=n,jo(t)&&No(e)}function Ao(e,t,r){return r((function(){jo(t)&&No(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(e){return!0}}function No(e){var t=Oi(e,1);null!==t&&rl(t,e,1,-1)}function Fo(e){var t=To();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,mo,e),[t.memoizedState,e]}function Bo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Uo(){return Ro().memoizedState}function zo(e,t,r,n){var a=To();mo.flags|=e,a.memoizedState=Bo(1|t,r,void 0,void 0===n?null:n)}function Vo(e,t,r,n){var a=Ro();n=void 0===n?null:n;var i=void 0;if(null!==yo){var o=yo.memoizedState;if(i=o.destroy,null!==n&&Eo(n,o.deps))return void(a.memoizedState=Bo(t,r,i,n))}mo.flags|=e,a.memoizedState=Bo(1|t,r,i,n)}function Ho(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Vo(2048,8,e,t)}function Zo(e,t){return Vo(4,2,e,t)}function Go(e,t){return Vo(4,4,e,t)}function qo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $o(e,t,r){return r=null!=r?r.concat([e]):null,Vo(4,4,qo.bind(null,t,e),r)}function Ko(){}function Qo(e,t){var r=Ro();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Eo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Xo(e,t){var r=Ro();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Eo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Jo(e,t,r){return 0==(21&ho)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=r):(sn(r,t)||(r=mt(),mo.lanes|=r,jc|=r,e.baseState=!0),t)}function Yo(e,t){var r=_t;_t=0!==r&&4>r?r:4,e(!0);var n=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=r,fo.transition=n}}function es(){return Ro().memoizedState}function ts(e,t,r){var n=tl(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e)?as(t,r):null!==(r=Ci(e,t,r,n))&&(rl(r,e,n,el()),is(r,t,n))}function rs(e,t,r){var n=tl(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,sn(s,o)){var c=t.interleaved;return null===c?(a.next=a,Ri(t)):(a.next=c.next,c.next=a),void(t.interleaved=a)}}catch(e){}null!==(r=Ci(e,t,a,n))&&(rl(r,e,n,a=el()),is(r,t,n))}}function ns(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){_o=go=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function is(e,t,r){if(0!=(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}var os={readContext:ki,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},ss={readContext:ki,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:Ho,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,zo(4194308,4,qo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var r=To();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=To();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,mo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Fo,useDebugValue:Ko,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Yo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mo,a=To();if(ai){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Oc)throw Error(i(349));0!=(30&ho)||Lo(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Ho(Ao.bind(null,n,o,e),[e]),n.flags|=2048,Bo(9,Mo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=To(),t=Oc.identifierPrefix;if(ai){var r=Xa;t=":"+t+"R"+(r=(Qa&~(1<<32-ot(Qa)-1)).toString(32)+r),0<(r=bo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:ki,useCallback:Qo,useContext:ki,useEffect:Wo,useImperativeHandle:$o,useInsertionEffect:Zo,useLayoutEffect:Go,useMemo:Xo,useReducer:Oo,useRef:Uo,useState:function(){return Oo(Co)},useDebugValue:Ko,useDeferredValue:function(e){return Jo(Ro(),yo.memoizedState,e)},useTransition:function(){return[Oo(Co)[0],Ro().memoizedState]},useMutableSource:Do,useSyncExternalStore:Io,useId:es,unstable_isNewReconciler:!1},ls={readContext:ki,useCallback:Qo,useContext:ki,useEffect:Wo,useImperativeHandle:$o,useInsertionEffect:Zo,useLayoutEffect:Go,useMemo:Xo,useReducer:xo,useRef:Uo,useState:function(){return xo(Co)},useDebugValue:Ko,useDeferredValue:function(e){var t=Ro();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[xo(Co)[0],Ro().memoizedState]},useMutableSource:Do,useSyncExternalStore:Io,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var a=r}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var fs="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,r){(r=Li(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wc||(Wc=!0,Zc=n),ps(0,t)},r}function ms(e,t,r){(r=Li(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){ps(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){ps(0,t),"function"!=typeof n&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ys(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new fs;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=kl.bind(null,e,t,r),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,r,n,a){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Li(-1,1)).tag=2,Mi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var _s=b.ReactCurrentOwner,bs=!1;function ws(e,t,r,n){t.child=null===e?Xi(t,null,r,n):Qi(t,e.child,r,n)}function Ss(e,t,r,n,a){r=r.render;var i=t.ref;return Pi(t,a),n=Po(e,t,r,n,i,a),r=ko(),null===e||bs?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Es(e,t,r,n,a){if(null===e){var i=r.type;return"function"!=typeof i||Il(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ml(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ps(e,t,i,n,a))}if(i=e.child,0==(e.lanes&a)){var o=i.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(o,n)&&e.ref===t.ref)return Ws(e,t,a)}return t.flags|=1,(e=Ll(i,n)).ref=t.ref,e.return=t,t.child=e}function Ps(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(cn(i,n)&&e.ref===t.ref){if(bs=!1,t.pendingProps=n=i,0==(e.lanes&a))return t.lanes=e.lanes,Ws(e,t,a);0!=(131072&e.flags)&&(bs=!0)}}return Rs(e,t,r,n,a)}function ks(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ta(Lc,Ic),Ic|=r;else{if(0==(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ta(Lc,Ic),Ic|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,Ta(Lc,Ic),Ic|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ta(Lc,Ic),Ic|=n;return ws(e,t,a,r),t.child}function Ts(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Rs(e,t,r,n,a){var i=Ia(r)?xa:Ca.current;return i=Da(t,i),Pi(t,a),r=Po(e,t,r,n,i,a),n=ko(),null===e||bs?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Cs(e,t,r,n,a){if(Ia(r)){var i=!0;ja(t)}else i=!1;if(Pi(t,a),null===t.stateNode)Hs(e,t),Hi(t,r,n),Zi(t,r,n,a),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,l=r.contextType;l="object"==typeof l&&null!==l?ki(l):Da(t,l=Ia(r)?xa:Ca.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==n||c!==l)&&Wi(t,o,n,l),xi=!1;var p=t.memoizedState;o.state=p,Ni(t,n,o,a),c=t.memoizedState,s!==n||p!==c||Oa.current||xi?("function"==typeof u&&(Ui(t,r,u,n),c=t.memoizedState),(s=xi||Vi(t,r,s,n,p,c,l))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=l,n=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ii(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:yi(t.type,s),o.props=l,d=t.pendingProps,p=o.context,c="object"==typeof(c=r.contextType)&&null!==c?ki(c):Da(t,c=Ia(r)?xa:Ca.current);var f=r.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||p!==c)&&Wi(t,o,n,c),xi=!1,p=t.memoizedState,o.state=p,Ni(t,n,o,a);var h=t.memoizedState;s!==d||p!==h||Oa.current||xi?("function"==typeof f&&(Ui(t,r,f,n),h=t.memoizedState),(l=xi||Vi(t,r,l,n,p,h,c)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,h,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,h,c)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=c,n=l):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Os(e,t,r,n,i,a)}function Os(e,t,r,n,a,i){Ts(e,t);var o=0!=(128&t.flags);if(!n&&!o)return a&&Na(t,r,!1),Ws(e,t,i);n=t.stateNode,_s.current=t;var s=o&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Qi(t,e.child,null,i),t.child=Qi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=n.state,a&&Na(t,r,!0),t.child}function xs(e){var t=e.stateNode;t.pendingContext?Ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ma(0,t.context,!1),no(e,t.containerInfo)}function Ds(e,t,r,n,a){return fi(),hi(a),t.flags|=256,ws(e,t,r,n),t.child}var Is,Ls,Ms,As={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ns(e,t,r){var n,a=t.pendingProps,o=so.current,s=!1,c=0!=(128&t.flags);if((n=c)||(n=(null===e||null!==e.memoizedState)&&0!=(2&o)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ta(so,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=a.children,e=a.fallback,s?(a=t.mode,s=t.child,c={mode:"hidden",children:c},0==(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=jl(c,a,0,null),e=Al(e,a,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(r),t.memoizedState=As,e):Fs(t,c));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,a,o,s){if(r)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,n=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=jl({mode:"visible",children:n.children},a,0,null),(o=Al(o,a,s,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!=(1&t.mode)&&Qi(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=As,o);if(0==(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var c=n.dgst;return n=c,Bs(e,t,s,n=ds(o=Error(i(419)),n,void 0))}if(c=0!=(s&e.childLanes),bs||c){if(null!==(n=Oc)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(n.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Oi(e,a),rl(n,e,a,-1))}return ml(),Bs(e,t,s,n=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Rl.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ni=la(a.nextSibling),ri=t,ai=!0,ii=null,null!==e&&(qa[$a++]=Qa,qa[$a++]=Xa,qa[$a++]=Ka,Qa=e.id,Xa=e.overflow,Ka=t),(t=Fs(t,n.children)).flags|=4096,t)}(e,t,c,a,n,o,r);if(s){s=a.fallback,c=t.mode,n=(o=e.child).sibling;var l={mode:"hidden",children:a.children};return 0==(1&c)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null):(a=Ll(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==n?s=Ll(n,s):(s=Al(s,c,r,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,c=null===(c=e.child.memoizedState)?js(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~r,t.memoizedState=As,a}return e=(s=e.child).sibling,a=Ll(s,{mode:"visible",children:a.children}),0==(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fs(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,r,n){return null!==n&&hi(n),Qi(t,e.child,null,r),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ei(e.return,t,r)}function zs(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Vs(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ws(e,t,n.children,r),0!=(2&(n=so.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,r,t);else if(19===e.tag)Us(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ta(so,n),0==(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===co(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),zs(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===co(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}zs(t,!0,r,null,i);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Ll(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ll(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Zs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function qs(e,t,r){var n=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ia(t.type)&&La(),Gs(t),null;case 3:return n=t.stateNode,ao(),ka(Oa),ka(Ca),uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ii&&(ol(ii),ii=null))),Gs(t),null;case 5:oo(t);var a=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)Ls(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=ro(Yi.current),di(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[pa]=t,n[fa]=o,e=0!=(1&t.mode),r){case"dialog":Bn("cancel",n),Bn("close",n);break;case"iframe":case"object":case"embed":Bn("load",n);break;case"video":case"audio":for(a=0;a<An.length;a++)Bn(An[a],n);break;case"source":Bn("error",n);break;case"img":case"image":case"link":Bn("error",n),Bn("load",n);break;case"details":Bn("toggle",n);break;case"input":Q(n,o),Bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Bn("invalid",n);break;case"textarea":ae(n,o),Bn("invalid",n)}for(var c in ge(r,o),a=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"==typeof l?n.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,l,e),a=["children",l]):"number"==typeof l&&n.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Bn("scroll",n)}switch(r){case"input":G(n),Y(n,o,!0);break;case"textarea":G(n),oe(n);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(n.onclick=Yn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[pa]=t,e[fa]=n,Is(e,t),t.stateNode=e;e:{switch(c=_e(r,n),r){case"dialog":Bn("cancel",e),Bn("close",e),a=n;break;case"iframe":case"object":case"embed":Bn("load",e),a=n;break;case"video":case"audio":for(a=0;a<An.length;a++)Bn(An[a],e);a=n;break;case"source":Bn("error",e),a=n;break;case"img":case"image":case"link":Bn("error",e),Bn("load",e),a=n;break;case"details":Bn("toggle",e),a=n;break;case"input":Q(e,n),a=K(e,n),Bn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=N({},n,{value:void 0}),Bn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Bn("invalid",e)}for(o in ge(r,a),l=a)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ye(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==r||""!==u)&&pe(e,u):"number"==typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Bn("scroll",e):null!=u&&_(e,o,u,c))}switch(r){case"input":G(e),Y(e,n,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Yn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ms(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(i(166));if(r=ro(to.current),ro(Yi.current),di(t)){if(n=t.stateNode,r=t.memoizedProps,n[pa]=t,(o=n.nodeValue!==r)&&null!==(e=ri))switch(e.tag){case 3:Jn(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!=(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pa]=t,t.stateNode=n}return Gs(t),null;case 13:if(ka(so),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ni&&0!=(1&t.mode)&&0==(128&t.flags))pi(),fi(),t.flags|=98560,o=!1;else if(o=di(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[pa]=t}else fi(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==ii&&(ol(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=r,t):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&so.current)?0===Mc&&(Mc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return ao(),null===e&&Vn(t.stateNode.containerInfo),Gs(t),null;case 10:return Si(t.type._context),Gs(t),null;case 19:if(ka(so),null===(o=t.memoizedState))return Gs(t),null;if(n=0!=(128&t.flags),null===(c=o.rendering))if(n)Zs(o,!1);else{if(0!==Mc||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Zs(o,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ta(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Vc&&(t.flags|=128,n=!0,Zs(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=co(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Zs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!ai)return Gs(t),null}else 2*Xe()-o.renderingStartTime>Vc&&1073741824!==r&&(t.flags|=128,n=!0,Zs(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=o.last)?r.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=so.current,Ta(so,n?1&r|2:1&r),t):(Gs(t),null);case 22:case 23:return dl(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&Ic)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function $s(e,t){switch(ti(t),t.tag){case 1:return Ia(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),ka(Oa),ka(Ca),uo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(ka(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(so),null;case 4:return ao(),null;case 10:return Si(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Is=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ls=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ro(Yi.current);var i,o=null;switch(r){case"input":a=K(e,a),n=K(e,n),o=[];break;case"select":a=N({},a,{value:void 0}),n=N({},n,{value:void 0}),o=[];break;case"textarea":a=ne(e,a),n=ne(e,n),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(e.onclick=Yn)}for(u in ge(r,n),r=null,a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var c=a[u];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(c=null!=a?a[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(o||(o=[]),o.push(u,r)),r=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Bn("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ks=!1,Qs=!1,Xs="function"==typeof WeakSet?WeakSet:Set,Js=null;function Ys(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){Pl(e,t,r)}else r.current=null}function ec(e,t,r){try{r()}catch(r){Pl(e,t,r)}}var tc=!1;function rc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&ec(t,r,i)}a=a.next}while(a!==n)}}function nc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ac(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[pa],delete t[fa],delete t[ma],delete t[ya],delete t[va]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Yn));else if(4!==n&&null!==(e=e.child))for(cc(e,t,r),e=e.sibling;null!==e;)cc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var uc=null,dc=!1;function pc(e,t,r){for(r=r.child;null!==r;)fc(e,t,r),r=r.sibling}function fc(e,t,r){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,r)}catch(e){}switch(r.tag){case 5:Qs||Ys(r,t);case 6:var n=uc,a=dc;uc=null,pc(e,t,r),dc=a,null!==(uc=n)&&(dc?(e=uc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):uc.removeChild(r.stateNode));break;case 18:null!==uc&&(dc?(e=uc,r=r.stateNode,8===e.nodeType?ca(e.parentNode,r):1===e.nodeType&&ca(e,r),Vt(e)):ca(uc,r.stateNode));break;case 4:n=uc,a=dc,uc=r.stateNode.containerInfo,dc=!0,pc(e,t,r),uc=n,dc=a;break;case 0:case 11:case 14:case 15:if(!Qs&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!=(2&i)||0!=(4&i))&&ec(r,t,o),a=a.next}while(a!==n)}pc(e,t,r);break;case 1:if(!Qs&&(Ys(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){Pl(r,t,e)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:1&r.mode?(Qs=(n=Qs)||null!==r.memoizedState,pc(e,t,r),Qs=n):pc(e,t,r);break;default:pc(e,t,r)}}function hc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Xs),t.forEach((function(t){var n=Cl.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function mc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));fc(o,s,a),uc=null,dc=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(e){Pl(a,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&n){try{rc(3,e,e.return),nc(3,e)}catch(t){Pl(e,e.return,t)}try{rc(5,e,e.return)}catch(t){Pl(e,e.return,t)}}break;case 1:mc(t,e),vc(e),512&n&&null!==r&&Ys(r,r.return);break;case 5:if(mc(t,e),vc(e),512&n&&null!==r&&Ys(r,r.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(t){Pl(e,e.return,t)}}if(4&n&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&X(a,o),_e(c,s);var u=_e(c,o);for(s=0;s<l.length;s+=2){var d=l[s],p=l[s+1];"style"===d?ye(a,p):"dangerouslySetInnerHTML"===d?de(a,p):"children"===d?pe(a,p):_(a,d,p,u)}switch(c){case"input":J(a,o);break;case"textarea":ie(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?re(a,!!o.multiple,h,!1):f!==!!o.multiple&&(null!=o.defaultValue?re(a,!!o.multiple,o.defaultValue,!0):re(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(t){Pl(e,e.return,t)}}break;case 6:if(mc(t,e),vc(e),4&n){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(t){Pl(e,e.return,t)}}break;case 3:if(mc(t,e),vc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){Pl(e,e.return,t)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(zc=Xe())),4&n&&hc(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qs=(u=Qs)||d,mc(t,e),Qs=u):mc(t,e),vc(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for(Js=e,d=e.child;null!==d;){for(p=Js=d;null!==Js;){switch(h=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:Ys(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Pl(n,r,e)}}break;case 5:Ys(f,f.return);break;case 22:if(null!==f.memoizedState){wc(p);continue}}null!==h?(h.return=f,Js=h):wc(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{a=p.stateNode,u?"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=p.stateNode,s=null!=(l=p.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",s))}catch(t){Pl(e,e.return,t)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(t){Pl(e,e.return,t)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mc(t,e),vc(e),4&n&&hc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(oc(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(pe(a,""),n.flags&=-33),lc(e,sc(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;cc(e,sc(e),o);break;default:throw Error(i(161))}}catch(t){Pl(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,r){Js=e,_c(e,t,r)}function _c(e,t,r){for(var n=0!=(1&e.mode);null!==Js;){var a=Js,i=a.child;if(22===a.tag&&n){var o=null!==a.memoizedState||Ks;if(!o){var s=a.alternate,c=null!==s&&null!==s.memoizedState||Qs;s=Ks;var l=Qs;if(Ks=o,(Qs=c)&&!l)for(Js=a;null!==Js;)c=(o=Js).child,22===o.tag&&null!==o.memoizedState?Sc(a):null!==c?(c.return=o,Js=c):Sc(a);for(;null!==i;)Js=i,_c(i,t,r),i=i.sibling;Js=a,Ks=s,Qs=l}bc(e)}else 0!=(8772&a.subtreeFlags)&&null!==i?(i.return=a,Js=i):bc(e)}}function bc(e){for(;null!==Js;){var t=Js;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||nc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qs)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:yi(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fi(t,o,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Fi(t,s,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Vt(p)}}}break;default:throw Error(i(163))}Qs||512&t.flags&&ac(t)}catch(e){Pl(t,t.return,e)}}if(t===e){Js=null;break}if(null!==(r=t.sibling)){r.return=t.return,Js=r;break}Js=t.return}}function wc(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Js=r;break}Js=t.return}}function Sc(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nc(4,t)}catch(e){Pl(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(e){Pl(t,a,e)}}var i=t.return;try{ac(t)}catch(e){Pl(t,i,e)}break;case 5:var o=t.return;try{ac(t)}catch(e){Pl(t,o,e)}}}catch(e){Pl(t,t.return,e)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Ec,Pc=Math.ceil,kc=b.ReactCurrentDispatcher,Tc=b.ReactCurrentOwner,Rc=b.ReactCurrentBatchConfig,Cc=0,Oc=null,xc=null,Dc=0,Ic=0,Lc=Pa(0),Mc=0,Ac=null,jc=0,Nc=0,Fc=0,Bc=null,Uc=null,zc=0,Vc=1/0,Hc=null,Wc=!1,Zc=null,Gc=null,qc=!1,$c=null,Kc=0,Qc=0,Xc=null,Jc=-1,Yc=0;function el(){return 0!=(6&Cc)?Xe():-1!==Jc?Jc:Jc=Xe()}function tl(e){return 0==(1&e.mode)?1:0!=(2&Cc)&&0!==Dc?Dc&-Dc:null!==mi.transition?(0===Yc&&(Yc=mt()),Yc):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rl(e,t,r,n){if(50<Qc)throw Qc=0,Xc=null,Error(i(185));vt(e,r,n),0!=(2&Cc)&&e===Oc||(e===Oc&&(0==(2&Cc)&&(Nc|=r),4===Mc&&sl(e,Dc)),nl(e,n),1===r&&0===Cc&&0==(1&t.mode)&&(Vc=Xe()+500,Ba&&Va()))}function nl(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,c=a[o];-1===c?0!=(s&r)&&0==(s&n)||(a[o]=ft(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var n=pt(e,e===Oc?Dc:0);if(0===n)null!==r&&$e(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&$e(r),1===t)0===e.tag?function(e){Ba=!0,za(e)}(cl.bind(null,e)):za(cl.bind(null,e)),oa((function(){0==(6&Cc)&&Va()})),r=null;else{switch(bt(n)){case 1:r=Ye;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ol(r,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function al(e,t){if(Jc=-1,Yc=0,0!=(6&Cc))throw Error(i(327));var r=e.callbackNode;if(Sl()&&e.callbackNode!==r)return null;var n=pt(e,e===Oc?Dc:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=yl(e,n);else{t=n;var a=Cc;Cc|=2;var o=hl();for(Oc===e&&Dc===t||(Hc=null,Vc=Xe()+500,pl(e,t));;)try{gl();break}catch(t){fl(e,t)}wi(),kc.current=o,Cc=a,null!==xc?t=0:(Oc=null,Dc=0,t=Mc)}if(0!==t){if(2===t&&0!==(a=ht(e))&&(n=a,t=il(e,a)),1===t)throw r=Ac,pl(e,0),sl(e,n),nl(e,Xe()),r;if(6===t)sl(e,n);else{if(a=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!sn(i(),a))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=yl(e,n))&&0!==(o=ht(e))&&(n=o,t=il(e,o)),1===t))throw r=Ac,pl(e,0),sl(e,n),nl(e,Xe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:wl(e,Uc,Hc);break;case 3:if(sl(e,n),(130023424&n)===n&&10<(t=zc+500-Xe())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){el(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(wl.bind(null,e,Uc,Hc),t);break}wl(e,Uc,Hc);break;case 4:if(sl(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-ot(n);o=1<<s,(s=t[s])>a&&(a=s),n&=~o}if(n=a,10<(n=(120>(n=Xe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pc(n/1960))-n)){e.timeoutHandle=na(wl.bind(null,e,Uc,Hc),n);break}wl(e,Uc,Hc);break;default:throw Error(i(329))}}}return nl(e,Xe()),e.callbackNode===r?al.bind(null,e):null}function il(e,t){var r=Bc;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Uc,Uc=r,null!==t&&ol(t)),e}function ol(e){null===Uc?Uc=e:Uc.push.apply(Uc,e)}function sl(e,t){for(t&=~Fc,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function cl(e){if(0!=(6&Cc))throw Error(i(327));Sl();var t=pt(e,0);if(0==(1&t))return nl(e,Xe()),null;var r=yl(e,t);if(0!==e.tag&&2===r){var n=ht(e);0!==n&&(t=n,r=il(e,n))}if(1===r)throw r=Ac,pl(e,0),sl(e,t),nl(e,Xe()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Uc,Hc),nl(e,Xe()),null}function ll(e,t){var r=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=r)&&(Vc=Xe()+500,Ba&&Va())}}function ul(e){null!==$c&&0===$c.tag&&0==(6&Cc)&&Sl();var t=Cc;Cc|=1;var r=Rc.transition,n=_t;try{if(Rc.transition=null,_t=1,e)return e()}finally{_t=n,Rc.transition=r,0==(6&(Cc=t))&&Va()}}function dl(){Ic=Lc.current,ka(Lc)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==xc)for(r=xc.return;null!==r;){var n=r;switch(ti(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&La();break;case 3:ao(),ka(Oa),ka(Ca),uo();break;case 5:oo(n);break;case 4:ao();break;case 13:case 19:ka(so);break;case 10:Si(n.type._context);break;case 22:case 23:dl()}r=r.return}if(Oc=e,xc=e=Ll(e.current,null),Dc=Ic=t,Mc=0,Ac=null,Fc=Nc=jc=0,Uc=Bc=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(n=(r=Ti[t]).interleaved)){r.interleaved=null;var a=n.next,i=r.pending;if(null!==i){var o=i.next;i.next=a,n.next=o}r.pending=n}Ti=null}return e}function fl(e,t){for(;;){var r=xc;try{if(wi(),po.current=os,go){for(var n=mo.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}go=!1}if(ho=0,vo=yo=mo=null,_o=!1,bo=0,Tc.current=null,null===r||null===r.return){Mc=1,Ac=t,xc=null;break}e:{var o=e,s=r.return,c=r,l=t;if(t=Dc,c.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,d=c,p=d.tag;if(0==(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=vs(s);if(null!==h){h.flags&=-257,gs(h,s,c,0,t),1&h.mode&&ys(o,u,t),l=u;var m=(t=h).updateQueue;if(null===m){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}if(0==(1&t)){ys(o,u,t),ml();break e}l=Error(i(426))}else if(ai&&1&c.mode){var v=vs(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),gs(v,s,c,0,t),hi(us(l,c));break e}}o=l=us(l,c),4!==Mc&&(Mc=2),null===Bc?Bc=[o]:Bc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ji(o,hs(0,l,t));break e;case 1:c=l;var g=o.type,_=o.stateNode;if(0==(128&o.flags)&&("function"==typeof g.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Gc||!Gc.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,ji(o,ms(o,c,t));break e}}o=o.return}while(null!==o)}bl(r)}catch(e){t=e,xc===r&&null!==r&&(xc=r=r.return);continue}break}}function hl(){var e=kc.current;return kc.current=os,null===e?os:e}function ml(){0!==Mc&&3!==Mc&&2!==Mc||(Mc=4),null===Oc||0==(268435455&jc)&&0==(268435455&Nc)||sl(Oc,Dc)}function yl(e,t){var r=Cc;Cc|=2;var n=hl();for(Oc===e&&Dc===t||(Hc=null,pl(e,t));;)try{vl();break}catch(t){fl(e,t)}if(wi(),Cc=r,kc.current=n,null!==xc)throw Error(i(261));return Oc=null,Dc=0,Mc}function vl(){for(;null!==xc;)_l(xc)}function gl(){for(;null!==xc&&!Ke();)_l(xc)}function _l(e){var t=Ec(e.alternate,e,Ic);e.memoizedProps=e.pendingProps,null===t?bl(e):xc=t,Tc.current=null}function bl(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=qs(r,t,Ic)))return void(xc=r)}else{if(null!==(r=$s(r,t)))return r.flags&=32767,void(xc=r);if(null===e)return Mc=6,void(xc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===Mc&&(Mc=5)}function wl(e,t,r){var n=_t,a=Rc.transition;try{Rc.transition=null,_t=1,function(e,t,r,n){do{Sl()}while(null!==$c);if(0!=(6&Cc))throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ot(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}(e,o),e===Oc&&(xc=Oc=null,Dc=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||qc||(qc=!0,Ol(tt,(function(){return Sl(),null}))),o=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||o){o=Rc.transition,Rc.transition=null;var s=_t;_t=1;var c=Cc;Cc|=4,Tc.current=null,function(e,t){if(ea=Wt,fn(e=pn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(e){r=null;break e}var s=0,c=-1,l=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==r||0!==a&&3!==p.nodeType||(c=s+a),p!==o||0!==n&&3!==p.nodeType||(l=s+n),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===r&&++u===a&&(c=s),f===o&&++d===n&&(l=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}r=-1===c||-1===l?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var y=m.memoizedProps,v=m.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:yi(t.type,y),v);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(e){Pl(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tc,tc=!1}(e,r),yc(r,e),hn(ta),Wt=!!ea,ta=ea=null,e.current=r,gc(r,e,a),Qe(),Cc=c,_t=s,Rc.transition=o}else e.current=r;if(qc&&(qc=!1,$c=e,Kc=a),0===(o=e.pendingLanes)&&(Gc=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode),nl(e,Xe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((a=t[r]).value,{componentStack:a.stack,digest:a.digest});if(Wc)throw Wc=!1,e=Zc,Zc=null,e;0!=(1&Kc)&&0!==e.tag&&Sl(),0!=(1&(o=e.pendingLanes))?e===Xc?Qc++:(Qc=0,Xc=e):Qc=0,Va()}(e,t,r,n)}finally{Rc.transition=a,_t=n}return null}function Sl(){if(null!==$c){var e=bt(Kc),t=Rc.transition,r=_t;try{if(Rc.transition=null,_t=16>e?16:e,null===$c)var n=!1;else{if(e=$c,$c=null,Kc=0,0!=(6&Cc))throw Error(i(331));var a=Cc;for(Cc|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!=(16&Js.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:rc(8,d,o)}var p=d.child;if(null!==p)p.return=d,Js=p;else for(;null!==Js;){var f=(d=Js).sibling,h=d.return;if(ic(d),d===u){Js=null;break}if(null!==f){f.return=h,Js=f;break}Js=h}}}var m=o.alternate;if(null!==m){var y=m.child;if(null!==y){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(null!==y)}}Js=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!=(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Js=g;break e}Js=o.return}}var _=e.current;for(Js=_;null!==Js;){var b=(s=Js).child;if(0!=(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=_;null!==Js;){if(0!=(2048&(c=Js).flags))try{switch(c.tag){case 0:case 11:case 15:nc(9,c)}}catch(e){Pl(c,c.return,e)}if(c===s){Js=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,Js=w;break e}Js=c.return}}if(Cc=a,Va(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(e){}n=!0}return n}finally{_t=r,Rc.transition=t}}return!1}function El(e,t,r){e=Mi(e,t=hs(0,t=us(r,t),1),1),t=el(),null!==e&&(vt(e,1,t),nl(e,t))}function Pl(e,t,r){if(3===e.tag)El(e,e,r);else for(;null!==t;){if(3===t.tag){El(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Gc||!Gc.has(n))){t=Mi(t,e=ms(t,e=us(r,e),1),1),e=el(),null!==t&&(vt(t,1,e),nl(t,e));break}}t=t.return}}function kl(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&r,Oc===e&&(Dc&r)===r&&(4===Mc||3===Mc&&(130023424&Dc)===Dc&&500>Xe()-zc?pl(e,0):Fc|=r),nl(e,t)}function Tl(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var r=el();null!==(e=Oi(e,t))&&(vt(e,t,r),nl(e,r))}function Rl(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Tl(e,r)}function Cl(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Tl(e,r)}function Ol(e,t){return qe(e,t)}function xl(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dl(e,t,r,n){return new xl(e,t,r,n)}function Il(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var r=e.alternate;return null===r?((r=Dl(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ml(e,t,r,n,a,o){var s=2;if(n=e,"function"==typeof e)Il(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case E:return Al(r.children,a,o,t);case P:s=8,a|=8;break;case k:return(e=Dl(12,r,t,2|a)).elementType=k,e.lanes=o,e;case O:return(e=Dl(13,r,t,a)).elementType=O,e.lanes=o,e;case x:return(e=Dl(19,r,t,a)).elementType=x,e.lanes=o,e;case L:return jl(r,a,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case R:s=9;break e;case C:s=11;break e;case D:s=14;break e;case I:s=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Dl(s,r,t,a)).elementType=e,t.type=n,t.lanes=o,t}function Al(e,t,r,n){return(e=Dl(7,e,n,t)).lanes=r,e}function jl(e,t,r,n){return(e=Dl(22,e,n,t)).elementType=L,e.lanes=r,e.stateNode={isHidden:!1},e}function Nl(e,t,r){return(e=Dl(6,e,null,t)).lanes=r,e}function Fl(e,t,r){return(t=Dl(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ul(e,t,r,n,a,i,o,s,c){return e=new Bl(e,t,r,s,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Dl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function zl(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Vl(e){if(!e)return Ra;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Ia(r))return Aa(e,r,t)}return t}function Hl(e,t,r,n,a,i,o,s,c){return(e=Ul(r,n,!0,e,0,i,0,s,c)).context=Vl(null),r=e.current,(i=Li(n=el(),a=tl(r))).callback=null!=t?t:null,Mi(r,i,a),e.current.lanes=a,vt(e,a,n),nl(e,n),e}function Wl(e,t,r,n){var a=t.current,i=el(),o=tl(a);return r=Vl(r),null===t.context?t.context=r:t.pendingContext=r,(t=Li(i,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Mi(a,t,o))&&(rl(e,a,o,i),Ai(e,a,o)),o}function Zl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function ql(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ec=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oa.current)bs=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return bs=!1,function(e,t,r){switch(t.tag){case 3:xs(t),fi();break;case 5:io(t);break;case 1:Ia(t.type)&&ja(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ta(vi,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ta(so,1&so.current),t.flags|=128,null):0!=(r&t.child.childLanes)?Ns(e,t,r):(Ta(so,1&so.current),null!==(e=Ws(e,t,r))?e.sibling:null);Ta(so,1&so.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return Vs(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ta(so,so.current),n)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,r)}return Ws(e,t,r)}(e,t,r);bs=0!=(131072&e.flags)}else bs=!1,ai&&0!=(1048576&t.flags)&&Ya(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Hs(e,t),e=t.pendingProps;var a=Da(t,Ca.current);Pi(t,r),a=Po(null,t,n,e,a,r);var o=ko();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(n)?(o=!0,ja(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Di(t),a.updater=zi,t.stateNode=a,a._reactInternals=t,Zi(t,n,e,r),t=Os(null,t,n,!0,o,r)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"==typeof e)return Il(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(n),e=yi(n,e),a){case 0:t=Rs(null,t,n,e,r);break e;case 1:t=Cs(null,t,n,e,r);break e;case 11:t=Ss(null,t,n,e,r);break e;case 14:t=Es(null,t,n,yi(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Rs(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 1:return n=t.type,a=t.pendingProps,Cs(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 3:e:{if(xs(t),null===e)throw Error(i(387));n=t.pendingProps,a=(o=t.memoizedState).element,Ii(e,t),Ni(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,n,r,a=us(Error(i(423)),t));break e}if(n!==a){t=Ds(e,t,n,r,a=us(Error(i(424)),t));break e}for(ni=la(t.stateNode.containerInfo.firstChild),ri=t,ai=!0,ii=null,r=Xi(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),n===a){t=Ws(e,t,r);break e}ws(e,t,n,r)}t=t.child}return t;case 5:return io(t),null===e&&li(t),n=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,ra(n,a)?s=null:null!==o&&ra(n,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,r),t.child;case 6:return null===e&&li(t),null;case 13:return Ns(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qi(t,null,n,r):ws(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,Ss(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 7:return ws(e,t,t.pendingProps,r),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ta(vi,n._currentValue),n._currentValue=s,null!==o)if(sn(o.value,s)){if(o.children===a.children&&!Oa.current){t=Ws(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var l=c.firstContext;null!==l;){if(l.context===n){if(1===o.tag){(l=Li(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ei(o.return,r,t),c.lanes|=r;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),Ei(s,r,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Pi(t,r),n=n(a=ki(a)),t.flags|=1,ws(e,t,n,r),t.child;case 14:return a=yi(n=t.type,t.pendingProps),Es(e,t,n,a=yi(n.type,a),r);case 15:return Ps(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yi(n,a),Hs(e,t),t.tag=1,Ia(n)?(e=!0,ja(t)):e=!1,Pi(t,r),Hi(t,n,a),Zi(t,n,a,r),Os(null,t,n,!0,e,r);case 19:return Vs(e,t,r);case 22:return ks(e,t,r)}throw Error(i(156,t.tag))};var $l="function"==typeof reportError?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yl(){}function eu(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if("function"==typeof a){var s=a;a=function(){var e=Zl(o);s.call(e)}}Wl(t,o,e,a)}else o=function(e,t,r,n,a){if(a){if("function"==typeof n){var i=n;n=function(){var e=Zl(o);i.call(e)}}var o=Hl(t,n,e,0,null,!1,0,"",Yl);return e._reactRootContainer=o,e[ha]=o.current,Vn(8===e.nodeType?e.parentNode:e),ul(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof n){var s=n;n=function(){var e=Zl(c);s.call(e)}}var c=Ul(e,0,!1,null,0,!1,0,"",Yl);return e._reactRootContainer=c,e[ha]=c.current,Vn(8===e.nodeType?e.parentNode:e),ul((function(){Wl(t,c,r,n)})),c}(r,t,e,a,n);return Zl(o)}Ql.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wl(e,t,null,null)},Ql.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){Wl(null,e,null,null)})),t[ha]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&0!==t&&t<Lt[r].priority;r++);Lt.splice(r,0,e),0===r&&Nt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(gt(t,1|r),nl(t,Xe()),0==(6&Cc)&&(Vc=Xe()+500,Va()))}break;case 13:ul((function(){var t=Oi(e,1);if(null!==t){var r=el();rl(t,e,1,r)}})),ql(e,1)}},St=function(e){if(13===e.tag){var t=Oi(e,134217728);null!==t&&rl(t,e,134217728,el()),ql(e,134217728)}},Et=function(e){if(13===e.tag){var t=tl(e),r=Oi(e,t);null!==r&&rl(r,e,t,el()),ql(e,t)}},Pt=function(){return _t},kt=function(e,t){var r=_t;try{return _t=e,t()}finally{_t=r}},Se=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=wa(n);if(!a)throw Error(i(90));q(n),J(n,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=ll,Oe=ul;var tu={usingClientEntryPoint:!1,Events:[_a,ba,wa,Te,Re,ll]},ru={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{at=au.inject(nu),it=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(i(200));return zl(e,t,null,r)},t.createRoot=function(e,t){if(!Xl(e))throw Error(i(299));var r=!1,n="",a=$l;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Ul(e,1,!1,null,0,r,0,n,a),e[ha]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Kl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,r){if(!Jl(t))throw Error(i(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xl(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,a=!1,o="",s=$l;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Hl(t,null,e,1,null!=r?r:null,a,0,o,s),e[ha]=t.current,Vn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Ql(t)},t.render=function(e,t,r){if(!Jl(t))throw Error(i(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(i(40));return!!e._reactRootContainer&&(ul((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jl(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},745:function(e,t,r){"use strict";var n=r(935);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},935:function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(448)},590:function(e){var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,a="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,c,l,u;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(c=s;0!=c--;)if(!i(e[c],o[c]))return!1;return!0}if(r&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!o.has(c.value[0]))return!1;for(u=e.entries();!(c=u.next()).done;)if(!i(c.value[1],o.get(c.value[0])))return!1;return!0}if(n&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(c=s;0!=c--;)if(e[c]!==o[c])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof o.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof o.toString)return e.toString()===o.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(c=s;0!=c--;)if(!Object.prototype.hasOwnProperty.call(o,l[c]))return!1;if(t&&e instanceof Element)return!1;for(c=s;0!=c--;)if(("_owner"!==l[c]&&"__v"!==l[c]&&"__o"!==l[c]||!e.$$typeof)&&!i(e[l[c]],o[l[c]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return i(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},722:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),o=(a=r(590))&&a.__esModule?a:{default:a},s=r(741),c=r(45);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,r,n,a,s=(n=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(a){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function l(){var e;d(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(m(e=s.call.apply(s,[this].concat(r))),"mounted",!1),v(m(e),"isReady",!1),v(m(e),"isPlaying",!1),v(m(e),"isLoading",!0),v(m(e),"loadOnReady",null),v(m(e),"startOnPlay",!0),v(m(e),"seekOnPlay",null),v(m(e),"onDurationCalled",!1),v(m(e),"handlePlayerMount",(function(t){e.player||(e.player=t,e.player.load(e.props.url)),e.progress()})),v(m(e),"getInternalPlayer",(function(t){return e.player?e.player[t]:null})),v(m(e),"progress",(function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,r=e.getSecondsLoaded(),n=e.getDuration();if(n){var a={playedSeconds:t,played:t/n};null!==r&&(a.loadedSeconds=r,a.loaded=r/n),a.playedSeconds===e.prevPlayed&&a.loadedSeconds===e.prevLoaded||e.props.onProgress(a),e.prevPlayed=a.playedSeconds,e.prevLoaded=a.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)})),v(m(e),"handleReady",(function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,r=t.onReady,n=t.playing,a=t.volume,i=t.muted;r(),i||null===a||e.player.setVolume(a),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):n&&e.player.play(),e.handleDurationCheck()}})),v(m(e),"handlePlay",(function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,r=t.onStart,n=t.onPlay,a=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==a&&e.player.setPlaybackRate(a),r(),e.startOnPlay=!1),n(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()})),v(m(e),"handlePause",(function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)})),v(m(e),"handleEnded",(function(){var t=e.props,r=t.activePlayer,n=t.loop,a=t.onEnded;r.loopOnEnded&&n&&e.seekTo(0),n||(e.isPlaying=!1,a())})),v(m(e),"handleError",(function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)})),v(m(e),"handleDurationCheck",(function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)})),v(m(e),"handleLoaded",(function(){e.isLoading=!1})),e}return t=l,r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.player){var r=this.props,n=r.url,a=r.playing,i=r.volume,s=r.muted,l=r.playbackRate,u=r.pip,d=r.loop,p=r.activePlayer,f=r.disableDeferredLoading;if(!(0,o.default)(e.url,n)){if(this.isLoading&&!p.forceLoad&&!f&&!(0,c.isMediaStream)(n))return console.warn("ReactPlayer: the attempt to load ".concat(n," is being deferred until the player has loaded")),void(this.loadOnReady=n);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}e.playing||!a||this.isPlaying||this.player.play(),e.playing&&!a&&this.isPlaying&&this.player.pause(),!e.pip&&u&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!u&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==i&&null!==i&&this.player.setVolume(i),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==i&&setTimeout((function(){return t.player.setVolume(i)})))),e.playbackRate!==l&&this.player.setPlaybackRate&&this.player.setPlaybackRate(l),e.loop!==d&&this.player.setLoop&&this.player.setLoop(d)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var r=this;if(this.isReady){if(t?"fraction"===t:e>0&&e<1){var n=this.player.getDuration();return n?void this.player.seekTo(n*e):void console.warn("ReactPlayer: could not seek using fraction duration not yet available")}this.player.seekTo(e)}else 0!==e&&(this.seekOnPlay=e,setTimeout((function(){r.seekOnPlay=null}),5e3))}},{key:"render",value:function(){var e=this.props.activePlayer;return e?i.default.createElement(e,u({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],r&&p(t.prototype,r),l}(i.Component);t.default=g,v(g,"displayName","Player"),v(g,"propTypes",s.propTypes),v(g,"defaultProps",s.defaultProps)},855:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(r(294));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m="64px",y={},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(v,e);var t,r,n,i,o=(n=v,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function v(){var e;c(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(p(e=o.call.apply(o,[this].concat(r))),"mounted",!1),h(p(e),"state",{image:null}),h(p(e),"handleKeyPress",(function(t){"Enter"!==t.key&&" "!==t.key||e.props.onClick()})),e}return t=v,(r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.url,n=t.light;e.url===r&&e.light===n||this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(e){var t=this,r=e.url,n=e.light,i=e.oEmbedUrl;if(!a.default.isValidElement(n))if("string"!=typeof n){if(!y[r])return this.setState({image:null}),window.fetch(i.replace("{url}",r)).then((function(e){return e.json()})).then((function(e){if(e.thumbnail_url&&t.mounted){var n=e.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");t.setState({image:n}),y[r]=n}}));this.setState({image:y[r]})}else this.setState({image:n})}},{key:"render",value:function(){var e=this.props,t=e.light,r=e.onClick,n=e.playIcon,i=e.previewTabIndex,o=this.state.image,c=a.default.isValidElement(t),l={display:"flex",alignItems:"center",justifyContent:"center"},u={preview:s({width:"100%",height:"100%",backgroundImage:o&&!c?"url(".concat(o,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},l),shadow:s({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:m,width:m,height:m,position:c?"absolute":void 0},l),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},d=a.default.createElement("div",{style:u.shadow,className:"react-player__shadow"},a.default.createElement("div",{style:u.playIcon,className:"react-player__play-icon"}));return a.default.createElement("div",{style:u.preview,className:"react-player__preview",onClick:r,tabIndex:i,onKeyPress:this.handleKeyPress},c?t:null,n||d)}}])&&l(t.prototype,r),v}(a.Component);t.default=v},390:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createReactPlayer=void 0;var n=k(r(294)),a=u(r(996)),i=u(r(845)),o=u(r(590)),s=r(741),c=r(45),l=u(r(722));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function k(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}var T=(0,n.lazy)((function(){return Promise.resolve().then((function(){return k(r(855))}))})),R="undefined"!=typeof window&&window.document,C=void 0!==r.g&&r.g.window&&r.g.window.document,O=Object.keys(s.propTypes),x=R||C?n.Suspense:function(){return null},D=[];t.createReactPlayer=function(e,t){var r,u;return u=r=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(k,r);var u,d,p,y,P=(p=k,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(p);if(y){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function k(){var r;v(this,k);for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return E(w(r=P.call.apply(P,[this].concat(u))),"state",{showPreview:!!r.props.light}),E(w(r),"references",{wrapper:function(e){r.wrapper=e},player:function(e){r.player=e}}),E(w(r),"handleClickPreview",(function(e){r.setState({showPreview:!1}),r.props.onClickPreview(e)})),E(w(r),"showPreview",(function(){r.setState({showPreview:!0})})),E(w(r),"getDuration",(function(){return r.player?r.player.getDuration():null})),E(w(r),"getCurrentTime",(function(){return r.player?r.player.getCurrentTime():null})),E(w(r),"getSecondsLoaded",(function(){return r.player?r.player.getSecondsLoaded():null})),E(w(r),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return r.player?r.player.getInternalPlayer(e):null})),E(w(r),"seekTo",(function(e,t){if(!r.player)return null;r.player.seekTo(e,t)})),E(w(r),"handleReady",(function(){r.props.onReady(w(r))})),E(w(r),"getActivePlayer",(0,i.default)((function(r){for(var n=0,a=[].concat(D,m(e));n<a.length;n++){var i=a[n];if(i.canPlay(r))return i}return t||null}))),E(w(r),"getConfig",(0,i.default)((function(e,t){var n=r.props.config;return a.default.all([s.defaultProps.config,s.defaultProps.config[t]||{},n,n[t]||{}])}))),E(w(r),"getAttributes",(0,i.default)((function(e){return(0,c.omit)(r.props,O)}))),E(w(r),"renderActivePlayer",(function(e){if(!e)return null;var t=r.getActivePlayer(e);if(!t)return null;var a=r.getConfig(e,t.key);return n.default.createElement(l.default,h({},r.props,{key:t.key,ref:r.references.player,config:a,activePlayer:t.lazyPlayer||t,onReady:r.handleReady}))})),r}return u=k,d=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,o.default)(this.props,e)||!(0,o.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,r=t.light,a=t.playIcon,i=t.previewTabIndex,o=t.oEmbedUrl;return n.default.createElement(T,{url:e,light:r,playIcon:a,previewTabIndex:i,oEmbedUrl:o,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.style,a=e.width,i=e.height,o=e.fallback,s=e.wrapper,c=this.state.showPreview,l=this.getAttributes(t),u="string"==typeof s?this.references.wrapper:void 0;return n.default.createElement(s,h({ref:u,style:f(f({},r),{},{width:a,height:i})},l),n.default.createElement(x,{fallback:o},c?this.renderPreview(t):this.renderActivePlayer(t)))}}],d&&g(u.prototype,d),k}(n.Component),E(r,"displayName","ReactPlayer"),E(r,"propTypes",s.propTypes),E(r,"defaultProps",s.defaultProps),E(r,"addCustomPlayer",(function(e){D.push(e)})),E(r,"removeCustomPlayers",(function(){D.length=0})),E(r,"canPlay",(function(t){for(var r=0,n=[].concat(D,m(e));r<n.length;r++)if(n[r].canPlay(t))return!0;return!1})),E(r,"canEnablePIP",(function(t){for(var r=0,n=[].concat(D,m(e));r<n.length;r++){var a=n[r];if(a.canEnablePIP&&a.canEnablePIP(t))return!0}return!1})),u}},4:function(e,t,r){"use strict";t.Z=void 0;var n,a=(n=r(497))&&n.__esModule?n:{default:n},i=r(390),o=a.default[a.default.length-1],s=(0,i.createReactPlayer)(a.default,o);t.Z=s},776:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canPlay=t.FLV_EXTENSIONS=t.DASH_EXTENSIONS=t.HLS_EXTENSIONS=t.VIDEO_EXTENSIONS=t.AUDIO_EXTENSIONS=t.MATCH_URL_KALTURA=t.MATCH_URL_VIDYARD=t.MATCH_URL_MIXCLOUD=t.MATCH_URL_DAILYMOTION=t.MATCH_URL_TWITCH_CHANNEL=t.MATCH_URL_TWITCH_VIDEO=t.MATCH_URL_WISTIA=t.MATCH_URL_STREAMABLE=t.MATCH_URL_FACEBOOK_WATCH=t.MATCH_URL_FACEBOOK=t.MATCH_URL_VIMEO=t.MATCH_URL_SOUNDCLOUD=t.MATCH_URL_YOUTUBE=void 0;var n=r(45);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;t.MATCH_URL_YOUTUBE=i;var o=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;t.MATCH_URL_SOUNDCLOUD=o;var s=/vimeo\.com\/(?!progressive_redirect).+/;t.MATCH_URL_VIMEO=s;var c=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;t.MATCH_URL_FACEBOOK=c;var l=/^https?:\/\/fb\.watch\/.+$/;t.MATCH_URL_FACEBOOK_WATCH=l;var u=/streamable\.com\/([a-z0-9]+)$/;t.MATCH_URL_STREAMABLE=u;var d=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;t.MATCH_URL_WISTIA=d;var p=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;t.MATCH_URL_TWITCH_VIDEO=p;var f=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;t.MATCH_URL_TWITCH_CHANNEL=f;var h=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;t.MATCH_URL_DAILYMOTION=h;var m=/mixcloud\.com\/([^/]+\/[^/]+)/;t.MATCH_URL_MIXCLOUD=m;var y=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;t.MATCH_URL_VIDYARD=y;var v=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;t.MATCH_URL_KALTURA=v;var g=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;t.AUDIO_EXTENSIONS=g;var _=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;t.VIDEO_EXTENSIONS=_;var b=/\.(m3u8)($|\?)/i;t.HLS_EXTENSIONS=b;var w=/\.(mpd)($|\?)/i;t.DASH_EXTENSIONS=w;var S=/\.(flv)($|\?)/i;t.FLV_EXTENSIONS=S;var E={youtube:function(e){return e instanceof Array?e.every((function(e){return i.test(e)})):i.test(e)},soundcloud:function(e){return o.test(e)&&!g.test(e)},vimeo:function(e){return s.test(e)&&!_.test(e)&&!b.test(e)},facebook:function(e){return c.test(e)||l.test(e)},streamable:function(e){return u.test(e)},wistia:function(e){return d.test(e)},twitch:function(e){return p.test(e)||f.test(e)},dailymotion:function(e){return h.test(e)},mixcloud:function(e){return m.test(e)},vidyard:function(e){return y.test(e)},kaltura:function(e){return v.test(e)},file:function e(t){if(t instanceof Array){var r,i=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("string"==typeof o&&e(o))return!0;if(e(o.src))return!0}}catch(e){i.e(e)}finally{i.f()}return!1}return!(!(0,n.isMediaStream)(t)&&!(0,n.isBlobUrl)(t))||g.test(t)||_.test(t)||b.test(t)||w.test(t)||S.test(t)}};t.canPlay=E},807:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(g,e);var t,r,n,s,c=(n=g,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(s){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function g(){var e;d(this,g);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(m(e=c.call.apply(c,[this].concat(r))),"callPlayer",i.callPlayer),v(m(e),"onDurationChange",(function(){var t=e.getDuration();e.props.onDuration(t)})),v(m(e),"mute",(function(){e.callPlayer("setMuted",!0)})),v(m(e),"unmute",(function(){e.callPlayer("setMuted",!1)})),v(m(e),"ref",(function(t){e.container=t})),e}return t=g,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t,r,n=this,a=this.props,s=a.controls,c=a.config,d=a.onError,p=a.playing,f=(t=e.match(o.MATCH_URL_DAILYMOTION),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];this.player?this.player.load(f,{start:(0,i.parseStartTime)(e),autoplay:p}):(0,i.getSDK)("https://api.dmcdn.net/all.js","DM","dmAsyncInit",(function(e){return e.player})).then((function(t){if(n.container){var r=t.player;n.player=new r(n.container,{width:"100%",height:"100%",video:f,params:l({controls:s,autoplay:n.props.playing,mute:n.props.muted,start:(0,i.parseStartTime)(e),origin:window.location.origin},c.params),events:{apiready:n.props.onReady,seeked:function(){return n.props.onSeek(n.player.currentTime)},video_end:n.props.onEnded,durationchange:n.onDurationChange,pause:n.props.onPause,playing:n.props.onPlay,waiting:n.props.onBuffer,error:function(e){return d(e)}}})}}),d)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return a.default.createElement("div",{style:e},a.default.createElement("div",{ref:this.ref}))}}])&&p(t.prototype,r),g}(a.Component);t.default=g,v(g,"displayName","DailyMotion"),v(g,"canPlay",o.canPlay.dailymotion),v(g,"loopOnEnded",!0)},972:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y="https://connect.facebook.net/en_US/sdk.js",v="fbAsyncInit",g="facebook-player-",_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(_,e);var t,r,n,o,s=(n=_,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function _(){var e;l(this,_);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(f(e=s.call.apply(s,[this].concat(r))),"callPlayer",i.callPlayer),m(f(e),"playerID",e.props.config.playerId||"".concat(g).concat((0,i.randomString)())),m(f(e),"mute",(function(){e.callPlayer("mute")})),m(f(e),"unmute",(function(){e.callPlayer("unmute")})),e}return t=_,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this;t?(0,i.getSDK)(y,"FB",v).then((function(e){return e.XFBML.parse()})):(0,i.getSDK)(y,"FB",v).then((function(e){e.init({appId:r.props.config.appId,xfbml:!0,version:r.props.config.version}),e.Event.subscribe("xfbml.render",(function(e){r.props.onLoaded()})),e.Event.subscribe("xfbml.ready",(function(e){"video"===e.type&&e.id===r.playerID&&(r.player=e.instance,r.player.subscribe("startedPlaying",r.props.onPlay),r.player.subscribe("paused",r.props.onPause),r.player.subscribe("finishedPlaying",r.props.onEnded),r.player.subscribe("startedBuffering",r.props.onBuffer),r.player.subscribe("finishedBuffering",r.props.onBufferEnd),r.player.subscribe("error",r.props.onError),r.props.muted?r.callPlayer("mute"):r.callPlayer("unmute"),r.props.onReady(),document.getElementById(r.playerID).querySelector("iframe").style.visibility="visible")}))}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.config.attributes;return a.default.createElement("div",c({style:{width:"100%",height:"100%"},id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},e))}}])&&u(t.prototype,r),_}(a.Component);t.default=_,m(_,"displayName","Facebook"),m(_,"canPlay",o.canPlay.facebook),m(_,"loopOnEnded",!0)},926:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y="undefined"!=typeof navigator,v=y&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,g=y&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||v)&&!window.MSStream,_=y&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,b=/www\.dropbox\.com\/.+/,w=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(v,e);var t,r,n,s,y=(n=v,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(s){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function v(){var e;l(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(f(e=y.call.apply(y,[this].concat(r))),"onReady",(function(){var t;return(t=e.props).onReady.apply(t,arguments)})),m(f(e),"onPlay",(function(){var t;return(t=e.props).onPlay.apply(t,arguments)})),m(f(e),"onBuffer",(function(){var t;return(t=e.props).onBuffer.apply(t,arguments)})),m(f(e),"onBufferEnd",(function(){var t;return(t=e.props).onBufferEnd.apply(t,arguments)})),m(f(e),"onPause",(function(){var t;return(t=e.props).onPause.apply(t,arguments)})),m(f(e),"onEnded",(function(){var t;return(t=e.props).onEnded.apply(t,arguments)})),m(f(e),"onError",(function(){var t;return(t=e.props).onError.apply(t,arguments)})),m(f(e),"onPlayBackRateChange",(function(t){return e.props.onPlaybackRateChange(t.target.playbackRate)})),m(f(e),"onEnablePIP",(function(){var t;return(t=e.props).onEnablePIP.apply(t,arguments)})),m(f(e),"onDisablePIP",(function(t){var r=e.props,n=r.onDisablePIP,a=r.playing;n(t),a&&e.play()})),m(f(e),"onPresentationModeChange",(function(t){if(e.player&&(0,i.supportsWebKitPresentationMode)(e.player)){var r=e.player.webkitPresentationMode;"picture-in-picture"===r?e.onEnablePIP(t):"inline"===r&&e.onDisablePIP(t)}})),m(f(e),"onSeek",(function(t){e.props.onSeek(t.target.currentTime)})),m(f(e),"mute",(function(){e.player.muted=!0})),m(f(e),"unmute",(function(){e.player.muted=!1})),m(f(e),"renderSourceElement",(function(e,t){return"string"==typeof e?a.default.createElement("source",{key:t,src:e}):a.default.createElement("source",c({key:t},e))})),m(f(e),"renderTrack",(function(e,t){return a.default.createElement("track",c({key:t},e))})),m(f(e),"ref",(function(t){e.player&&(e.prevPlayer=e.player),e.player=t})),e}return t=v,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player),this.player.src=this.getSource(this.props.url),g&&this.player.load()}},{key:"componentDidUpdate",value:function(e){this.shouldUseAudio(this.props)!==this.shouldUseAudio(e)&&(this.removeListeners(this.prevPlayer,e.url),this.addListeners(this.player)),this.props.url===e.url||(0,i.isMediaStream)(this.props.url)||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.src="",this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(e){var t=this.props,r=t.url,n=t.playsinline;e.addEventListener("play",this.onPlay),e.addEventListener("waiting",this.onBuffer),e.addEventListener("playing",this.onBufferEnd),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeek),e.addEventListener("ended",this.onEnded),e.addEventListener("error",this.onError),e.addEventListener("ratechange",this.onPlayBackRateChange),e.addEventListener("enterpictureinpicture",this.onEnablePIP),e.addEventListener("leavepictureinpicture",this.onDisablePIP),e.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(r)||e.addEventListener("canplay",this.onReady),n&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(e,t){e.removeEventListener("canplay",this.onReady),e.removeEventListener("play",this.onPlay),e.removeEventListener("waiting",this.onBuffer),e.removeEventListener("playing",this.onBufferEnd),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeek),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),e.removeEventListener("ratechange",this.onPlayBackRateChange),e.removeEventListener("enterpictureinpicture",this.onEnablePIP),e.removeEventListener("leavepictureinpicture",this.onDisablePIP),e.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(t)||e.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(e){return!e.config.forceVideo&&!e.config.attributes.poster&&(o.AUDIO_EXTENSIONS.test(e.url)||e.config.forceAudio)}},{key:"shouldUseHLS",value:function(e){return!!this.props.config.forceHLS||!(!_||!this.props.config.forceSafariHLS)||!g&&(o.HLS_EXTENSIONS.test(e)||w.test(e))}},{key:"shouldUseDASH",value:function(e){return o.DASH_EXTENSIONS.test(e)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(e){return o.FLV_EXTENSIONS.test(e)||this.props.config.forceFLV}},{key:"load",value:function(e){var t=this,r=this.props.config,n=r.hlsVersion,a=r.hlsOptions,o=r.dashVersion,s=r.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(e)&&(0,i.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",n),"Hls").then((function(r){if(t.hls=new r(a),t.hls.on(r.Events.MANIFEST_PARSED,(function(){t.props.onReady()})),t.hls.on(r.Events.ERROR,(function(e,n){t.props.onError(e,n,t.hls,r)})),w.test(e)){var n=e.match(w)[1];t.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",n))}else t.hls.loadSource(e);t.hls.attachMedia(t.player),t.props.onLoaded()})),this.shouldUseDASH(e)&&(0,i.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",o),"dashjs").then((function(r){t.dash=r.MediaPlayer().create(),t.dash.initialize(t.player,e,t.props.playing),t.dash.on("error",t.props.onError),parseInt(o)<3?t.dash.getDebug().setLogToBrowserConsole(!1):t.dash.updateSettings({debug:{logLevel:r.Debug.LOG_LEVEL_NONE}}),t.props.onLoaded()})),this.shouldUseFLV(e)&&(0,i.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",s),"flvjs").then((function(r){t.flv=r.createPlayer({type:"flv",url:e}),t.flv.attachMediaElement(t.player),t.flv.on(r.Events.ERROR,(function(e,n){t.props.onError(e,n,t.flv,r)})),t.flv.load(),t.props.onLoaded()})),e instanceof Array)this.player.load();else if((0,i.isMediaStream)(e))try{this.player.srcObject=e}catch(t){this.player.src=window.URL.createObjectURL(e)}}},{key:"play",value:function(){var e=this.player.play();e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(e){this.player.currentTime=e}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,i.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,i.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(e){try{this.player.playbackRate=e}catch(e){this.props.onError(e)}}},{key:"getDuration",value:function(){if(!this.player)return null;var e=this.player,t=e.duration,r=e.seekable;return t===1/0&&r.length>0?r.end(r.length-1):t}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var e=this.player.buffered;if(0===e.length)return 0;var t=e.end(e.length-1),r=this.getDuration();return t>r?r:t}},{key:"getSource",value:function(e){var t=this.shouldUseHLS(e),r=this.shouldUseDASH(e),n=this.shouldUseFLV(e);if(!(e instanceof Array||(0,i.isMediaStream)(e)||t||r||n))return b.test(e)?e.replace("www.dropbox.com","dl.dropboxusercontent.com"):e}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.playing,n=e.loop,i=e.controls,o=e.muted,s=e.config,l=e.width,u=e.height,d=this.shouldUseAudio(this.props)?"audio":"video",p={width:"auto"===l?l:"100%",height:"auto"===u?u:"100%"};return a.default.createElement(d,c({ref:this.ref,src:this.getSource(t),style:p,preload:"auto",autoPlay:r||void 0,controls:i,muted:o,loop:n},s.attributes),t instanceof Array&&t.map(this.renderSourceElement),s.tracks.map(this.renderTrack))}}])&&u(t.prototype,r),v}(a.Component);t.default=S,m(S,"displayName","FilePlayer"),m(S,"canPlay",o.canPlay.file)},911:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,r,n,o,s=(n=m,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(o){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function m(){var e;c(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(p(e=s.call.apply(s,[this].concat(r))),"callPlayer",i.callPlayer),h(p(e),"duration",null),h(p(e),"currentTime",null),h(p(e),"secondsLoaded",null),h(p(e),"mute",(function(){e.callPlayer("mute")})),h(p(e),"unmute",(function(){e.callPlayer("unmute")})),h(p(e),"ref",(function(t){e.iframe=t})),e}return t=m,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,i.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.on("ready",(function(){setTimeout((function(){t.player.isReady=!0,t.player.setLoop(t.props.loop),t.props.muted&&t.player.mute(),t.addListeners(t.player,t.props),t.props.onReady()}),500)})))}),this.props.onError)}},{key:"addListeners",value:function(e,t){var r=this;e.on("play",t.onPlay),e.on("pause",t.onPause),e.on("ended",t.onEnded),e.on("error",t.onError),e.on("timeupdate",(function(e){var t=e.duration,n=e.seconds;r.duration=t,r.currentTime=n}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){return a.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}])&&l(t.prototype,r),m}(a.Component);t.default=m,h(m,"displayName","Kaltura"),h(m,"canPlay",o.canPlay.kaltura)},143:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(v,e);var t,r,n,s,c=(n=v,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(s){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function v(){var e;u(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(h(e=c.call.apply(c,[this].concat(r))),"callPlayer",i.callPlayer),y(h(e),"duration",null),y(h(e),"currentTime",null),y(h(e),"secondsLoaded",null),y(h(e),"mute",(function(){})),y(h(e),"unmute",(function(){})),y(h(e),"ref",(function(t){e.iframe=t})),e}return t=v,r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,i.getSDK)("https://widget.mixcloud.com/media/js/widgetApi.js","Mixcloud").then((function(e){t.player=e.PlayerWidget(t.iframe),t.player.ready.then((function(){t.player.events.play.on(t.props.onPlay),t.player.events.pause.on(t.props.onPause),t.player.events.ended.on(t.props.onEnded),t.player.events.error.on(t.props.error),t.player.events.progress.on((function(e,r){t.currentTime=e,t.duration=r})),t.props.onReady()}))}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.config,n=t.match(o.MATCH_URL_MIXCLOUD)[1],s=(0,i.queryString)(l(l({},r.options),{},{feed:"/".concat(n,"/")}));return a.default.createElement("iframe",{key:n,ref:this.ref,style:{width:"100%",height:"100%"},src:"https://www.mixcloud.com/widget/iframe/?".concat(s),frameBorder:"0",allow:"autoplay"})}}],r&&d(t.prototype,r),v}(a.Component);t.default=v,y(v,"displayName","Mixcloud"),y(v,"canPlay",o.canPlay.mixcloud),y(v,"loopOnEnded",!0)},648:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,n,o,s=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function c(){var e;u(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(h(e=s.call.apply(s,[this].concat(r))),"callPlayer",i.callPlayer),y(h(e),"duration",null),y(h(e),"currentTime",null),y(h(e),"fractionLoaded",null),y(h(e),"mute",(function(){e.setVolume(0)})),y(h(e),"unmute",(function(){null!==e.props.volume&&e.setVolume(e.props.volume)})),y(h(e),"ref",(function(t){e.iframe=t})),e}return t=c,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this;(0,i.getSDK)("https://w.soundcloud.com/player/api.js","SC").then((function(n){if(r.iframe){var a=n.Widget.Events,i=a.PLAY,o=a.PLAY_PROGRESS,s=a.PAUSE,c=a.FINISH,u=a.ERROR;t||(r.player=n.Widget(r.iframe),r.player.bind(i,r.props.onPlay),r.player.bind(s,(function(){r.duration-r.currentTime<.05||r.props.onPause()})),r.player.bind(o,(function(e){r.currentTime=e.currentPosition/1e3,r.fractionLoaded=e.loadedProgress})),r.player.bind(c,(function(){return r.props.onEnded()})),r.player.bind(u,(function(e){return r.props.onError(e)}))),r.player.load(e,l(l({},r.props.config.options),{},{callback:function(){r.player.getDuration((function(e){r.duration=e/1e3,r.props.onReady()}))}}))}}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",1e3*e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return a.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:e,frameBorder:0,allow:"autoplay"})}}])&&d(t.prototype,r),c}(a.Component);t.default=v,y(v,"displayName","SoundCloud"),y(v,"canPlay",o.canPlay.soundcloud),y(v,"loopOnEnded",!0)},993:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(y,e);var t,r,n,s,m=(n=y,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(s){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function y(){var e;c(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(p(e=m.call.apply(m,[this].concat(r))),"callPlayer",i.callPlayer),h(p(e),"duration",null),h(p(e),"currentTime",null),h(p(e),"secondsLoaded",null),h(p(e),"mute",(function(){e.callPlayer("mute")})),h(p(e),"unmute",(function(){e.callPlayer("unmute")})),h(p(e),"ref",(function(t){e.iframe=t})),e}return t=y,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,i.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.setLoop(t.props.loop),t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seeked",t.props.onSeek),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",(function(e){var r=e.duration,n=e.seconds;t.duration=r,t.currentTime=n})),t.player.on("buffered",(function(e){var r=e.percent;t.duration&&(t.secondsLoaded=t.duration*r)})),t.props.muted&&t.player.mute())}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e=this.props.url.match(o.MATCH_URL_STREAMABLE)[1];return a.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(e),frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;"})}}])&&l(t.prototype,r),y}(a.Component);t.default=m,h(m,"displayName","Streamable"),h(m,"canPlay",o.canPlay.streamable)},482:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y="twitch-player-",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(g,e);var t,r,n,s,v=(n=g,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(s){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function g(){var e;l(this,g);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(f(e=v.call.apply(v,[this].concat(r))),"callPlayer",i.callPlayer),m(f(e),"playerID",e.props.config.playerId||"".concat(y).concat((0,i.randomString)())),m(f(e),"mute",(function(){e.callPlayer("setMuted",!0)})),m(f(e),"unmute",(function(){e.callPlayer("setMuted",!1)})),e}return t=g,r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this,n=this.props,a=n.playsinline,s=n.onError,l=n.config,u=n.controls,d=o.MATCH_URL_TWITCH_CHANNEL.test(e),p=d?e.match(o.MATCH_URL_TWITCH_CHANNEL)[1]:e.match(o.MATCH_URL_TWITCH_VIDEO)[1];t?d?this.player.setChannel(p):this.player.setVideo("v"+p):(0,i.getSDK)("https://player.twitch.tv/js/embed/v1.js","Twitch").then((function(t){r.player=new t.Player(r.playerID,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({video:d?"":p,channel:d?p:"",height:"100%",width:"100%",playsinline:a,autoplay:r.props.playing,muted:r.props.muted,controls:!!d||u,time:(0,i.parseStartTime)(e)},l.options));var n=t.Player,o=n.READY,s=n.PLAYING,f=n.PAUSE,h=n.ENDED,y=n.ONLINE,v=n.OFFLINE,g=n.SEEK;r.player.addEventListener(o,r.props.onReady),r.player.addEventListener(s,r.props.onPlay),r.player.addEventListener(f,r.props.onPause),r.player.addEventListener(h,r.props.onEnded),r.player.addEventListener(g,r.props.onSeek),r.player.addEventListener(y,r.props.onLoaded),r.player.addEventListener(v,r.props.onLoaded)}),s)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return a.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID})}}],r&&u(t.prototype,r),g}(a.Component);t.default=v,m(v,"displayName","Twitch"),m(v,"canPlay",o.canPlay.twitch),m(v,"loopOnEnded",!0)},596:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(v,e);var t,r,n,s,y=(n=v,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(s){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function v(){var e;l(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(f(e=y.call.apply(y,[this].concat(r))),"callPlayer",i.callPlayer),m(f(e),"mute",(function(){e.setVolume(0)})),m(f(e),"unmute",(function(){null!==e.props.volume&&e.setVolume(e.props.volume)})),m(f(e),"ref",(function(t){e.container=t})),e}return t=v,r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,n=r.playing,a=r.config,s=r.onError,l=r.onDuration,u=e&&e.match(o.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,i.getSDK)("https://play.vidyard.com/embed/v4.js","VidyardV4","onVidyardAPI").then((function(e){t.container&&(e.api.addReadyListener((function(e,r){t.player||(t.player=r,t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seek",t.props.onSeek),t.player.on("playerComplete",t.props.onEnded))}),u),e.api.renderPlayer(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({uuid:u,container:t.container,autoplay:n?1:0},a.options)),e.api.getPlayerMetadata(u).then((function(e){t.duration=e.length_in_seconds,l(e.length_in_seconds)})))}),s)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackSpeed",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return a.default.createElement("div",{style:e},a.default.createElement("div",{ref:this.ref}))}}],r&&u(t.prototype,r),v}(a.Component);t.default=y,m(y,"displayName","Vidyard"),m(y,"canPlay",o.canPlay.vidyard)},868:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(y,e);var t,r,n,o,s=(n=y,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function y(){var e;l(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(f(e=s.call.apply(s,[this].concat(r))),"callPlayer",i.callPlayer),m(f(e),"duration",null),m(f(e),"currentTime",null),m(f(e),"secondsLoaded",null),m(f(e),"mute",(function(){e.setMuted(!0)})),m(f(e),"unmute",(function(){e.setMuted(!1)})),m(f(e),"ref",(function(t){e.container=t})),e}return t=y,r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;this.duration=null,(0,i.getSDK)("https://player.vimeo.com/api/player.js","Vimeo").then((function(r){if(t.container){var n=t.props.config,a=n.playerOptions,i=n.title;t.player=new r.Player(t.container,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:e,autoplay:t.props.playing,muted:t.props.muted,loop:t.props.loop,playsinline:t.props.playsinline,controls:t.props.controls},a)),t.player.ready().then((function(){var e=t.container.querySelector("iframe");e.style.width="100%",e.style.height="100%",i&&(e.title=i)})).catch(t.props.onError),t.player.on("loaded",(function(){t.props.onReady(),t.refreshDuration()})),t.player.on("play",(function(){t.props.onPlay(),t.refreshDuration()})),t.player.on("pause",t.props.onPause),t.player.on("seeked",(function(e){return t.props.onSeek(e.seconds)})),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",(function(e){var r=e.seconds;t.currentTime=r})),t.player.on("progress",(function(e){var r=e.seconds;t.secondsLoaded=r})),t.player.on("bufferstart",t.props.onBuffer),t.player.on("bufferend",t.props.onBufferEnd),t.player.on("playbackratechange",(function(e){return t.props.onPlaybackRateChange(e.playbackRate)}))}}),this.props.onError)}},{key:"refreshDuration",value:function(){var e=this;this.player.getDuration().then((function(t){e.duration=t}))}},{key:"play",value:function(){var e=this.callPlayer("play");e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setMuted",value:function(e){this.callPlayer("setMuted",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e={width:"100%",height:"100%",overflow:"hidden",display:this.props.display};return a.default.createElement("div",{key:this.props.url,ref:this.ref,style:e})}}],r&&u(t.prototype,r),y}(a.Component);t.default=y,m(y,"displayName","Vimeo"),m(y,"canPlay",o.canPlay.vimeo),m(y,"forceLoad",!0)},18:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v="wistia-player-",g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(g,e);var t,r,n,s,c=(n=g,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(s){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function g(){var e;u(this,g);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(h(e=c.call.apply(c,[this].concat(r))),"callPlayer",i.callPlayer),y(h(e),"playerID",e.props.config.playerId||"".concat(v).concat((0,i.randomString)())),y(h(e),"onPlay",(function(){var t;return(t=e.props).onPlay.apply(t,arguments)})),y(h(e),"onPause",(function(){var t;return(t=e.props).onPause.apply(t,arguments)})),y(h(e),"onSeek",(function(){var t;return(t=e.props).onSeek.apply(t,arguments)})),y(h(e),"onEnded",(function(){var t;return(t=e.props).onEnded.apply(t,arguments)})),y(h(e),"onPlaybackRateChange",(function(){var t;return(t=e.props).onPlaybackRateChange.apply(t,arguments)})),y(h(e),"mute",(function(){e.callPlayer("mute")})),y(h(e),"unmute",(function(){e.callPlayer("unmute")})),e}return t=g,r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,n=r.playing,a=r.muted,o=r.controls,s=r.onReady,c=r.config,u=r.onError;(0,i.getSDK)("https://fast.wistia.com/assets/external/E-v1.js","Wistia").then((function(e){c.customControls&&c.customControls.forEach((function(t){return e.defineControl(t)})),window._wq=window._wq||[],window._wq.push({id:t.playerID,options:l({autoPlay:n,silentAutoPlay:"allow",muted:a,controlsVisibleOnLoad:o,fullscreenButton:o,playbar:o,playbackRateControl:o,qualityControl:o,volumeControl:o,settingsControl:o,smallPlayButton:o},c.options),onReady:function(e){t.player=e,t.unbind(),t.player.bind("play",t.onPlay),t.player.bind("pause",t.onPause),t.player.bind("seek",t.onSeek),t.player.bind("end",t.onEnded),t.player.bind("playbackratechange",t.onPlaybackRateChange),s()}})}),u)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(e){this.callPlayer("time",e)}},{key:"setVolume",value:function(e){this.callPlayer("volume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("playbackRate",e)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.url,t=e&&e.match(o.MATCH_URL_WISTIA)[1],r="wistia_embed wistia_async_".concat(t);return a.default.createElement("div",{id:this.playerID,key:t,className:r,style:{width:"100%",height:"100%"}})}}],r&&d(t.prototype,r),g}(a.Component);t.default=g,y(g,"displayName","Wistia"),y(g,"canPlay",o.canPlay.wistia),y(g,"loopOnEnded",!0)},356:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(294)),i=r(45),o=r(776);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function m(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,b=/user\/([a-zA-Z0-9_-]+)\/?/,w=/youtube-nocookie\.com/,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,r,n,s,c=(n=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(s){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function d(){var e;p(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=c.call.apply(c,[this].concat(r))),"callPlayer",i.callPlayer),g(y(e),"parsePlaylist",(function(t){return t instanceof Array?{listType:"playlist",playlist:t.map(e.getID).join(",")}:_.test(t)?{listType:"playlist",list:u(t.match(_),2)[1].replace(/^UC/,"UU")}:b.test(t)?{listType:"user_uploads",list:u(t.match(b),2)[1]}:{}})),g(y(e),"onStateChange",(function(t){var r=t.data,n=e.props,a=n.onPlay,i=n.onPause,o=n.onBuffer,s=n.onBufferEnd,c=n.onEnded,l=n.onReady,u=n.loop,d=n.config,p=d.playerVars,f=d.onUnstarted,h=window.YT.PlayerState,m=h.UNSTARTED,y=h.PLAYING,v=h.PAUSED,g=h.BUFFERING,_=h.ENDED,b=h.CUED;if(r===m&&f(),r===y&&(a(),s()),r===v&&i(),r===g&&o(),r===_){var w=!!e.callPlayer("getPlaylist");u&&!w&&(p.start?e.seekTo(p.start):e.play()),c()}r===b&&l()})),g(y(e),"mute",(function(){e.callPlayer("mute")})),g(y(e),"unmute",(function(){e.callPlayer("unMute")})),g(y(e),"ref",(function(t){e.container=t})),e}return t=d,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(e){return!e||e instanceof Array||_.test(e)?null:e.match(o.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(e,t){var r=this,n=this.props,a=n.playing,o=n.muted,s=n.playsinline,c=n.controls,u=n.loop,d=n.config,p=n.onError,f=d.playerVars,h=d.embedOptions,m=this.getID(e);if(t)return _.test(e)||b.test(e)||e instanceof Array?void this.player.loadPlaylist(this.parsePlaylist(e)):void this.player.cueVideoById({videoId:m,startSeconds:(0,i.parseStartTime)(e)||f.start,endSeconds:(0,i.parseEndTime)(e)||f.end});(0,i.getSDK)("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady",(function(e){return e.loaded})).then((function(t){r.container&&(r.player=new t.Player(r.container,l({width:"100%",height:"100%",videoId:m,playerVars:l(l({autoplay:a?1:0,mute:o?1:0,controls:c?1:0,start:(0,i.parseStartTime)(e),end:(0,i.parseEndTime)(e),origin:window.location.origin,playsinline:s?1:0},r.parsePlaylist(e)),f),events:{onReady:function(){u&&r.player.setLoop(!0),r.props.onReady()},onPlaybackRateChange:function(e){return r.props.onPlaybackRateChange(e.data)},onStateChange:r.onStateChange,onError:function(e){return p(e.data)}},host:w.test(e)?"https://www.youtube-nocookie.com":void 0},h)))}),p),h.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return a.default.createElement("div",{style:e},a.default.createElement("div",{ref:this.ref}))}}])&&f(t.prototype,r),d}(a.Component);t.default=S,g(S,"displayName","YouTube"),g(S,"canPlay",o.canPlay.youtube)},497:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(294),a=r(45),i=r(776);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}var l=[{key:"youtube",name:"YouTube",canPlay:i.canPlay.youtube,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(356))}))}))},{key:"soundcloud",name:"SoundCloud",canPlay:i.canPlay.soundcloud,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(648))}))}))},{key:"vimeo",name:"Vimeo",canPlay:i.canPlay.vimeo,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(868))}))}))},{key:"facebook",name:"Facebook",canPlay:i.canPlay.facebook,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(972))}))}))},{key:"streamable",name:"Streamable",canPlay:i.canPlay.streamable,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(993))}))}))},{key:"wistia",name:"Wistia",canPlay:i.canPlay.wistia,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(18))}))}))},{key:"twitch",name:"Twitch",canPlay:i.canPlay.twitch,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(482))}))}))},{key:"dailymotion",name:"DailyMotion",canPlay:i.canPlay.dailymotion,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(807))}))}))},{key:"mixcloud",name:"Mixcloud",canPlay:i.canPlay.mixcloud,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(143))}))}))},{key:"vidyard",name:"Vidyard",canPlay:i.canPlay.vidyard,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(596))}))}))},{key:"kaltura",name:"Kaltura",canPlay:i.canPlay.kaltura,lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(911))}))}))},{key:"file",name:"FilePlayer",canPlay:i.canPlay.file,canEnablePIP:function(e){return i.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,a.supportsWebKitPresentationMode)())&&!i.AUDIO_EXTENSIONS.test(e)},lazyPlayer:(0,n.lazy)((function(){return Promise.resolve().then((function(){return c(r(926))}))}))}];t.default=l},741:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var n,a=(n=r(697))&&n.__esModule?n:{default:n},i=a.default.string,o=a.default.bool,s=a.default.number,c=a.default.array,l=a.default.oneOfType,u=a.default.shape,d=a.default.object,p=a.default.func,f=a.default.node,h={url:l([i,c,d]),playing:o,loop:o,controls:o,volume:s,muted:o,playbackRate:s,width:l([i,s]),height:l([i,s]),style:d,progressInterval:s,playsinline:o,pip:o,stopOnUnmount:o,light:l([o,i,d]),playIcon:f,previewTabIndex:s,fallback:f,oEmbedUrl:i,wrapper:l([i,p,u({render:p.isRequired})]),config:u({soundcloud:u({options:d}),youtube:u({playerVars:d,embedOptions:d,onUnstarted:p}),facebook:u({appId:i,version:i,playerId:i,attributes:d}),dailymotion:u({params:d}),vimeo:u({playerOptions:d,title:i}),file:u({attributes:d,tracks:c,forceVideo:o,forceAudio:o,forceHLS:o,forceSafariHLS:o,forceDASH:o,forceFLV:o,hlsOptions:d,hlsVersion:i,dashVersion:i,flvVersion:i}),wistia:u({options:d,playerId:i,customControls:c}),mixcloud:u({options:d}),twitch:u({options:d,playerId:i}),vidyard:u({options:d})}),onReady:p,onStart:p,onPlay:p,onPause:p,onBuffer:p,onBufferEnd:p,onEnded:p,onError:p,onDuration:p,onSeek:p,onPlaybackRateChange:p,onProgress:p,onClickPreview:p,onEnablePIP:p,onDisablePIP:p};t.propTypes=h;var m=function(){},y={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:m},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onPlaybackRateChange:m,onProgress:m,onClickPreview:m,onEnablePIP:m,onDisablePIP:m};t.defaultProps=y},45:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return d(e,s)},t.parseEndTime=function(e){return d(e,c)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getSDK=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.default,o=p(t);return o&&a(o)?Promise.resolve(o):new Promise((function(n,a){if(f[e])f[e].push({resolve:n,reject:a});else{f[e]=[{resolve:n,reject:a}];var o=function(t){f[e].forEach((function(e){return e.resolve(t)}))};if(r){var s=window[r];window[r]=function(){s&&s(),o(p(t))}}i(e,(function(n){n?(f[e].forEach((function(e){return e.reject(n)})),f[e]=null):r||o(p(t))}))}}))},t.getConfig=function(e,t){return(0,a.default)(t.config,e.config)},t.omit=function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var i=(t=[]).concat.apply(t,n),o={},s=Object.keys(e),c=0,l=s;c<l.length;c++){var u=l[c];-1===i.indexOf(u)&&(o[u]=e[u])}return o},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var r="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c  ");return this.player?this.player[e]||(r+="The method was not available"):r+="The player was not available",console.warn(r,"font-weight: bold",""),null}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return(t=this.player)[e].apply(t,a)},t.isMediaStream=function(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream},t.isBlobUrl=function(e){return/^blob:/.test(e)},t.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&t};var n=i(r(90)),a=i(r(996));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=/[?&#](?:start|t)=([0-9hms]+)/,c=/[?&#]end=([0-9hms]+)/,l=/(\d+)(h|m|s)/g,u=/^\d+$/;function d(e,t){if(!(e instanceof Array)){var r=e.match(t);if(r){var n=r[1];if(n.match(l))return function(e){for(var t,r,n=0,a=l.exec(e);null!==a;){var i=(r=3,function(e){if(Array.isArray(e))return e}(t=a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[1],c=i[2];"h"===c&&(n+=60*parseInt(s,10)*60),"m"===c&&(n+=60*parseInt(s,10)),"s"===c&&(n+=parseInt(s,10)),a=l.exec(e)}return n}(n);if(u.test(n))return parseInt(n)}}}function p(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var f={}},251:function(e,t,r){"use strict";var n=r(294),a=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,c={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(c[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===c[n]&&(c[n]=t[n]);return{$$typeof:a,type:e,key:l,ref:u,props:c,_owner:o.current}}t.jsx=c,t.jsxs=c},408:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator,h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function v(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||h}function g(){}function _(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=_.prototype=new g;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,a)&&!P.hasOwnProperty(a)&&(i[a]=t[a]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(a in c=e.defaultProps)void 0===i[a]&&(i[a]=c[a]);return{$$typeof:r,type:e,key:o,ref:s,props:i,_owner:E.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var R=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return o=o(c=e),e=""===i?"."+C(c,0):i,w(o)?(a="",null!=e&&(a=e.replace(R,"$&/")+"/"),O(o,t,a,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(R,"$&/")+"/")+e)),t.push(o)),1;if(c=0,i=""===i?".":i+":",w(e))for(var l=0;l<e.length;l++){var u=i+C(s=e[l],l);c+=O(s,t,a,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=O(s=s.value,t,a,u=i+C(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function x(e,t,r){if(null==e)return e;var n=[],a=0;return O(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},L={transition:null},M={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:L,ReactCurrentOwner:E};t.Children={map:x,forEach:function(e,t,r){x(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=_,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!P.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}return{$$typeof:r,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,r){return I.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,r){return I.current.useReducer(e,t,r)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return I.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},294:function(e,t,r){"use strict";e.exports=r(408)},893:function(e,t,r){"use strict";e.exports=r(251)},53:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,o=a>>>1;n<o;){var s=2*(n+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,r))l<a&&0>i(u,c)?(e[n]=u,e[l]=r,n=l):(e[n]=c,e[s]=r,n=s);else{if(!(l<a&&0>i(u,r)))break e;e[n]=u,e[l]=r,n=l}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,p=null,f=3,h=!1,m=!1,y=!1,v="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,r(l,t)}t=n(u)}}function w(e){if(y=!1,b(e),!m)if(null!==n(l))m=!0,L(S);else{var t=n(u);null!==t&&M(w,t.startTime-e)}}function S(e,r){m=!1,y&&(y=!1,g(T),T=-1),h=!0;var i=f;try{for(b(r),p=n(l);null!==p&&(!(p.expirationTime>r)||e&&!O());){var o=p.callback;if("function"==typeof o){p.callback=null,f=p.priorityLevel;var s=o(p.expirationTime<=r);r=t.unstable_now(),"function"==typeof s?p.callback=s:p===n(l)&&a(l),b(r)}else a(l);p=n(l)}if(null!==p)var c=!0;else{var d=n(u);null!==d&&M(w,d.startTime-r),c=!1}return c}finally{p=null,f=i,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,P=!1,k=null,T=-1,R=5,C=-1;function O(){return!(t.unstable_now()-C<R)}function x(){if(null!==k){var e=t.unstable_now();C=e;var r=!0;try{r=k(!0,e)}finally{r?E():(P=!1,k=null)}}else P=!1}if("function"==typeof _)E=function(){_(x)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,I=D.port2;D.port1.onmessage=x,E=function(){I.postMessage(null)}}else E=function(){v(x,0)};function L(e){k=e,P||(P=!0,E())}function M(e,r){T=v((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,L(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?o+i:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,r(u,e),null===n(l)&&e===n(u)&&(y?(g(T),T=-1):y=!0,M(w,i-o))):(e.sortIndex=s,r(l,e),m||h||(m=!0,L(S))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},840:function(e,t,r){"use strict";e.exports=r(53)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=r(893),t=r(294),n=r(745),a=r(187),i=r.n(a),o=r(107),s="videosdk-live-react-sdk",c={"participant-joined":s+"-participant-joined","participant-left":s+"-participant-left","speaker-changed":s+"-speaker-changed","presenter-changed":s+"-presenter-changed","main-participant-changed":s+"-main-participant-changed","entry-requested":s+"-entry-requested","entry-responded":s+"-entry-responded","recording-started":s+"-recording-started","recording-stopped":s+"-recording-stopped","chat-message":s+"-chat-message","meeting-joined":s+"-meeting-joined","meeting-left":s+"-meeting-left","live-stream-started":s+"-live-stream-started","live-stream-stopped":s+"-live-stream-stopped","video-state-changed":s+"-video-state-changed","video-seeked":s+"-video-seeked","webcam-requested":s+"-webcam-requested","mic-requested":s+"-mic-requested","pin-state-changed":s+"-pin-state-changed","connection-open":s+"-connection-open","connection-close":s+"-connection-close","switch-meeting":s+"-switch-meeting",error:s+"-error","hls-started":s+"-hls-started","hls-stopped":s+"-hls-stopped","hls-state-changed":s+"-hls-state-changed","hls-playable-state-changed":s+"-hls-playable-state-changed","recording-state-changed":s+"-recording-state-changed","livestream-state-changed":s+"-livestream-state-changed","meeting-state-changed":s+"-meeting-state-changed","participant-mode-changed":s+"-participant-mode-changed"},l=new(i());l.setMaxListeners(9999);var u=(0,t.createContext)(),d=function(e){var r=void 0===e?{}:e,n=r.onParticipantJoined,a=void 0===n?function(){}:n,i=r.onParticipantLeft,o=void 0===i?function(){}:i,s=r.onSpeakerChanged,d=void 0===s?function(){}:s,p=r.onPresenterChanged,f=void 0===p?function(){}:p,h=r.onMainParticipantChanged,m=void 0===h?function(){}:h,y=r.onEntryRequested,v=void 0===y?function(){}:y,g=r.onEntryResponded,_=void 0===g?function(){}:g,b=r.onRecordingStarted,w=void 0===b?function(){}:b,S=r.onRecordingStopped,E=void 0===S?function(){}:S,P=r.onChatMessage,k=void 0===P?function(){}:P,T=r.onMeetingJoined,R=void 0===T?function(){}:T,C=r.onMeetingLeft,O=void 0===C?function(){}:C,x=r.onLiveStreamStarted,D=void 0===x?function(){}:x,I=r.onLiveStreamStopped,L=void 0===I?function(){}:I,M=r.onVideoStateChanged,A=void 0===M?function(){}:M,j=r.onVideoSeeked,N=void 0===j?function(){}:j,F=r.onWebcamRequested,B=void 0===F?function(){}:F,U=r.onMicRequested,z=void 0===U?function(){}:U,V=r.onPinStateChanged,H=void 0===V?function(){}:V,W=r.onConnectionOpen,Z=void 0===W?function(){}:W,G=r.onConnetionClose,q=void 0===G?function(){}:G,$=r.onSwitchMeeting,K=void 0===$?function(){}:$,Q=r.onError,X=void 0===Q?function(){}:Q,J=r.onHlsStarted,Y=void 0===J?function(){}:J,ee=r.onHlsStopped,te=void 0===ee?function(){}:ee,re=r.onHlsStateChanged,ne=void 0===re?function(){}:re,ae=r.onRecordingStateChanged,ie=void 0===ae?function(){}:ae,oe=r.onLivestreamStateChanged,se=void 0===oe?function(){}:oe,ce=r.onMeetingStateChanged,le=void 0===ce?function(){}:ce,ue=r.onParticipantModeChanged,de=void 0===ue?function(){}:ue;return(0,t.useEffect)((function(){return l.on(c["participant-joined"],a),l.on(c["participant-left"],o),l.on(c["speaker-changed"],d),l.on(c["presenter-changed"],f),l.on(c["main-participant-changed"],m),l.on(c["entry-requested"],v),l.on(c["entry-responded"],_),l.on(c["recording-started"],w),l.on(c["recording-stopped"],E),l.on(c["chat-message"],k),l.on(c["meeting-joined"],R),l.on(c["meeting-left"],O),l.on(c["live-stream-started"],D),l.on(c["live-stream-stopped"],L),l.on(c["video-state-changed"],A),l.on(c["video-seeked"],N),l.on(c["webcam-requested"],B),l.on(c["mic-requested"],z),l.on(c["pin-state-changed"],H),l.on(c["connection-open"],Z),l.on(c["connection-close"],q),l.on(c["switch-meeting"],K),l.on(c.error,X),l.on(c["hls-started"],Y),l.on(c["hls-stopped"],te),l.on(c["hls-state-changed"],ne),l.on(c["recording-state-changed"],ie),l.on(c["livestream-state-changed"],se),l.on(c["meeting-state-changed"],le),l.on(c["participant-mode-changed"],de),function(){l.off(c["meeting-state-changed"],le),l.off(c["participant-joined"],a),l.off(c["participant-left"],o),l.off(c["speaker-changed"],d),l.off(c["presenter-changed"],f),l.off(c["main-participant-changed"],m),l.off(c["entry-requested"],v),l.off(c["entry-responded"],_),l.off(c["recording-started"],w),l.off(c["recording-stopped"],E),l.off(c["chat-message"],k),l.off(c["meeting-joined"],R),l.off(c["meeting-left"],O),l.off(c["live-stream-started"],D),l.off(c["live-stream-stopped"],L),l.off(c["video-state-changed"],A),l.off(c["video-seeked"],N),l.off(c["webcam-requested"],B),l.off(c["mic-requested"],z),l.off(c["pin-state-changed"],H),l.off(c["connection-open"],Z),l.off(c["connection-close"],q),l.off(c["switch-meeting"],K),l.off(c.error,X),l.off(c["hls-started"],Y),l.off(c["hls-stopped"],te),l.off(c["hls-state-changed"],ne),l.off(c["recording-state-changed"],ie),l.off(c["livestream-state-changed"],se),l.off(c["participant-mode-changed"],de)}}),[]),(0,t.useContext)(u)},p=function(e){var r=e.children,n=e.config,a=e.token,i=e.joinWithoutUserInteraction,s=e.reinitialiseMeetingOnConfigChange,d=e.deviceInfo,p=(0,t.useState)(null),f=p[0],h=p[1],m=(0,t.useState)(null),y=m[0],v=m[1],g=(0,t.useState)(null),_=g[0],b=g[1],w=(0,t.useState)(null),S=w[0],E=w[1],P=(0,t.useState)(null),k=P[0],T=P[1],R=(0,t.useState)(!1),C=R[0],O=R[1],x=(0,t.useState)(!1),D=x[0],I=x[1],L=(0,t.useState)(!1),M=L[0],A=L[1],j=(0,t.useState)(!1),N=j[0],F=j[1],B=(0,t.useState)([]),U=B[0],z=B[1],V=(0,t.useState)(new Map),H=V[0],W=V[1],Z=(0,t.useState)(new Map),G=Z[0],q=Z[1],$=(0,t.useState)(!1),K=$[0],Q=$[1],X=(0,t.useState)(new Map),J=X[0],Y=X[1],ee=(0,t.useState)(!1),te=ee[0],re=ee[1],ne=(0,t.useState)(!1),ae=ne[0],ie=ne[1],oe=(0,t.useState)("RECORDING_STOPPED"),se=oe[0],ce=oe[1],le=(0,t.useState)("LIVESTREAM_STOPPED"),ue=le[0],de=le[1],pe=(0,t.useState)("HLS_STOPPED"),fe=pe[0],he=pe[1],me=(0,t.useState)({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),ye=me[0],ve=me[1],ge=(0,t.useRef)(),_e=(0,t.useRef)(),be=(0,t.useRef)(),we=(0,t.useRef)(),Se=(0,t.useRef)(),Ee=(0,t.useRef)(n),Pe=(0,t.useRef)(a),ke=(0,t.useRef)(!1),Te=(0,t.useRef)(),Re=(0,t.useMemo)((function(){return s}),[]);(0,t.useEffect)((function(){ge.current=f}),[f]),(0,t.useEffect)((function(){_e.current=C}),[C]),(0,t.useEffect)((function(){be.current=D}),[D]),(0,t.useEffect)((function(){we.current=M}),[M]),(0,t.useEffect)((function(){Se.current=N}),[N]),(0,t.useEffect)((function(){Ee.current=n}),[n]),(0,t.useEffect)((function(){Pe.current=a}),[a]),(0,t.useEffect)((function(){Te.current=ae}),[ae]);var Ce=function(e){W((function(t){return t.set(e.id,e),new Map(t)})),l.emit(c["participant-joined"],e)},Oe=function(e){W((function(t){return t.delete(e.id),new Map(t)})),l.emit(c["participant-left"],e)},xe=function(e){var t,r;T(e),A(e===(null==ge||null===(t=ge.current)||void 0===t||null===(r=t.localParticipant)||void 0===r?void 0:r.id)),l.emit(c["presenter-changed"],e)},De=function(e){b(e),l.emit(c["main-participant-changed"],e)},Ie=function(e){E(e),l.emit(c["speaker-changed"],e)},Le=function(e){z((function(t){return[].concat(t,[e])})),l.emit(c["chat-message"],e)},Me=function(e){l.emit(c["entry-requested"],e)},Ae=function(e,t){l.emit(c["entry-responded"],e,t)},je=function(){F(!0),l.emit(c["recording-started"])},Ne=function(){F(!1),l.emit(c["recording-stopped"])},Fe=function(e){"live"===e.track.readyState&&("video"===e.kind?I(!0):"audio"===e.kind&&O(!0))},Be=function(e){"video"===e.kind?I(!1):"audio"===e.kind&&O(!1)},Ue=function(e){Q(!0),l.emit(c["live-stream-started"],e)},ze=function(){Q(!1),l.emit(c["live-stream-stopped"])},Ve=function(e){ie(!0),l.emit(c["hls-started"],e)},He=function(){ie(!1),l.emit(c["hls-stopped"])},We=function(e){l.emit(c["video-state-changed"],e)},Ze=function(e){l.emit(c["video-seeked"],e)},Ge=function(e){l.emit(c["webcam-requested"],e)},qe=function(e){l.emit(c["mic-requested"],e)},$e=function(e){ke.current=!0,z((function(t){return[].concat(t,e.messages)})),l.emit(c["meeting-joined"],e),re(!0)},Ke=function e(){l.emit(c["meeting-left"]);var t,r=ge.current;r&&("function"==typeof(null==r?void 0:r.off)&&(r.off("meeting-state-changed",at),r.off("participant-joined",Ce),r.off("participant-left",Oe),r.off("presenter-changed",xe),r.off("main-participant-changed",De),r.off("speaker-changed",Ie),r.off("entry-requested",Me),r.off("entry-responded",Ae),r.off("chat-message",Le),r.off("recording-started",je),r.off("recording-stopped",Ne),r.off("meeting-joined",$e),r.off("meeting-left",e),r.off("livestream-started",Ue),r.off("livestream-stopped",ze),r.off("video-state-changed",We),r.off("video-seeked",Ze),r.off("webcam-requested",Ge),r.off("mic-requested",qe),r.off("pin-state-changed",Qe),r.off("connection-open",Xe),r.off("connection-close",Je),r.off("switch-meeting",Ye),r.off("error",et),r.off("hls-started",Ve),r.off("hls-stopped",He),r.off("recording-state-changed",tt),r.off("livestream-state-changed",rt),r.off("hls-state-changed",nt),r.off("participant-mode-changed",it)),"function"==typeof(null==r||null===(t=r.localParticipant)||void 0===t?void 0:t.off)&&(r.localParticipant.off("stream-enabled",Fe),r.localParticipant.off("stream-disabled",Be)),h(null),v(null),b(null),E(null),T(null),O(!1),I(!1),A(!1),F(!1),z([]),Q(!1),W(new Map),q(new Map),Y(new Map),re(!1),ie(!1),ce("RECORDING_STOPPED"),de("LIVESTREAM_STOPPED"),he("HLS_STOPPED"),ve({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}))},Qe=function(e){var t=e.participantId,r=e.state,n=e.pinnedBy;q((function(e){return r.cam||r.share?e.set(t,r):e.delete(t),new Map(e)})),l.emit(c["pin-state-changed"],{participantId:t,state:r,pinnedBy:n})},Xe=function(e){Y((function(t){return t.set(e.id,e),new Map(t)})),l.emit(c["connection-open"],e)},Je=function(e){Y((function(t){return t.delete(e),new Map(t)})),l.emit(c["connection-close"],e)},Ye=function(e){l.emit(c["switch-meeting"],e)},et=function(e){l.emit(c.error,e)},tt=function(e){ce(null==e?void 0:e.status),l.emit(c["recording-state-changed"],e)},rt=function(e){de(null==e?void 0:e.status),l.emit(c["livestream-state-changed"],e)},nt=function(e){he(null==e?void 0:e.status),"HLS_PLAYABLE"==(null==e?void 0:e.status)?ve({downstreamUrl:null==e?void 0:e.downstreamUrl,playbackHlsUrl:null==e?void 0:e.playbackHlsUrl,livestreamUrl:null==e?void 0:e.livestreamUrl}):"HLS_STOPPED"==(null==e?void 0:e.status)&&ve({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),l.emit(c["hls-state-changed"],e)},at=function(e){l.emit(c["meeting-state-changed"],e)},it=function(e){var t,r;W((function(t){var r=t.get(e.participantId);return r.mode=e.mode,t.set(r.id,r),t})),e.participantId===(null==ge||null===(t=ge.current)||void 0===t||null===(r=t.localParticipant)||void 0===r?void 0:r.id)&&v((function(t){return t.mode=e.mode,t})),l.emit(c["participant-mode-changed"],e)},ot=function(){var e=o.VideoSDK&&o.VideoSDK.initMeeting(Ee.current);h(e);var t=e.localParticipant,r=e.participants;r.set(t.id,t),W(r),v(t),e.on("meeting-state-changed",at),e.on("participant-joined",Ce),e.on("participant-left",Oe),e.on("presenter-changed",xe),e.on("main-participant-changed",De),e.on("speaker-changed",Ie),e.on("entry-requested",Me),e.on("entry-responded",Ae),e.on("chat-message",Le),e.on("recording-started",je),e.on("recording-stopped",Ne),e.on("meeting-joined",$e),e.on("meeting-left",Ke),e.on("livestream-started",Ue),e.on("livestream-stopped",ze),e.on("video-state-changed",We),e.on("video-seeked",Ze),e.on("webcam-requested",Ge),e.on("mic-requested",qe),e.on("pin-state-changed",Qe),e.on("connection-open",Xe),e.on("connection-close",Je),e.on("switch-meeting",Ye),e.on("error",et),e.on("hls-started",Ve),e.on("hls-stopped",He),e.on("recording-state-changed",tt),e.on("livestream-state-changed",rt),e.on("hls-state-changed",nt),e.on("participant-mode-changed",it),e.localParticipant.on("stream-enabled",Fe),e.localParticipant.on("stream-disabled",Be),e.join()},st=function(){var e=ge.current;e&&e.leave()},ct=function(e){void 0===e&&(e=void 0);var t=ge.current;t&&t.unmuteMic(e)},lt=function(){var e=ge.current;e&&e.muteMic()},ut=function(){var e=ge.current;e&&e.disableWebcam()},dt=function(e){void 0===e&&(e=void 0);var t=ge.current;t&&t.enableWebcam(e)},pt=function(){var e=ge.current;e&&e.disableScreenShare()},ft=function(e){void 0===e&&(e=void 0);var t=ge.current;t&&t.enableScreenShare(e)},ht=function(){o.VideoSDK.config(Pe.current),d?o.VideoSDK.analytics(d):o.VideoSDK.analytics({sdkType:"react-web",sdkVersion:"0.1.75"}),i&&ot()};return(0,t.useEffect)((function(){ht()}),[]),(0,t.useEffect)((function(){Re&&ke.current&&(st(),ht(),!i&&ot())}),[n.meetingId,a,Re]),t.createElement(u.Provider,{value:{meetingId:null==f?void 0:f.id,meeting:f,baseUrl:null==f?void 0:f.baseUrl,localParticipant:y,mainParticipant:_,activeSpeakerId:S,participants:H,presenterId:k,localMicOn:C,localWebcamOn:D,localScreenShareOn:M,messages:U,isRecording:N,isLiveStreaming:K,pinnedParticipants:G,connections:J,isHls:ae,recordingState:se,livestreamState:ue,hlsState:fe,hlsUrls:ye,isMeetingJoined:te,join:ot,leave:st,end:function(){var e=ge.current;e&&e.end()},startRecording:function(e,t,r){var n=ge.current;n&&n.startRecording(e,t,r)},stopRecording:function(){var e=ge.current;e&&Se.current&&e.stopRecording()},sendChatMessage:function(e){var t=ge.current;t&&t.sendChatMessage(e)},respondEntry:function(e,t){var r=ge.current;r&&r.respondEntry(e,t)},muteMic:lt,unmuteMic:ct,toggleMic:function(e){void 0===e&&(e=void 0),_e.current?lt():ct(e)},disableWebcam:ut,enableWebcam:dt,toggleWebcam:function(e){void 0===e&&(e=void 0),be.current?ut():dt(e)},disableScreenShare:pt,enableScreenShare:ft,toggleScreenShare:function(e){void 0===e&&(e=void 0),we.current?pt():ft(e)},getMics:function(){try{var e=ge.current;return Promise.resolve(function(){if(e)return Promise.resolve(e.getMics())}())}catch(e){return Promise.reject(e)}},getWebcams:function(){try{var e=ge.current;return Promise.resolve(function(){if(e)return Promise.resolve(e.getWebcams())}())}catch(e){return Promise.reject(e)}},changeWebcam:function(e){var t=ge.current;t&&t.changeWebcam(e)},replaceWebcamStream:function(e){var t=ge.current;t&&t.replaceWebcamStream(e)},changeMic:function(e){var t=ge.current;t&&t.changeMic(e)},changeMode:function(e){var t=ge.current;t&&t.changeMode(e)},startVideo:function(e){var t=e.link,r=ge.current;r&&r.startVideo({link:t})},stopVideo:function(){var e=ge.current;e&&e.stopVideo()},resumeVideo:function(){var e=ge.current;e&&e.resumeVideo()},pauseVideo:function(e){var t=e.currentTime,r=ge.current;r&&r.pauseVideo({currentTime:t})},seekVideo:function(e){var t=e.currentTime,r=ge.current;r&&r.seekVideo({currentTime:t})},startLivestream:function(e,t){var r=ge.current;r&&r.startLivestream(e,t)},stopLivestream:function(){var e=ge.current;e&&e.stopLivestream()},connectTo:function(e){var t=e.meetingId,r=e.payload;try{var n=ge.current,a=function(){if(n)return Promise.resolve(n.connectTo({meetingId:t,payload:r})).then((function(){}))}();return Promise.resolve(a&&a.then?a.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},startHls:function(e){var t=ge.current;t&&t.startHls(e)},stopHls:function(){var e=ge.current;e&&e.stopHls()}}},r)},f=(o.VideoSDK.Constants,function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))}),h="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiIyZjAwOWUyZi00NzE4LTRkODYtODhhOS03YjlhN2FiNDc0YzYiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTY5MTUyMzI3MCwiZXhwIjoxNzA3MDc1MjcwfQ.GW4ZRsasiXcbjoi6n0bbsgpJswdDmI1tG6j-zKbF6Lc",m=function(e){return e.token,f(void 0,void 0,void 0,(function(){return function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch("https://api.videosdk.live/v2/rooms",{method:"POST",headers:{authorization:"".concat(h),"Content-Type":"application/json"},body:JSON.stringify({})})];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().roomId]}}))}))},y=r(4),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)},g=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))},_=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},b=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},w=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};function S(r){var n=this,a=r.getMeetingAndToken,i=b((0,t.useState)(),2),o=i[0],s=i[1],c=function(){return g(n,void 0,void 0,(function(){return _(this,(function(e){return a(o),[2]}))}))};return(0,e.jsxs)("div",{children:[(0,e.jsx)("input",{type:"text",placeholder:"Enter Meeting Id",onChange:function(e){s(e.target.value)}}),(0,e.jsx)("button",v({onClick:c},{children:"Join"}))," or ",(0,e.jsx)("button",v({onClick:c},{children:"Create Meeting"}))]})}function E(r){var n=r.participantId,a=(0,t.useRef)(null),i=function(e,r){var n=void 0===r?{}:r,a=n.onStreamEnabled,i=void 0===a?function(){}:a,o=n.onStreamDisabled,s=void 0===o?function(){}:o,u=n.onMediaStatusChanged,p=void 0===u?function(){}:u,f=n.onVideoQualityChanged,h=void 0===f?function(){}:f,m=(0,t.useState)(null),y=m[0],v=m[1],g=(0,t.useState)(null),_=g[0],b=g[1],w=(0,t.useState)(null),S=w[0],E=w[1],P=(0,t.useState)(null),k=P[0],T=P[1],R=d(),C=(0,t.useMemo)((function(){var t;return{participants:null==R?void 0:R.participants,localParticipant:null==R?void 0:R.localParticipant,activeSpeakerId:null==R?void 0:R.activeSpeakerId,mainParticipant:null==R?void 0:R.mainParticipant,pinState:(null==R||null===(t=R.pinnedParticipants)||void 0===t?void 0:t.get(e))||{cam:!1,share:!1}}}),[R]),O=C.participants,x=C.localParticipant,D=C.activeSpeakerId,I=C.mainParticipant,L=C.pinState,M=null==O?void 0:O.get(e),A=(0,t.useState)(null==M?void 0:M.webcamOn),j=A[0],N=A[1],F=(0,t.useState)(null==M?void 0:M.micOn),B=F[0],U=F[1],z=(0,t.useState)(null==M?void 0:M.mode),V=z[0],H=z[1],W=function(e){if("live"===e.track.readyState)switch(e.kind){case"video":null!=y&&v(null),v(e);break;case"audio":null!=_&&b(null),b(e);break;case"share":null!=S&&E(null),E(e);break;case"shareAudio":null!=k&&T(null),T(e)}},Z=function(e){W(e),i(e)},G=function(t){e===t.participantId&&H(t.mode)},q=function(e){!function(e){switch(e.kind){case"video":v(null);break;case"audio":b(null);break;case"share":E(null);break;case"shareAudio":T(null)}}(e),s(e)},$=function(e){var t=e.peerId,r=e.prevQuality,n=e.currentQuality;h({peerId:t,prevQuality:r,currentQuality:n})},K=function(e){var t=e.kind,r=e.peerId,n=e.newStatus;"audio"==t?U(n):"video"==t&&N(n),p({kind:t,peerId:r,newStatus:n})};return(0,t.useEffect)((function(){var e=null==M?void 0:M.streams;return e&&e.forEach((function(e){W(e)})),null!=M&&M.micOn&&U(B),null!=M&&M.webcamOn&&N(j),null==M||M.on("stream-enabled",Z),null==M||M.on("stream-disabled",q),null==M||M.on("media-status-changed",K),null==M||M.on("video-quality-changed",$),l.on(c["participant-mode-changed"],G),function(){null==M||M.off("stream-enabled",Z),null==M||M.off("stream-disabled",q),null==M||M.off("media-status-changed",K),null==M||M.off("video-quality-changed",$),l.off(c["participant-mode-changed"],G)}}),[M]),{displayName:null==M?void 0:M.displayName,participant:M,webcamStream:y,micStream:_,screenShareStream:S,screenShareAudioStream:k,webcamOn:j||!!y,micOn:B||!!_,mode:V,screenShareOn:!!S,isLocal:(null==x?void 0:x.id)===e,isActiveSpeaker:D===e,isMainParticipant:(null==I?void 0:I.id)===e,pinState:L,consumeMicStreams:function(){null==M||M.consumeMicStreams()},consumeWebcamStreams:function(){null==M||M.consumeWebcamStreams()},stopConsumingMicStreams:function(){null==M||M.stopConsumingMicStreams()},stopConsumingWebcamStreams:function(){null==M||M.stopConsumingWebcamStreams()},setQuality:function(e){null==M||M.setQuality(e)},setViewPort:function(e,t){null==M||M.setViewPort(e,t)},enableMic:function(){null==M||M.enableMic()},disableMic:function(){null==M||M.disableMic()},enableWebcam:function(){null==M||M.enableWebcam()},disableWebcam:function(){null==M||M.disableWebcam()},pin:function(e){null==M||M.pin(e)},unpin:function(e){null==M||M.unpin(e)},remove:function(){null==M||M.remove()},switchTo:function(e){return Promise.resolve(null==M?void 0:M.switchTo(e)).then((function(){}))},getAudioStats:function(){return Promise.resolve(null==M?void 0:M.getAudioStats())},getVideoStats:function(){return Promise.resolve(null==M?void 0:M.getVideoStats())},getShareStats:function(){return Promise.resolve(null==M?void 0:M.getShareStats())}}}(n),o=i.webcamStream,s=i.micStream,u=i.webcamOn,p=i.micOn,f=i.isLocal,h=i.displayName,m=(0,t.useMemo)((function(){if(u&&o){var e=new MediaStream;return e.addTrack(o.track),e}}),[o,u]);return(0,t.useEffect)((function(){if(a.current)if(p&&s){var e=new MediaStream;e.addTrack(s.track),a.current.srcObject=e,a.current.play().catch((function(e){return console.error("videoElem.current.play() failed",e)}))}else a.current.srcObject=null}),[s,p]),(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{children:["Participant: ",h," | Webcam: ",u?"ON":"OFF"," | Mic:"," ",p?"ON":"OFF"]}),(0,e.jsx)("audio",{ref:a,autoPlay:!0,muted:f}),u&&(0,e.jsx)(y.Z,{playsinline:!0,pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:m,height:"200px",width:"300px",onError:function(e){console.log(e,"participant video error")}})]},n)}function P(){var t=d(),r=t.leave,n=t.toggleMic,a=t.toggleWebcam;return(0,e.jsxs)("div",{children:[(0,e.jsx)("button",v({onClick:function(){return r()}},{children:"Leave"})),(0,e.jsx)("button",v({onClick:function(){return n()}},{children:"toggleMic"})),(0,e.jsx)("button",v({onClick:function(){return a()}},{children:"toggleWebcam"}))]})}function k(r){var n=r.onMeetingLeave,a=r.meetingId,i=b((0,t.useState)(null),2),o=i[0],s=i[1],c=d({onMeetingJoined:function(){s("JOINED")},onMeetingLeft:function(){n()}}),l=c.join,u=c.participants;return(0,e.jsxs)("div",v({className:"container"},{children:[(0,e.jsxs)("h3",{children:["Meeting Id: ",a]}),o&&"JOINED"==o?(0,e.jsxs)("div",{children:[(0,e.jsx)(P,{}),"//For rendering all the participants in the meeting",w([],b(u.keys()),!1).map((function(t){return(0,e.jsx)(E,{participantId:t},t)}))]}):o&&"JOINING"==o?(0,e.jsx)("p",{children:"Joining the meeting..."}):(0,e.jsx)("button",v({onClick:function(){s("JOINING"),l()}},{children:"Join"}))]}))}var T=document.createElement("div");T.id="vc-react-app";var R=document.createElement("style");R.innerHTML="\n  #".concat(T.id," {\n  position: fixed;\n  right: 0;\n  top: 0;\n  width: 300px;\n  height: 100vh;\n  background: #ffffff;\n  z-index: 999999999;\n  }\n"),document.body.appendChild(T),document.body.appendChild(R),n.createRoot(T).render((0,e.jsx)(t.StrictMode,{children:(0,e.jsx)((function(){var r=this,n=b((0,t.useState)(),2),a=n[0],i=n[1];return a?(0,e.jsx)(p,v({config:{meetingId:a,micEnabled:!0,webcamEnabled:!0,name:"C.V. Raman"},token:h},{children:(0,e.jsx)(k,{meetingId:a,onMeetingLeave:function(){i(null)}})})):(0,e.jsx)(S,{getMeetingAndToken:function(e){return g(r,void 0,void 0,(function(){var t;return _(this,(function(r){switch(r.label){case 0:return null!=e?[3,2]:[4,m({token:h})];case 1:return t=r.sent(),[3,3];case 2:t=e,r.label=3;case 3:return i(t),[2]}}))}))}})}),{})}))}()}();